[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "RS MINERVE Manuals",
    "section": "",
    "text": "RS MINERVE is a software for the simulation of free surface run-off flow formation and propagation. It models complex hydrological and hydraulic networks according to a semi-distributed conceptual scheme. In addition to particular hydrological processes such as snowmelt, glacier melt, surface and underground flow, hydraulic control elements (e.g. gates, spillways, diversions, junctions, turbines and pumps) are also included.\nRS MINERVE is based on the same concept than Routing System II, earlier software developed at the Laboratory of Hydraulic Constructions (LCH) at the Ecole Polytechnique Fédérale de Lausanne (EPFL) (Dubois and Boillat 2000; J. García Hernández et al. 2007) and used since 2002 in different projects and theses, such as by Jordan (2007) or Claude (2011). The software presented hereafter, RS MINERVE, is currently developed by the CREALP and HydroCosmos SA, with the collaboration of the previously mentioned LCH as well as the Universitat Politècnica de València (UPV). It has also been used since 2011 in numerous projects and theses (e.g. Javier García Hernández (2011)).\nThe global analysis of a hydrologic-hydraulic network is essential in numerous decision-making situations such as the management or planning of water resources, the optimization of hydropower plant operations, the design and regulation of spillways or the development of appropriate flood protection concepts. RS MINERVE makes such analyses accessible to a broad public through its user-friendly interface and its valuable possibilities. In addition, thanks to its modular framework, the software can be developed and adapted to specific needs or issues.\nRS MINERVE contains different hydrological models for rainfall-runoff, such as GSM, SOCONT, SAC-SMA, GR4J, HBV and SCS. The combination of hydraulic structure models (reservoirs, turbines, spillways,…) can also reproduce complex hydropower schemes. In addition, a hydropower model computes the net height and the linear pressure losses, providing energy production values and total income based on the turbine performance and on the sale price of energy. A consumption model calculates water deficits for consumptive uses of cities, industries and/or agriculture. A structure efficiency model computes discharge losses in a structure such a canal or a pipe by considering a simple efficiency coefficient.\nThe Expert module, specifically created for research or complex studies, enables in-depth evaluation of hydrologic and hydraulic results. Time-slice simulation facilitates the analysis of large data sets without overloading the computer memory. Scenario simulation introduced the possibility of simulating multiple weather scenarios or several sets of parameters and initial conditions to study the variability and sensitivity of the model results. The automatic calibration with different algorithms, such as the SCE-UA, calculates the best set of hydrological parameters depending on a user-defined objective function.\nRS MINERVE program is freely distributed to interested users. Several projects and theses have used and are using this program for study basins in Switzerland, Spain, Peru, Brazil France and Nepal. In addition to the research center CREALP and the engineering office HydroCosmos SA, which currently develop RS MINERVE, two universities (Ecole Polytechnique Fédérale de Lausanne and Universitat Politècnica de València) collaborate to improve RS MINERVE and use it to support postgraduate courses in Civil Engineering and Environmental Sciences."
  },
  {
    "objectID": "index.html#release",
    "href": "index.html#release",
    "title": "RS MINERVE Manuals",
    "section": "Release",
    "text": "Release\nApproved for Public Release. Distribution Unlimited.\n\n\n\nISSN\n\n\n\n\n\nISSN\n\n\n\n\n\n\n\n\n\nCentre de recherche sur l’environnement alpin (CREALP)\n\n\n\nHydroCosmos SA"
  },
  {
    "objectID": "index.html#references",
    "href": "index.html#references",
    "title": "RS MINERVE Manuals",
    "section": "References",
    "text": "References\n\n\n\n\nClaude, A. 2011. “Evolution Vers Un Système Hydrométéorologique Intégré Pour La Prévision Des Crues de l’Isère à Moûtiers : Prise En Compte Des Aménagements Hydroélectrique.” {PhD} {Thesis}, Grenoble, France: Université de Grenoble, LTHE. https://tel.archives-ouvertes.fr/tel-00638427.\n\n\nDubois, J., and J.-L. Boillat. 2000. “Routing System - Modélisation Du Routage Des Crues Dans Des Systèmes Hydrauliques à Surface Libre.” Communication 9. Laboratoire de Constructions Hydrauliques, Ecole Polytechnique Fédérale de Lausanne.\n\n\nGarcía Hernández, Javier. 2011. “Flood Management in a Complex River Basin with a Real-Time Decision Support System Based on Hydrological Forecasts.” {PhD} {Thesis} {N}°5093, Lausanne, Switzerland: Ecole Polytechnique Fédérale de Lausanne, EPFL.\n\n\nGarcía Hernández, J., F. Jordan, J. Dubois, and J.-L. Boillat. 2007. “Routing System II. Flow Modelling in Hydraulic Systems.” Communication 32. Laboratoire de Constructions Hydrauliques, Ecole Polytechnique Fédérale de Lausanne.\n\n\nJordan, F. 2007. “Modèle de Prévision Et de Gestion Des Crues - Optimisation Des Opérations Des Aménagements Hydroélectriques à Accumulation Pour La Réduction Des Débits de Crue.” {PhD} {Thesis} {N}°3711, Lausanne, Switzerland: Ecole Polytechnique Fédérale de Lausanne, EPFL."
  },
  {
    "objectID": "user_manual.html",
    "href": "user_manual.html",
    "title": "User Manual",
    "section": "",
    "text": "This chapter contains the User Manual of the RS MINERVE software."
  },
  {
    "objectID": "user_manual.html#document-structure",
    "href": "user_manual.html#document-structure",
    "title": "User Manual",
    "section": "Document structure",
    "text": "Document structure\nThe manual is composed of 7 main chapters:\n\nRainfall-runoff modelling\nHydraulic infrastructures modelling\nDatabase\nGIS\nHydrological-hydraulic simulation\nExpert module\nPlugins\n\nIn the different chapters, actions to be done by the user are presented in blue.\nIn addition to this User’s manual, the reader can also find all model equations and file descriptions in the technical manual (García Hernández et al. 2020)."
  },
  {
    "objectID": "user_manual.html#installation-procedure",
    "href": "user_manual.html#installation-procedure",
    "title": "User Manual",
    "section": "Installation procedure",
    "text": "Installation procedure\nProceed as follows to install RS MINERVE on your computer (requires Windows 7 or later versions of Windows):\n\nVisit the CREALP website: https://crealp.ch/rs-minerve/\nSelect the version within the “Téléchargement et support” section\nSave the file, double-click on RSMinerve-install.exe (in the Internet browser Downloads frame) and follow the installation procedure.\n\n\n\n\nFigure 1: Structure of the RS MINERVE main interface"
  },
  {
    "objectID": "user_manual.html#updates",
    "href": "user_manual.html#updates",
    "title": "User Manual",
    "section": "Updates",
    "text": "Updates\nWhen RS MINERVE is opened and if an Internet connection is available, RS MINERVE connects to the server to check if a new version is available. If this is the case, the user is invited to install the new version by accepting the update.\n\n\n\nFigure 2: Installation of updates"
  },
  {
    "objectID": "user_manual.html#uninstallation-procedure",
    "href": "user_manual.html#uninstallation-procedure",
    "title": "User Manual",
    "section": "Uninstallation procedure",
    "text": "Uninstallation procedure\nTo uninstall RS MINERVE, use the conventional uninstallation procedure in Windows."
  },
  {
    "objectID": "user_manual.html#the-model-interface",
    "href": "user_manual.html#the-model-interface",
    "title": "User Manual",
    "section": "The Model interface",
    "text": "The Model interface\nThe structure of the RS MINERVE main window and the different frames composing it are presented in Figure 1.\nThe Interface frame (Figure 1) in the middle of the RS MINERVE interface allows the visualization of the model network.\nInteraction within the Interface is possible with the mouse.\n\nUse the scroll wheel to zoom in / zoom out\nPress the scroll wheel and move the mouse to move the interface window\nLeft click on an object (Figure 3 (b)) \\(\\rightarrow\\) Select the object and move it in the interface\nDouble-click on an object (the object is highlighted, Figure 3 (c)) \\(\\rightarrow\\) Display the Object description, Series and other corresponding frames (in the right part).\n\n\n\n\nFigure 3: Example of (a) an unselected object, (b) after a left click and (c) after a double-click"
  },
  {
    "objectID": "user_manual.html#the-search-tool",
    "href": "user_manual.html#the-search-tool",
    "title": "User Manual",
    "section": "The Search tool",
    "text": "The Search tool\nTo facilitate navigation in the main window, the Search tool (right-frame) allows the user to enter the name of an object. All corresponding names are listed and a click on the correct one opens the parent model and highlights the corresponding object.\n\n\n\nFigure 4: The Search tool"
  },
  {
    "objectID": "user_manual.html#sec-user_intro_settings",
    "href": "user_manual.html#sec-user_intro_settings",
    "title": "User Manual",
    "section": "Settings",
    "text": "Settings\nThe user can access the settings in the RS MINERVE frame (Figure 5) and can change the following values:\n\nThe units of inputs, parameters and state variables of RS MINERVE (Precipitation, Temperature, Length, Height,…)\nThe interpolation method for meteorological values:\n\nThiessen polygons: for using the nearest meteorological station\nShepard method: for values depending on inverse distance weighting\n\nThe Potential Evapotranspiration (\\(ETP\\)) method used in the hydrological model. The \\(ETP\\) can be directly taken from Database, or computed with one of the following methods:\n\nTurc\nMcGuinness\nOudin\nUniform ETP\n\n\nAny change is directly applied to the current model. In addition, the user can also save the current settings as default settings for new models.\n\n\n\nFigure 5: RS MINERVE Settings tab"
  },
  {
    "objectID": "user_manual.html#list-of-keyboard-shortcuts-and-mouse-actions",
    "href": "user_manual.html#list-of-keyboard-shortcuts-and-mouse-actions",
    "title": "User Manual",
    "section": "List of keyboard shortcuts and mouse actions",
    "text": "List of keyboard shortcuts and mouse actions\nThe user can use a list of keyboard shortcuts (Table 1) as well as a list of mouse actions over the graphics (Table 2).\n\n\nTable 1: List of keyboard shortcuts\n\n\n\n\n\n\nCtrl + N\nNew Project\n\n\nCtrl + O\nOpen Project\n\n\nCtrl + S\nSave Project\n\n\nCtrl + Shift + S\nSave as Project\n\n\nCtrl + W\nClose Project\n\n\nF5\nStart Simulation\n\n\nShift + F5\nStop Simulation\n\n\nEsc\nBack (go to hierarchical higher level), Cancel object selection (when object type selected in Objects frame)\n\n\nSpace\nSwitch between Select and Connections\n\n\nCtrl + Space\nSwitch between Select and Transitions (in a Regulation object only)\n\n\nCtrl\nTo select more than one object or series\n\n\n\n\n \n\n\n\n\n\n\n\nOVER THE AXES\n\n\n\nLeft click\n-\n\n\nRight click and move the mouse\nDisplace the current view\n\n\nMove the scroll wheel\nZoom in / zoom out\n\n\nClick on scroll wheel and movethe mouse\nSelect the zoom zone\n\n\nDouble click on scroll wheel\nBack to default zoom\n\n\n\n\n\nTable 2: List of mouse actions in graphics\n\n\n\n\n\n\nOVER THE TIME SERIES PLOT\n\n\n\nLeft click\nDate and value of the nearest series point\n\n\nRight click and move the mouse\nDisplace the current view\n\n\nMove the scroll wheel\nZoom in / zoom out\n\n\nClick on scroll wheel and move the mouse\nSelect the zoom zone\n\n\nDouble click on scroll wheel\nBack to default zoom"
  },
  {
    "objectID": "user_manual.html#references",
    "href": "user_manual.html#references",
    "title": "User Manual",
    "section": "References",
    "text": "References\n\n\n\n\nGarcía Hernández, Javier, Alain Foehn, Javier Fluixá Sanmartín, Bastien Roquier, Tristan Brauchli, Javier Paredes Arquiola, and Giovanni De Cesare. 2020. RS MINERVE - Technical Manual. Switzerland: RS MINERVE Group."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html",
    "href": "user_rainfall_runoff_modelling.html",
    "title": "1  Rainfall-runoff modelling",
    "section": "",
    "text": "RS MINERVE is an object-oriented modeling software. The different processes are modeled with equation-based objects, presented hereafter in Section 1.1 (Hydrology) and Section 1.3 (Standard objects). Hydraulic infrastructures and Regulation objects are presented in Section 2.\nThe implemented hydrological models (Snow-SD, SWMM and GSM-SOCONT) have been developed within the framework of different research projects, namely CRUEX (Bérod 1994), SWURVE (Schaefli et al. 2005) and MINERVE1 (Y. Hamdi, Hingray, and Musy 2003; Y. Hamdi, Hingray, and Musy 2005).\nThe hydrological models HBV (Bergström 1976, 1992), GR4J (Perrin, Michel, and Andréassian 2003), SAC (Burnash 1995) and SCS (McGuinness and Bordne 1972) are also included in the software RS MINERVE for extending the hydrological modeling possibilities."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_hydrology",
    "href": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_hydrology",
    "title": "1  Rainfall-runoff modelling",
    "section": "1.1 Hydrology",
    "text": "1.1 Hydrology\nThe Base objects are mostly composed of the hydro-meteorological objects. For more details, see the Technical Manual.\n\n\n\n\n\n\n\n\nVirtual weather station - It calculates the local meteorological conditions (precipitation (\\(P\\)), temperature (\\(T\\)) and potential evapotranspiration (\\(ETP\\))) based on observed or forecasted data from the database and based on Thiessen or Shepard interpolations. In addition, the \\(ETP\\) can also be calculated either with a constant value or from one of the different equations proposed by Turc (1955, 1961), McGuinness and Bordne (1972) or Oudin (2004). The method can be selected in the Settings (see Section 7). For more details, please refer to the Technical Manual of RS MINERVE.\n\n\n\nSnow-SD - Simulates the time evolution of the snow pack based on temperature (\\(T\\)) and precipitation (\\(P\\)). The output is an equivalent precipitation (\\(P_{eq}\\)) and the snow height (\\(H\\)) proposed as input to other models such as SAC-SMA or GR4J.\n\n\n\nRunoff (SWMM) - The runoff-based hydrograph is calculated with this object from a net rainfall (\\(i_{Net}\\)).\n\n\n\nGSM (Glacial Snow Melt) - The GSM object combines Snow and Glacier models.\n\n\n\nSOCONT (SOil CONTribution) - The SOCONT object combines the Snow, Infiltration (GR3) and Runoff (SWMM) models.\n\n\n\nHBV - This integrated rainfall-runoff model is based on the HBV model. Using a precipitation (\\(P\\)), a temperature (\\(T\\)) and a potential evapotranspiration (\\(ETP\\)) as inputs, it produces a total discharge (\\(Q_{tot}\\)) composed of a run-off flow (\\(Q_r\\)), an interflow (\\(Q_u\\)) and a baseflow (\\(Q_l\\)).\n\n\n\nGR4J - This object is based on the GR4J model, containing 4 parameters. Using an equivalent precipitation (\\(P_{eq}\\)) and a potential evapotransipration (\\(ETP\\)) as inputs, an outflow is calculated.\n\n\n\nSAC - The SAC-SMA (Sacramento-Soil Moisture Account) object uses an equivalent precipitation (\\(P_{eq}\\)) and a potential evapotranspiration (\\(ETP\\)) as inputs and provides an outflow at the outlet of the sub-basin.\n\n\n\nSCS - The SCS (Soil Conservation Service) object focuses on specific events modelling mainly for small watersheds. It is a simplified procedure for assessing an event hydrograph using limited input data (precipitation)."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_rivers",
    "href": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_rivers",
    "title": "1  Rainfall-runoff modelling",
    "section": "1.2 Rivers",
    "text": "1.2 Rivers\nDifferent Rivers objects are proposed by RS MINERVE:\n\n\n\n\n\n\n\n\nLag-Time - The Lag-Time river calculates a river transition based on a lag-time but does not produce any attenuation of the flow.\n\n\n\nKinematic Wave - The flow is transferred based on the Kinematic wave equations.\n\n\n\nMuskingum-Cunge - The flow is transferred based on the Muskingum-Cunge (1969, 1991) equations.\n\n\n\nSt-Venant - The flow is transferred based on the St-Venant equations."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_standard",
    "href": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_standard",
    "title": "1  Rainfall-runoff modelling",
    "section": "1.3 Standard",
    "text": "1.3 Standard\nThe Standard objects are complementary but generally necessary for feeding, structuring and calibrating the model.\n\n\n\n\n\n\n\n\nJunction - This object allows calculating the addition of different flow inputs (also coming from hydraulic infrastructures).\n\n\n\nTime series - Data can be provided to the model as time series (time in seconds). Data of any type (Flow, Temperature, Precipitation, ETP,…) can be directly transferred to other objects.\n\n\n\nSource - Data can be also loaded from a database. Sources are mostly used to define flow time series for turbine or pump flow and as reference flow for calibration (with a Comparator object).\n\n\n\nComparator - This object is used to compare the results of a simulation with a reference data coming from another object, generally a Source. Both objects are connected to the Comparator for results comparison.\n\n\n\nSubmodel - A combination of objects can be saved as a submodel and integrated as such in a model.\n\n\n\nGroup Interface - It allows transferring the input or output variables between different hierarchical levels.\n\n\n\nFor hydraulic infrastructures objects and regulation objects, please refer to Section 2."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_creation_model",
    "href": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_creation_model",
    "title": "1  Rainfall-runoff modelling",
    "section": "1.4 Creation of a hydrological model",
    "text": "1.4 Creation of a hydrological model\nThe steps to create a hydrological model for a natural basin (without hydraulic infrastructures) are presented in this chapter.\nTo create the model\n\nOpen RS MINERVE.\nClick on the type of object to be added (Objects frame, Figure 1). With the pencil, click in the Interface to add the object. Repeat the operation for all objects. If the wrong object is selected in the Objects frame, use the Esc key to cancel.\nSelect Connections in the Editing tools frame (Figure 1) or press the space key to switch, interconnect the objects with blue arrows in the sense of flow and select the variables(s) concerned by the connections in the pop-ups (Figure 1.1).2\nChoose Select in the Editing tools frame or press the space key to switch.\nBy clicking on each object separately,\n\nRename the objects.\nModify their fixed parameters (such as coordinates for the Station and surface for main hydrological objects) in the Parameters frame (Figure 1). See Section A for a complete list of parameters and initial conditions.\nDefine the Zone of each object in the Object frame (Figure 1)3 Use “Tab” to validate the Zone number.\n\n\n\n\n\nFigure 1.1: Example of a simple model\n\n\nTo define the Parameters of the model objects:\n\nClick on  Parameters in the Parameters and Variables frame (Figure 1).\nSelect an Object type and a Zone Id in the Selection frame (Figure 1.2). Use Ctrl to select more than one Zone ID.\nIn the Parameters management frame (Figure 1.3, left), the parameters of the selected object type are listed. Parameters with identical value in all objects of the selected zone(s) are checked by default. The objects contained in the zone(s) and their respective parameter values are displayed in the Objects list (Figure 1.3, right).\nDefine the parameters to be calibrated, i.e. uniformly modified, by checking and unchecking the parameters in the Parameters management frame (the [x] column, fig-param_management_frame, left).\nModify in the Parameters management frame the values of the Parameters to be calibrated and click on Apply selected changes. (Alternatively, individually modify the values of each object in the Objects list (Figure 1.3, right)).\nRepeat the procedure for all object types in each zone.\n\n\n\n\nFigure 1.2: Selection frame\n\n\n\n\n\nFigure 1.3: Left: Parameters management frame; Right: Objects of the selected zone(s) and their parameters\n\n\nTo define the Initial Conditions:\n\nClick on Initial Conditions in the Parameters and Variables frame (Figure 1).\nProceed in a similar way than for the Parameters definition to modify all the Initial Conditions.\n\nInitial conditions are generally not known precisely. Approximated values can be entered to improve the simulation results. Final conditions of a previous simulation ending at the start time of the period of interest can be used as current initial conditions to improve the results.\nTo save the project:\n\nClick on Save in the Project frame (Figure 1).\nDefine the file name and save."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_export_submodel",
    "href": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_export_submodel",
    "title": "1  Rainfall-runoff modelling",
    "section": "1.5 Exportation of a submodel",
    "text": "1.5 Exportation of a submodel\nCombinations of objects can be exported and later imported as Submodel objects in a complete model. This allows the structuration of the model by organizing it in different hierarchical levels.\n\nAdd a Group Interface to the combination of objects to be exported.4\nLink the output object of the model (Junction in Figure 1.4) to the Group Interface. Select the link(s) to be created in the pop-up (Flow in the example of Figure 1.4).5\nExport the active model with the  Export button in the Model frame (Figure 1).6\nCreate a new project with the New button in the Project frame.7\nImport the Submodel with the  Import button in the Model frame.\nOpen the  Submodel with a right-click on it. The model previously created appears.\nReturn to the upper hierarchical level with the  Back button (Model frame) or by pressing the Esc button.\nAdd a Junction object and link the Submodel to the new Junction (Figure 1.5). In the example of Figure 1.5, the flow of the new Junction now corresponds to the flow of the Junction in the Submodel.\n\n\n\n\nFigure 1.4: Addition of a Group Interface to the combination of objects to be exported as submodel\n\n\n\n\n\nFigure 1.5: Link the Submodel to a Junction\n\n\nAt the same time, if a Submodel receives also an input from upstream, a second Group Interface has to be added in the Submodel and linked to the object receiving the incoming variables. Group Interfaces can support more than one variable as input and/or as output.\nSubmodels can also be created by adding an empty  Submodel object8 and then adding the adequate objects in the Submodel (opened with a right-click). In a similar way, objects can be added to or deleted from imported Submodels.\nModifying the Zone of a Submodel modifies the zone of all the objects contained in the Submodel."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_model_conversion",
    "href": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_model_conversion",
    "title": "1  Rainfall-runoff modelling",
    "section": "1.6 Model conversion",
    "text": "1.6 Model conversion\nThe conversion between different hydrological models is possible with the button “Converter” of the Model Properties frame (Figure 1.6).\n\n\n\nFigure 1.6: Model properties frame\n\n\nThe model conversion is direct for all hydrological model as presented in Figure 1.10. For achieving the conversion, initial and final hydrological model types are selected. Then, the zone(s) and the object(s) to convert are chosen (Figure 1.7).\nIn the current version, only the parameter \\(A\\) (Surface) is transferred to the new model. All other parameters are fixed to the by default values of each model.\n\n\n\nFigure 1.7: Example of a conversion between HBV and SOCONT\n\n\nIf the converted model does not need all inputs, a message informs that one of the inputs is deleted, as presented in Figure 1.8 for the input Temperature.\n\n\n\nFigure 1.8: Example of a conversion between a model HBV and SAC, where the input Temperature is deleted\n\n\nFinally, if the converted model needs more inputs than the original one, a message informs that one or several inputs need to be added, as presented in Figure 1.9 for the input Temperature. In that case, this/these input(s) is/are added between the station and the model (If the data comes from several Stations or Time Series, the user needs to link himself and to select the correct inputs among all possibilities).\n\n\n\nFigure 1.9: Example of a conversion between a model SAC and HBV, where the input Temperature has to be implemented by the user\n\n\nRegarding the outputs, the total discharge (\\(Qtot\\) or \\(Q\\) depending on the model) is directly linked to the downstream object after the conversion.\nIf any other discharge is linked downstream, e.g. the \\(Qr\\) in the SOCONT model to a junction, the link is deleted after conversion.\n\n\n\nFigure 1.10: Conversions between objects"
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_subbasin_param",
    "href": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_subbasin_param",
    "title": "1  Rainfall-runoff modelling",
    "section": "1.7 Single sub-basin parametrization",
    "text": "1.7 Single sub-basin parametrization\nThe parametrization (or calibration) process aims to progressively improve the model to fit the simulated data to the reference data (e.g. the observations) by iteratively adjusting the object’s parameters.\nTo proceed to the optimal parametrization (or calibration), observed data are required as comparison basis for the simulated data. Sites of measure stations generally define outlets of sub-basins since they represent the location of comparison (simulated data vs. observed data).9\nFor simplicity, division into zones generally respects the sub-basin’s division. However, this is not compulsory and a zone can correspond to several sub-basins or one sub-basin can be divided into several zones. In this subchapter, it is assumed that the sub-basin is composed of a single zone.\n\nModel’s performance evaluation\nBefore adjusting the parameters, the current performance of the model is evaluated.\n\nClick on the  Comparator object which has been added and connected as presented in Figure 1.1.\nIn the Series frame (Figure 1.11), select \\(Q_{reference}\\) and \\(Q_{simulation}\\) (use Ctrl to select both).\nVisualize the actual results:\n\nIn the Series frame, both curves are plotted together under Graphs.\nIn the Comparator frame, seven performance indicators are provided (read the Technical Manual for more information).\n\nNash coefficient\nNash-ln coefficient\nPearson Correlation Coefficient\nKling-Gupta Efficiency\nBias Score\nRelative Root Mean Square Error\nRelative Volume Bias\nNormalized Peak Error\n\n\n\n\n\nManual parameters adjustment\nBased on the current model’s performance, object’s parameters can be adjusted to improve the next run’s performance.\n\nClick on Parameters in the Parameters and variables frame (Figure 1.11).\nSelect in the Selection frame (Figure 1.11) the type of object to be modified and the corresponding zone.\nModify the selection (checks) of parameters in the Parameters Management frame to select only the ones to be calibrated (i.e. to be uniformly modified).\nModify the values of the selected parameters and click on Apply selected changes. Parameters are modified in the listed objects.\nProceed in a similar way for all object types.\nModify also the initial conditions to fit better the reference data.\nAfter running the model, analyze the results in the comparator and modify again the parameters when necessary.\n\n\n\n\nFigure 1.11: Frames used for the parametrization\n\n\nThe procedure is iterative until the simulation results are considered sufficiently satisfying for a specified zone.\nParameters and Initial conditions can be exported to be, later, imported again. Use Export P and Import P for the parameters and Export IC and Import IC for the initial conditions in the Parameters and variables frame (Figure 1.11). The parameters or initial conditions can be saved as .txt file or also as .xlsx file with one sheet per object type.\n\n\nAutomatic parameters adjustment\nAn automatic calibration can be also achieved thanks to a specific tool developed in the Expert module. Please the Section 6.1 for more information."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_basin_param",
    "href": "user_rainfall_runoff_modelling.html#sec-user_rainfall_runoff_basin_param",
    "title": "1  Rainfall-runoff modelling",
    "section": "1.8 Complete basin parametrization",
    "text": "1.8 Complete basin parametrization\nWhen a basin is composed of many sub-basins, the parametrization has to be progressively achieved from upstream to downstream in the basin. By proceeding as such, contributions from the upstream calibrated sub-basin(s) are considered as input(s) to the downstream sub-basin on which the parametrization is performed. Parameters are modified for the concerned sub-basin to obtain the best possible results at the outlet of the sub-basin. The calibration module (Section 6.1) can realize multiple parametrizations for calibrating these complex basins from upstream to downstream.\nDepending on the quality of the simulation results, inputs from upstream sub-basins can be replaced in the parametrization process by observed data at the entrance of the sub-basin being calibrated."
  },
  {
    "objectID": "user_rainfall_runoff_modelling.html#references",
    "href": "user_rainfall_runoff_modelling.html#references",
    "title": "1  Rainfall-runoff modelling",
    "section": "References",
    "text": "References\n\n\n\n\nBergström, Sten. 1976. “Development and Application of a Conceptual Runoff Model for Scandinavian Catchments.” {SMHI} {Reports} RH No. 7. Norrköping, Sweden: SMHI, Research Department, Hydrology.\n\n\n———. 1992. “The HBV Model - Its Structure and Applications.” {SMHI} {Reports} RH No. 4. Norrköping, Sweden: SMHI, Research Department, Hydrology.\n\n\nBérod, D. 1994. “Contribution à l’estimation Des Crues Rares à l’aide de Méthodes Déterministes. Apport de La Description Géomorphologique Pour La Simulation Des Processus d’écoulement.” {PhD} {Thesis} {N}°1319, Lausanne, Switzerland: Ecole Polytechnique Fédérale de Lausanne, EPFL.\n\n\nBurnash, R. J. C. 1995. “The NWS River Forecast System - Catchment Modeling.” In Computer Models of Watershed Hydrology, 311–66. Water Resources Publication. Colorado, USA: Singh, V. https://eurekamag.com/research/002/978/002978211.php.\n\n\nCunge, J. A. 1969. “On The Subject Of A Flood Propagation Computation Method (Musklngum Method).” Journal of Hydraulic Research 7 (2): 205–30. https://doi.org/10.1080/00221686909500264.\n\n\n———. 1991. “Polycopié Simulation Des Écoulements Non-Permanents Dans Les Rivières Et Canaux.” Institut National Polytechnique de Grenoble, Ecole Nationale Supérieure d’Hydraulique et de Mécanique de Grenoble.\n\n\nHamdi, Y., B. Hingray, and A. Musy. 2003. “Projet MINERVE, Rapport Intermédiaire Nº1 Volet B: Modélisation Hydrologique.” Technical {Report}. Laboratoire de Constructions Hydrauliques, Ecole Polytechnique Fédérale de Lausanne.\n\n\nHamdi, Y, B Hingray, and A Musy. 2005. “Un Modèle de Prévision Hydro-Météorologique Pour Les Crues Du Rhône Supérieur En Suisse.” Wasser, Energie and Luft, 325–32.\n\n\nMcGuinness, J. L., and Erich F. Bordne. 1972. “A Comparison of Lysimeter-Derived Potential Evapotranspiration With Computed Values.” Technical {Bulletins} 171893. United States Department of Agriculture, Economic Research Service. https://EconPapers.repec.org/RePEc:ags:uerstb:171893.\n\n\nOudin, L. 2004. “Recherche d’un Modèle d’évapotranspiration Potentielle Pertinent Comme Entrée d’un Modèle Pluie-Débit Global.” {PhD} {Thesis}, Ecole Nationale du Génie Rural, des Eaux et des Forêts, Paris.\n\n\nPerrin, Charles, Claude Michel, and Vazken Andréassian. 2003. “Improvement of a Parsimonious Model for Streamflow Simulation.” Journal of Hydrology 279 (1-4): 275–89. https://doi.org/10.1016/S0022-1694(03)00225-7.\n\n\nSchaefli, B., B. Hingray, M. Niggli, and A. Musy. 2005. “A Conceptual Glacio-Hydrological Model for High Mountainous Catchments.” Hydrology and Earth System Sciences 9 (1/2): 95–109. https://doi.org/10.5194/hess-9-95-2005.\n\n\nTurc, L. 1955. “Le Bilan d’eau Des Sols : Relations Entre Les Précipitations, l’évaporation Et l’écoulement.” In Pluie, Évaporation, Filtration Et Écoulement. Compte Rendu Des Troisièmes Journées de l’hydraulique, Alger, 12-14 Avril 1954. Tome 1, 1955. Journées de l’hydraulique. https://www.persee.fr/doc/jhydr_0000-0001_1955_act_3_1_3278.\n\n\n———. 1961. “Evaluation Des Besoins En Eau d’irrigation, Formule Climatique Simplifiée Et Mise à Jour.” Annales Agronomiques, 13–49."
  },
  {
    "objectID": "user_hydraulic_infrastructures.html",
    "href": "user_hydraulic_infrastructures.html",
    "title": "2  Hydraulic infrastructures modelling",
    "section": "",
    "text": "Section 1 presents the different steps to create a hydrological model without any hydraulic infrastructures. This Section 2 explains how infrastructures like reservoirs, turbines or spillways are implemented in RS MINERVE.\nHydraulic infrastructures are listed in Section 2.1, and objects used for automatic regulation are presented in Section 2.2 and Section 2.3."
  },
  {
    "objectID": "user_hydraulic_infrastructures.html#sec-user_hydraulic_infrastructures_list",
    "href": "user_hydraulic_infrastructures.html#sec-user_hydraulic_infrastructures_list",
    "title": "2  Hydraulic infrastructures modelling",
    "section": "2.1 Infrastructures",
    "text": "2.1 Infrastructures\n\n\n\n\n\n\n\n\nReservoir - Water level and volume evolution are simulated based on a “Level-Volume” relation and an initialreservoir level.\n\n\n\nHQ - Based on a level-discharge relation, it allows integration of level-based outflows to reservoirs (such as spillways, gates, orifices,…).\n\n\n\nTurbine - It calculates the turbine or pump flow from a reservoir, based on a Wanted Discharge defined in the same object by a time-discharge series.\n\n\n\nTurbineDB - The TurbineDB object works as the Turbine object but is directly based on data provided by the database. It is equivalent to the combination of a turbine and a source.\n\n\n\nHydropower - This object calculates the power and the revenue, normally produced by a turbine, depending on the discharge and on the reservoir level.\n\n\n\nDiversion - This object is used to simulate the separation of flow based on an “Inflow - Diverted flow” relation. It can be used as a hydrological object but is mostly used as a hydraulic function.\n\n\n\nConsumer - This object simulates the consumed dischargeof a user (e.g.: a village or an agricultural field) based on a series from a database or from a uniform demand.\n\n\n\nStructure efficiency - This object computes effects of discharge losses in a structure like a canal or a pipe based on an efficiency coefficient.\n\n\n\nPlanner - This is a control system consisting of the definition of a set of management rules, based on conditions. This object allows you to manage the regulation of reservoirs, turbines, bottom outlets, etc."
  },
  {
    "objectID": "user_hydraulic_infrastructures.html#sec-user_hydraulic_infrastructures_hydropower",
    "href": "user_hydraulic_infrastructures.html#sec-user_hydraulic_infrastructures_hydropower",
    "title": "2  Hydraulic infrastructures modelling",
    "section": "2.2 Addition of a Hydropower scheme",
    "text": "2.2 Addition of a Hydropower scheme\nThis chapter presents a general example for the construction of a hydropower scheme, including a reservoir with a hydropower plant, a turbine and a spillway.\n\nAddition of a reservoir\nTo add a reservoir:\n\nSelect the object Reservoir in the Infrastructures objects frame (Figure 2.1) and add it in the Interface.\nLink the output of the upstream sub-basin (object Junction in Figure 2.1) to the Reservoir.\n\n\n\n\nFigure 2.1: A regular model with a reservoir\n\n\n\nDouble-click on the Reservoir object. The Reservoir, Series and Initial Conditions frames are opened (Figure 2.1).\nIn the Series frame, select the H-V series and open the Values tab.\nBy default, the table is empty. Insert the corresponding Height-Volume (H-V) relation for the reservoir.\nDefine an initial water elevation (\\(HIni\\)) in the Initial conditions frame.\n\nAlternatively to the last point to define the initial water elevation of the Reservoir, a time series can be saved in the database with a sensor of Category Altitude and Unit masl. For each simulation, RS MINERVE will then search and interpolate the initial condition from the added time series. To link the Reservoir with the sensor, first select in the Data Source frame the corresponding Group and Dataset.\nThen, in the Reservoir frame (right part), click on the  Select station from Database button and define the correct station in the Station drop-down list (only stations containing a sensor with appropriate units are listed). The value in the Initial conditions frame will change after every simulation to the value interpolated from the time series.\nOnce a reservoir is implemented, outputs of the reservoir have to be defined. Water from a reservoir can be exited through different ways. A combination of Turbine (or TurbineDB) and Hydropower objects are used to simulate the use of water for hydropower production. Regulations are generally used to automatize the operation of Turbine and TurbineDB objects. Finally, HQ objects generate discharges based on elevation-discharge relations.1\nAll these objects can be used independently and cumulatively. For example, several turbines can be placed in parallel with one or several TurbineDB(s), HQ object(s) and/or Regulation(s). None of them is imperative.\n\n\nAddition of a TurbineDB object\nThe TurbineDB object is based on data from a database. Thus, before adding a TurbineDB, data have to be added to the database\n\nOpen a database (see Section 3) and create a station with a sensor of category Flow. Modify the description and insert data for the TurbineDB outflow in the Values tab.\n\nThe TurbineDB object is then added.\n\nSelect the object TurbineDB in the Structures objects frame (Figure 2.1) and add it in the Interface. Add also a Junction to which outflow(s) from the Reservoir will be linked to.\nSwitch to Connections (Editing Tools frame \\(\\rightarrow\\) Connections or use the space key) and link the Reservoir to the TurbineDB object and the TurbineDB object to the Junction (Figure 2.2).\n\n\n\n\nFigure 2.2: Addition of a TurbineDB and a junction\n\n\n\nIn the Data Source frame (Figure 2.1), select for the line HPP 2 the Group and DataSet corresponding to the sensor created in the database.\nDouble-click on the TurbineDB object to open the TurbineDB frame (right-side). Then, click on the  Select station from Database button and define the corresponding station in the Station drop-down list. The link between the TurbineDB object and the database is now operational.\nIn the Parameters frame (Figure 2.3), user can define the reservoir water altitude to start (\\(H_{on}\\)) or stop (\\(H_{off}\\)) the turbine. If the value is equal to zero, the turbine operation will be independent of the reservoir altitude.\nIn the Initial conditions frame (Figure 2.3), user must define the initial turbine status when the water altitude is initially between \\(H_{on}\\) and \\(H_{off}\\). ‘Zero’ (0) means starting the simulation with the turbine OFF and ‘one’ (1) means starting with the turbine ON.\n\nOnce these parameters specified, the TurbineDB object is ready for use.\n\n\n\nFigure 2.3: Parameters and initial conditions of turbine\n\n\n \n\n\n\nFigure 2.4: Example of turbine operation\n\n\n\n\nAddition of a Hydropower object\nThe Hydropower object calculates the power and the revenue produced by the discharge of the turbine from the reservoir. The results depend on the discharge and on the reservoir water level.\n\nSelect the object Hydropower in the Structures objects frame (Figure 2.1) and add it in the Interface (Figure 2.5).\n\n\n\n\nFigure 2.5: Addition of a Hydropower object\n\n\nAs the power produced in the hydropower plant depends on the water level in the reservoir and on the discharge of the turbine, these two variables (water level and discharge) must be transferred to the Hydropower object as follows (Figure 2.6):\n\nLink the TurbineDB to the Hydropower object so the discharge variable can be transferred to the Hydropower object.\nThe water level information will be automatically transferred from the Reservoir to the Hydropower object through the TurbineDB object.\n\n\n\n\nFigure 2.6: Links between the Hydropower object and the Reservoir and TurbineDB information\n\n\n\nDouble-click on the Hydropower object to open its frame (right-side). Then, click on the  Select station from Database button and define the corresponding station which contains the Electricity price series in the Station drop-down list. The link between the Hydropower object and the database is now operational.\nIn the Series frame, select the \\(Q-\\eta\\) (discharge-efficiency) series and open the Values tab. Insert data for the \\(Q-\\eta\\) relation (manually or copied from a spreadsheet).\nIn the Parameters frame, introduce the features of the hydropower plant. In particular the following parameters must be specified: the hydropower plant altitude (\\(Zcentral\\)) in masl; the length of the pipe (\\(L\\)) in m; the diameter of the pipe (\\(D\\)) in m; the Roughness (\\(K\\)) in m; the kinematic viscosity (\\(\\nu\\)) in m2/s; and the default price of electricity, only used if no data exists in the database.\n\nThe Hydropower object is ready for use.\n\n\nAddition of an HQ object\nHQ objects are used to define level-discharge relations to implement structures such as spillways, orifices or sluice gates. For illustration purpose, an HQ object is used as a spillway in the following procedure.\n\nSelect the HQ object in the Structures objects frame (Figure 2.1) and add it in the Interface.\nLink the Reservoir to the HQ object and the HQ object to the Junction (Figure 2.7).\n\n\n\n\nFigure 2.7: Addition of a spillway\n\n\n\nDouble-click on the HQ object. In the Series frame, select the H-Q series and open the Values tab. Insert data for the H-Q relation (manually or copied from a spreadsheet).\n\nThe HQ object is ready for use.\n\n\nSimulation with implemented structures\nSeveral structures can be added in parallel as illustrated in Figure 2.7. When all objects are created, the model linked to the database and validated, start the simulation (Section 5.1). Discharges through the different objects can then be visualized by clicking on each object (Section 5.1) or within the Selection and Plots module (Section 5.2).\nIt is important to remember that discharges generated by HQ objects are defined by the water level in the reservoir. Below a certain level, no discharge is produced. This is not the case of the TurbineDB objects that withdraws from the reservoir the discharges defined in the database, without checking if water is available or not in the reservoir. This might result in a negative volume in the reservoir (a warning is generated in the Simulation report). In order to generate discharges only when the water is actually available, Regulation objects are necessary."
  },
  {
    "objectID": "user_hydraulic_infrastructures.html#sec-user_hydraulic_infrastructures_planner",
    "href": "user_hydraulic_infrastructures.html#sec-user_hydraulic_infrastructures_planner",
    "title": "2  Hydraulic infrastructures modelling",
    "section": "2.3 Implementation of a planner",
    "text": "2.3 Implementation of a planner\nThe planner object represents a control system that allows the definition of a set of management rules based on conditions. This object allows regulating the operation of reservoirs, turbines and hydropower models in RS MINERVE.\nEach rule is defined using one or more conditions (that can be combined), temporary restrictions (specific dates, hours, days of the week, or months of the year) and an expected output. The conditions and the temporary restrictions define the rule to be applied (and corresponding output). The input values for the conditions can be defined in different ways: directly taken from the variable of some object of the full model (e.g., a specific reservoir), its own input or depending on the state of another rule defined in the same planner. The output can be generated from a predefined series of values, through the database, as one of the three possible inputs of the planner object or by setting a specific value. Furthermore, the output values can be modified by applying a multiplier and/or additive coefficient(s). A planner can be connected from all objects and to all objects except to stations, time series and sources (Figure 2.8).\nOnce we have simulated the model, the planner shows at what times each defined rule has been applied. With all these options, the planner object is an efficient tool for managing complex systems.\n\n\n\nFigure 2.8: Inputs and outputs for a Planner object\n\n\n\nPlanner\nThe first part of the Planner window (right frame) shows basic information about the object (Figure 2.9).\n\n\n\nFigure 2.9: Planner object principal window\n\n\nTo know if the planner is correctly connected in the model, the exclamation mark should be green; if it is not, the exclamation mark will be orange and the object will be isolated and not calculated (Figure 2.10). In that case, it will indicate what part of the planner element is not correctly defined.\n\n\n\nFigure 2.10: Planner section\n\n\n\nClick on the blue circular arrow (“Clear variable”) to reset inputs information after connections are removed.\n\nFigure 2.11 shows an example with one Input (\\(Altitude\\)) and two outputs (\\(Qdown1\\), \\(Qdown2\\)):\n\n\n\nFigure 2.11: Planner section example\n\n\n\n\nOutputs\nThe second part allows the user to add or delete outputs for the object (Figure 2.12). The number of outputs for a planner object is not limited.\n\n\n\nFigure 2.12: Planner Outputs section\n\n\n\nTo add a new output, choose the category and then push the “Add new output” button (green cross).\nTo delete an output, choose the output and push the “Delete output” button (red cross).\n\n\n\nSeries\nThe third part shows the series that can be used by the planner object (Figure 2.13). The user can define new series linking different variable types. It’s also possible to delete the existing series. As in the output section, the number of series for one planner object is not limited.\n\n\n\nFigure 2.13: Planner Series section\n\n\n\nTo add a new series, choose the category and select the independent variable, then push the “Add new series” button (green cross).\nTo delete a series, choose it and push the “Delete series” button (red cross).\n\n\n\nRules\nThe fourth part shows basic information about the rules for the management of the object (Figure 2.14). This part is divided into four sections: Conditions, Time, Output generation and Initial rule state. The rules’ listing in the table defines the order in which those rules will be applied.\n\n\n\nFigure 2.14: Planner Rules section\n\n\n\nTo move the rule in the table you can use the up and down arrows.\n\nExample is shown in Figure 2.15. It shows summary information about the rules.\n\n\n\nFigure 2.15: Rules section example\n\n\nIn the Conditions section, the user can define stand-alone or combined conditions (Figure 2.16). To define the condition, it’s possible to use the planner’s inputs, the results of any object or the states of other rules (Figure 2.17). The “always satisfied” option allows defining a condition as always true.\n\n\n\nFigure 2.16: Conditions (Rules) section\n\n\n\n\n\nFigure 2.17: Example of stand-alone and combined conditions\n\n\n\nOnce one or more rules are defined, the user can create combined conditions using operators between conditions (AND, OR …).\n\n \n\nThe number of conditions is not limited.\n\nFigure 2.18 shows an example, with some stand-alone conditions and combined conditions. At the end, it shows summarize information about the combined conditions (violet, as a simplified expression with names, and blue as expanded expression with descriptions).\n\n\n\nFigure 2.18: Conditions (Rules) section example\n\n\nIn the Time section, the user can define a time schedule to turn on or off the rule depending on the time (Figure 2.19).\n\n\n\nFigure 2.19: Time (Rules) section\n\n\nFigure 2.20 shows an example with a schedule to start and stop the rules.\n\n\n\nFigure 2.20: Time (Rules) section example\n\n\nIn the Output generation section, the user can define how to create the output (Figure 2.21).\n\n\n\nFigure 2.21: Output generation (Rules) section\n\n\nAn example is shown in Figure 2.22 with a specific value (19 m3/s) for the output (Qdown1).\n\n\n\nFigure 2.22: Output generation (Rules) section example\n\n\nIn the last section, Initial Rule State, the user can define the initial rule state for the planner object at the beginning of the simulation (Figure 2.23).\n\n\n\nFigure 2.23: Initial Rule State (Rules) section\n\n\n\nSimulation with the planner implemented\nOnce the planner object is properly implemented, the user can start the simulation. Results can be visualized by double-clicking on the object or by using the Selection and Plots module (Figure 2.24).\n\n\n\nFigure 2.24: A complete example of a model with planner objects"
  },
  {
    "objectID": "user_database.html",
    "href": "user_database.html",
    "title": "3  Database",
    "section": "",
    "text": "The different input data as well as exported results are managed within a database. The Database tab is used to create or edit the database linked to the active model."
  },
  {
    "objectID": "user_database.html#the-database-tab",
    "href": "user_database.html#the-database-tab",
    "title": "3  Database",
    "section": "3.1 The Database tab",
    "text": "3.1 The Database tab\nThe Database tab appears when a database is created ( New) or opened for edition (  Open and then  Edit).\n\n\n\nFigure 3.1: The Database tab\n\n\nThe database structure is organized in five hierarchical levels, listed hereafter.\n\nDatabase Description of the database, complete set of data\n\nGroup Separation based on category of data (Measures, Forecasts, Simulations,…)1\n\nDataset Set of data of common type (Meteo data, Flow data,…)\n\nStation Information about the station (name and coordinates)\n\nSensor Description of the sensor (name, units and data)"
  },
  {
    "objectID": "user_database.html#creation-of-a-database",
    "href": "user_database.html#creation-of-a-database",
    "title": "3  Database",
    "section": "3.2 Creation of a database",
    "text": "3.2 Creation of a database\nThe creation of a new database can be achieved following next steps:\n\nClick on  New in the Database frame (Figure 1) and save the new database. The Database tab is opened (Figure 3.1).\nCreate the components of the different hierarchical levels of your database by using the  Add button (Edition frame).\nFor the stations, give an adequate name and enter the coordinates.\nFor each sensor:\n\nDefine the Description (name), Category, Unit and Interpolation method.\nSelect the “Values” tab and add the data with the  Paste button (after copying them from any spreadsheet program).\n\nSave the database.\n\nThe data can be managed (exported or imported) as database or as dataset.\nTo manage a database, proceed as follows:\n\nTo save a database: Click on the Database component \\(\\rightarrow\\) File database \\(\\rightarrow\\) Save as.\nTo load another database: Remove the current database and click on  Open in the Database frame to open the new database.\n\nTo manage a dataset, perform as follows:\n\nTo export a dataset: Click on the Dataset component \\(\\rightarrow\\) File Dataset \\(\\rightarrow\\) Save\nTo import a dataset: Click on a Group component \\(\\rightarrow\\) File Dataset \\(\\rightarrow\\) Import\n\nIf a dataset contained in a database is also stored separetely as a dataset (not only in the database), both have to be saved (File database \\(\\rightarrow\\) Save; File dataset \\(\\rightarrow\\) Save) to properly modify all the files!"
  },
  {
    "objectID": "user_database.html#data-format",
    "href": "user_database.html#data-format",
    "title": "3  Database",
    "section": "3.3 Data format",
    "text": "3.3 Data format\nFor copying series values in a sensor, two columns are necessary. The first column contains the data in one of these formats:\n\ndd.mm.yyyy\ndd.mm.yyyy hh:mm\ndd.mm.yyyy hh:mm:ss\n\nThe second column contains the values of the series (example in Figure 3.2).\n\n\n\nFigure 3.2: Example of data format to use in the sensors"
  },
  {
    "objectID": "user_database.html#connection-of-a-database-to-a-model",
    "href": "user_database.html#connection-of-a-database-to-a-model",
    "title": "3  Database",
    "section": "3.4 Connection of a database to a model",
    "text": "3.4 Connection of a database to a model\nOnce the database is created, links between the model and the database have to be implemented. The Data source frame (Figure 3.3, left), located in the main interface and available only when a database is opened, is used for this purpose.\n\nDefine for the Station and the Source the corresponding Group and DataSet.\nFor the Source objects, define in the Object description frame the correct station under the  Select from database button (Figure 3.3, right).2\n\nThe name of the station appears under Station identifier and is stored in the model when the model is saved.\n\n\n\nFigure 3.3: Left: The Data Source frame; Right: Definition of the station for objects Source\n\n\n\nInteraction between the database and the active model\nModifications of the database in Database tab (without saving them!) are taken into account during simulations of the active model. However, when the database is closed, only saved changes will be applied to the database. Therefore, proper saving of the modifications is recommended."
  },
  {
    "objectID": "user_gis.html",
    "href": "user_gis.html",
    "title": "4  GIS",
    "section": "",
    "text": "The GIS module allows the user to manage and process geospatial data. In this chapter, the GIS interface and its different tools are presented."
  },
  {
    "objectID": "user_gis.html#gis-interface",
    "href": "user_gis.html#gis-interface",
    "title": "4  GIS",
    "section": "4.1 GIS interface",
    "text": "4.1 GIS interface\nTo start GIS:\n\nClick on GIS section in the main frame (Figure 1). The GIS tab is shown in Figure 4.1.\n\n\n\n\nFigure 4.1: Interface of the GIS tool"
  },
  {
    "objectID": "user_gis.html#gis-commands",
    "href": "user_gis.html#gis-commands",
    "title": "4  GIS",
    "section": "4.2 GIS Commands",
    "text": "4.2 GIS Commands\n\nImportation of new layers\nTo add geospatial data in the GIS Interface,\n\nClick on the Add layers button in the GIS Commands tab (Figure 4.1).\nMove up/down the different layers and use the check boxes to display or not the layers.\n\n\n\n\n\n\n\nImportant\n\n\n\nThe file path of the shapefile is added to the hydrological model (.rsm) , not the whole shapefile.\n\n\n\n\nTools for interaction in the interface\n\n\n\n\n\n\n\n\nSelect features by rectangle\n\n\n\nPan\n\n\n\nZoom in\n\n\n\nZoom out\n\n\n\nZoom to layer extent\n\n\n\nZoom to global extent\n\n\n\nView attribute table of selected layer\n\n\n\nView information on selected feature"
  },
  {
    "objectID": "user_gis.html#automatic-model-creation",
    "href": "user_gis.html#automatic-model-creation",
    "title": "4  GIS",
    "section": "4.3 Automatic Model Creation",
    "text": "4.3 Automatic Model Creation\nThe Creation tool in the Model Management frame automatizes the creation of hydrological models based on the GIS layers where the hydrological objects, the confluences and their links are defined. This tool connects the objects (which represent the different subbasins) with their corresponding downstream junctions (that represent the outlets of each subbasin); theses junctions with the downstream rivers that transport the discharges generated in the subbasins; and finally these rivers with the outlet downstream junctions.\nThe structure of the GIS layers has to be edited under the following format:\n\nThe subbasins layer must contain an attribute column with the ID of the downstream junctions (the outlets of each subbasin).\nThe junctions layer must contain an attribute column with the ID of the downstream rivers that will transport the discharges. Also, one of the attribute columns must correspond with the ID indicated in the subbasins and the rivers layers.\nThe rivers layer must contain an attribute column with the ID of the downstream outlet junctions.\n\nOnce the different layers have been added to the interface, it is possible to use Creation:\n\nClick Creation in the Model Management frame.\n\nA Configuration area with three parts –Subbasins, Junctions and Rivers– as well as an attribute table (for the selected layer) should appear below the GIS interface (Figure 4.2).\n\nIn the Subbasins part, select the name of the layer that contains the subbasins information (Layer name), the attribute that contains the basins name (Basins name) and the ID of the downstream junctions to be linked to the subbasins (Junctions ID). You can create submodels based on Basins ID, by choosing the corresponding ID field.\nIn the Junctions part, select the name of the layer that contains the junctions information (Layer name), the attribute that contains the junctions name (Junctions name), the ID field of the junctions that will be linked to the downstream rivers (Junctions ID), and the ID field of the rivers that will be linked (Rivers ID).\nIf you want to create river sections, choose the option in the Rivers part (Create rivers), select the name of the layer that contains the rivers information (Layer name), the attribute that contains the rivers name (Rivers name), the ID field of the rivers that will be linked to the downstream junctions (Rivers ID), and the ID field of the downstream junctions that will be linked (Junctions ID).\nIn the Allocate SubBasins Type, select the different subbasins entities aggregated per type by holding Ctrl while clicking (Step 5 in Figure 4.2). Choose the type of object to create (like SOCONT or GSM) and click Allocate Subbasins.\nIn the Allocate Rivers Type, select the different rivers entities aggregated per type by holding Ctrl while clicking (Step 6 in Figure 4.2). Choose the type of object to create (like Kinematic Wave) and click Allocate Rivers.\nClick Create Model to create all the objects and their links defined in the GIS layers.\n\n\n\n\nFigure 4.2: Model Creation interface in the GIS\n\n\n\n\n\n\n\n\nImportant\n\n\n\nThe Creation tool defines automatically the parameters \\(Surface\\), \\(X\\) and \\(Y\\) of the objects; the definition of the \\(Z\\) parameter is optional using the option Altitude (Z). For the definition of the rest of parameters, please use the Edition tool.\n\n\nIf you use the default layers names, the program will load automatically the specific fields. The names are shown in Figure 4.3.\n\n\n\nFigure 4.3: Default layers names to autofill fields"
  },
  {
    "objectID": "user_gis.html#model-edition",
    "href": "user_gis.html#model-edition",
    "title": "4  GIS",
    "section": "4.4 Model Edition",
    "text": "4.4 Model Edition\nWith the Edition tool in the Model Management frame, the user can manually edit existing objects and links, create new ones, or remove some of them.\nOnce the GIS layers have been added and/or the hydrological objects have been created,\n\nSelect the layer on the left side of the GIS tab.\nClick Edition in the Model Management frame.\n\nAn attribute table (for the selected entities) as well as an action area with three tabs should appear below the GIS interface (Figure 4.4),\n\nSelect features of the selected layer in order to bring them up in the attribute table (use the Select All button to select all features).\nIn the action area, select in the drop-down menu a Field Name (layer attribute) that should be used to identify features.\n\n\n\n\nFigure 4.4: Model Edition interface in the GIS and its workflow\n\n\nThe three tabs offer you the possibility of the following actions:\n\nCreate Objects: Create model objects from GIS features.\nModel-GIS Links: Link GIS features to existing model objects.\nExport Properties: Export feature properties to properties (parameters) of model objects.\n\n\nCreate Objects\nIn the following example, we are going to generate a sub-model of the subcatchment highlighted in blue in Figure 4.4, which has both normal and glacial elevation bands.\n\nSelect the Create Objects action tab.\nSelect all non-glacial features by holding Ctrl while clicking (Step 3 in Figure 4.4). Using the sorting tool for the attribute table might help to order the objects.\nUnder Type of Object to create, select a non-glacial basin model (like SOCONT).\nPut a check on Also Create Virtual Weather Stations. Now, a virtual weather station will be created for and linked to each created object.\nPut a check on Also link basins to a Junction. Now, all created objects will be linked to a single newly created junction.\nUnder Select Model, select the model in which you wish to place the newly created objects. In our case, this is the parent model.\nPut a check on Create new Submodel and give it a name. Now, a submodel will be created and contain all the newly created objects.\nClick Create Objects.\n\nOnce the creation process is finished, a message is displayed and object icons are displayed next to each of the features, to indicate that the features and the objects have been linked (Figure 4.5).\n\n\n\nFigure 4.5: Object creation process completed\n\n\nWe then create the glacial objects:\n\nSelect glacial features by holding Ctrl while clicking (Step 3 in Figure 4.4).\nUnder Type of Object to create, select a glacial basin model (like GSM).\nPut a check on Also Create Virtual Weather Stations. Now, a virtual weather station will be created for and linked to each created object.\nPut a check on Also link basins to a Junction. Now, all created objects will be linked to another single newly created junction.\nUnder Select Model, select the model in which you wish to place all newly created objects. In our case, this is the model that was previously created.\nRemove the check from Create new Submodel, since we created our submodel in the last step.\nClick Create Objects.\n\nIf we now view the hydraulic submodel that was created we see that all the SOCONT and GSM objects were created and linked to both a junction and a virtual station (Figure 4.6).\n\n\n\nFigure 4.6: Automatically generated objects\n\n\nIt is still necessary to link the junctions to a group interface and define certain properties of the basins (area) and virtual stations (coordinates) in order for the submodel to be complete. In Export Properties, we see how these properties can be exported by bulk from the linked shapefile features.\n\n\nModel-GIS Links\nIt is important that model objects be linked with GIS features for two reasons. First, it allows properties to be efficiently exported from the features to the object (see next section). Second, it allows model simulation results to be viewed in the GIS (see Figure 4.9).\nIn the following, we explain how to remove and create a link between a feature and an existing model object.\n\nLink creation\nTo create a link,\n\nSelect an unlinked feature in the link viewer.\nSelect a model object in the right-hand list.\nClick the link icon situated below the Auto-Link button.\n\n\n\nLink removal\nTo remove a link,\n\nSelect the link you wish to remove in the link viewer on left side of Figure 4.7.\nClick the unlink icon situated below the Auto-Link button.\n\n\n\n\nFigure 4.7: Linking and unlinking elements. Here, the two unlinked elements are ready to be linked\n\n\n\n\nAuto-linking objects\nIf the object names match the Field Name displayed in the link viewer, then you can use the Auto-Link button to match and link the elements automatically.\n\n\n\nExport Properties\nProperties can be exported from a linked feature directly to the basin model or to its associated virtual weather station. There are two properties that you will definitely want to export from the GIS to the hydraulic model: Basin area and the coordinates of the virtual weather station of each basin.\n\n\n\nFigure 4.8: Exporting feature attributes to model objects\n\n\n\nExport pre-calculated feature attributes\nIn order to use a feature attribute as a model parameter value,\n\nSelect a linked pair of elements in the Export Properties tab.\nNavigate to the model parameter that you wish to change, and in the drop-down list, select the attribute of the linked feature that should be used.\n\n\n\nCompute properties from the shapefile\nThe area of a basin, as well as average X and Y coordinates, can be calculated directly from the feature itself instead of using a pre-calculated feature attribute. In order to do that,\n\nSelect a linked pair of elements in the Export Properties tab.\nTo compute the area for the different sub-basins, select Compute Area from Shapefile.\nTo compute the centre of gravity for the virtual weather station, select Compute (X,Y) Coordinates from Shapefile.\n\nThe action can be performed on multiple pairs at the same time, but only pairs of objects of the same type (i.e. only pairs of SOCONT objects). The action cannot be applied to different object types at the same time because different object types have different sets of parameters."
  },
  {
    "objectID": "user_gis.html#hydro-model-visualization",
    "href": "user_gis.html#hydro-model-visualization",
    "title": "4  GIS",
    "section": "4.5 Hydro Model Visualization",
    "text": "4.5 Hydro Model Visualization\nThe Model Visualization module lets you visualize and edit model information from within the GIS interface. There are three tabs for interaction:\n\nObject Info: view and edit model object parameters.\nSolver: run a simulation.\nSpatial View: Change the colours of GIS features based on values from linked objects.\n\n\n\n\n\n\n\nImportant\n\n\n\nShapefile features must be linked to a model object to display information\n\n\n\nSpatial View\nThe Spatial View (Figure 4.9) allows you to visualize results, parameters, or initial conditions at each of the objects.\n\n\n\nFigure 4.9: Hydro Model Visualization: interface workflow in the Spatial View\n\n\nIn order to perform a visualization,\n\nSelect the layer that you wish to visualize. Features from this layer must be linked with model objects.\nSelect the Spatial View tab.\nSelect the object types that you wish to visualize. Multiple selections can be made, but different object types must share a parameter in order to be displayed.\nSelect the parameter type from either Results, Parameters, or Initial Conditions.\nSelect the parameter that you wish to display.\nIf you are viewing simulation results, select the date for which results should be displayed.\nOptional: change color settings.\nClick on Visualize."
  },
  {
    "objectID": "user_gis.html#db-stations-visualization",
    "href": "user_gis.html#db-stations-visualization",
    "title": "4  GIS",
    "section": "4.6 DB Stations Visualization",
    "text": "4.6 DB Stations Visualization\nThe DB Stations Visualization tool allows spatial representation of the stations contained in a database or a dataset.\nThe stations are represented directly in the GIS interface. The coordinates are taken from the X, Y and Z coordinates from the position of the stations.\n\nData requirements\nThe input is composed of a dataset or a database (RS MINERVE format).\n\n\nProcedure\nThe steps to plot in GIS the stations’ location are presented hereafter.\n\nIn GIS, click on the DB Stations Visualization button (Toolbox frame).\nSelect the dataset or the database to be considered.\n\nA new layer of points is created and displayed in the GIS interface (Figure 4.10). The user can posteriorly save the layer.\n\n\n\nFigure 4.10: Visualization of stations location in GIS"
  },
  {
    "objectID": "user_hydro_hydrau_simulation.html",
    "href": "user_hydro_hydrau_simulation.html",
    "title": "5  Hydrological-hydraulic simulation",
    "section": "",
    "text": "Before solving a model, its validity has to be verified.\n\nClick on the  Validation button. A Pre-Simulation report is generated (right-frame).\n\n\nIn case of Fatal error(s): Correct your model consequently. 1\nIn case of Warning(s): Proceed to adequate modifications if required.\nIn case of Note(s): Consider the message(s) and go ahead.\n\n\nIn the Solver window, define the simulation period, simulation time step and recording time step (Figure 5.1).\n\n\n\n\nFigure 5.1: The Solver window\n\n\nThe time interval for the simulation time step and recording time step can be modified accordingly to Table 5.1.\n\n\nTable 5.1: Possible time intervals for simulation and recording time steps\n\n\n\n\n\n\nSimulation time step\nRecording time step\n\n\n\n\n\nSeconds\nMinutes\nHour\nDay\n\n\nSeconds\nMinutes\nHour\nDay\nMonth\n\n\n\n\n\n\nClick on Start. At the end of the computation, a Post-Simulation report (right frame) provides a summary of the simulation with potential warning(s).\nVisualize the obtained results by selecting each object in the Interface and using the Graphs tool in the Object frame (Figure 1). Select the variable(s) of interest in the list (use Ctrl to select more than one series)."
  },
  {
    "objectID": "user_hydro_hydrau_simulation.html#sec-user_hydro_hydrau_simulation_selection_plots",
    "href": "user_hydro_hydrau_simulation.html#sec-user_hydro_hydrau_simulation_selection_plots",
    "title": "5  Hydrological-hydraulic simulation",
    "section": "5.2 Results visualization with the Selection and Plots",
    "text": "5.2 Results visualization with the Selection and Plots\nA combination of results can be visualized in the Selection and Plots module.\n\nClick on Selection and plots in the Toolbox frame (Figure 1). A new tab is opened.\n\nIn the Objects and variables frame (Figure 5.2), all the variables are listed by objects.\n\nCheck in the Objects and variables frame the variable(s) to draw.2\nClick on Plot to plot the listed series.3\nGive a name to the active selection in the Selections list.\nExport the selection using Selections frame \\(\\rightarrow\\) Export.4\nImport a selection using Selections frame \\(\\rightarrow\\) Import.\n\nA second selection appears in the Selections list. Different selections can be defined and saved for the exploitation and analysis of the results.\n\n\n\nFigure 5.2: The Selection and Plots interface"
  },
  {
    "objectID": "user_hydro_hydrau_simulation.html#export-import-of-results-to-a-database",
    "href": "user_hydro_hydrau_simulation.html#export-import-of-results-to-a-database",
    "title": "5  Hydrological-hydraulic simulation",
    "section": "5.3 Export / Import of results to a database",
    "text": "5.3 Export / Import of results to a database\nResults of a simulation can be saved to the database as a dataset of time series.\n\nSelect Export in the Database frame (Figure 1) in the RS MINERVE main window.\nDefine the name of the dataset and choose between:\n\nAdd the dataset to an existing Group.\nCreate a new Group.\n\nExport with OK. 5\n\nYou can now visualize your results in the database (cf. Section 3). Once exported, results can be imported into the model. Importing a dataset of series replaces the current time series (results of a simulation) of all concerned objects.\n\nSelect Import in the Database frame.\nSelect the Group and the Dataset of time series to import and click Ok.\n\nExported results can also be visualized in the Selection and Plots module.\n\nOpen Selection and Plots module (Module frame \\(\\rightarrow\\) Selection and plots).\nIn the Source of data, check the Database source (Figure 5.2), then select in the combo the Group containing the dataset of time series.\nSelect the dataset of time series to be drawn.\nClick on Plot in the Series frame."
  },
  {
    "objectID": "user_expert_module.html",
    "href": "user_expert_module.html",
    "title": "6  Expert module",
    "section": "",
    "text": "In this chapter, the four plugins of the Expert module are presented:"
  },
  {
    "objectID": "user_expert_module.html#sec-user_expert_module_calibrator",
    "href": "user_expert_module.html#sec-user_expert_module_calibrator",
    "title": "6  Expert module",
    "section": "6.1 Calibrator",
    "text": "6.1 Calibrator\nThe complexity of a hydrological model calibration increases with the number of parameters to calibrate. The search for optimal values of calibration parameters can be made manually to a reasonable number of parameters. But in general, for large basins including hundreds or thousands of parameters, it is essential to have an automatic calibration tool.\nIn RS MINERVE, an automatic calibration can be realized in the Calibrator tool (Figure 6.1).\n\nClick on Expert module and then on the Calibrator tool (Figure 6.1).\n\n\nCalibration configuration\nDifferent types of calibration can be achieved for an optimization:\n\nRegular calibration: One or more zones with a unique downstream gauged station, calibrated with the same parameters for all zones.\nCalibration per zone: One or more zones with a unique downstream gauged station, calibrated with different parameters per zones.\nRegional calibration: One or more zones with several downstream gauged station, calibrated with the same parameters for all zones.\n\nThe creation of a new calibration configuration can be realized following next steps (corresponding to the black boxes in the Figure 6.1):\n\nIn the Selection frame (Figure 6.1), select the object types to calibrate: press simultaneously Ctrl on keyboard and left click on the object types. Then define the corresponding zone(s) by clicking on the Zone Id number(s).\n\n\nAll the objects corresponding to the selected object types and zone(s) appear in the Models frame (Figure 6.1). The correspondent parameters are shown in the Parameters frame (Figure 6.1).\n\n\nIn the Parameters frame (Figure 6.1), select the parameters to calibrate. For each of them, define their minimum and maximum possible values (Min and Max columns) and the value to be used for the first iteration of the calibration (From model, Defined value or Random value).\nIf more than one zone has been selected (Selection frame), a column Values per zone appears in the table. For the parameter(s) selected for calibration, a box appears in this column. If the box is checked, the calibration for the parameter will consider a different value for each zone. If not, the same value will be considered for all zones in the concerned calibration.\n\n\nParameters can be imported in the model by clicking on  in the Parameters import/export frame (Figure 6.1).\n\nIn the Comparators frame (Figure 6.1), select the comparator(s) whose the observed variables (discharges or heights) will be used for the calibration (press simultaneously Ctrl on keyboard and left click on the comparators name to select more than one). If more than one comparator is selected, all will be taken into account in the objective function with the same weight.\n\n\n\nFigure 6.1: Interface of the Hydrological calibration module (in black: configuration; in green: results)\n\n\n\nDefine the weight of each indicator to determine the objective function in the Objective Functions (OF) frame. Its total weight appears in the cell at the top of the frame.\nIn the Solver tab of the Hydrologic parameters optimization frame (Figure 6.1), specify the calibration period and both Simulation and Recording time steps (Figure 6.2). The warm up period parameter defined for each comparator will be taken into account to initialize the state variables (as explained in the Technical manual).\n\n\n\n\nFigure 6.2: Calibration solver: both runtime (left) and algorithm properties (right)\n\n\n\nIn the Algorithm parameters tab of this same frame, define the algorithm type (SCE-UA in the example of Figure 6.2) and the corresponding parameters.\nThree different algorithms (Shuffled Complex Evolution – University of Arizona - SCE-UA and Uniform Adaptive Monte Carlo - UAMC and Coupled Latin Hypercube and Rosenbrock - CLHR) are available in the actual version. For more information, see RS MINERVE – Technical Manual.\nThe mouse fly above of each parameter name shows their description.\n\n\nClick on  in the Calibration Configuration frame (Figure 6.1) to save the current calibration configuration. If you want to save the configuration for all the calibrations click on . The produced file can be imported for the next calibration test.\n\nTo import an existing configuration, click on  in the Calibration Configuration frame (Figure 6.1) and load the file.\n\n\nCalibration start/stop\n\nClick on  in the Hydrologic parameters optimization frame to launch the calibration.\n\n\nIf the calibration configuration is valid, a “Start” message with the current date appears in the Process tab in the Summary Results frame. Otherwise, a red error message is displayed at the bottom of the Solver tab and describes the problem to resolve.\n\n\nTo stop the calibration, click on  in the Hydrologic parameters optimization frame. It takes a moment to stop until the current simulation ends.\n\n\n\nCalibration results\nAfter each simulation during the calibration, the following results are showed in the Summary Results frame (Figure 6.1 and Figure 6.3):\n\nThe Objective Function (OF), with its maximum possible value.\nThe results of the simulation before optimization with initial parameters, initial indicators values and initial OF value.\nThe results of the current iteration with its parameters values and the respective indicators values and OF value.\nThe best result, with related parameters and OF value.\n\nThese results can be exported at all times by saving with the Save button located in the same frame or by copying then pasting the text in a file.\n\n\n\nFigure 6.3: Textual results of the calibration in progress\n\n\nIf more than one comparator has been selected in the Comparators frame, the Objective Function is equal to the sum of the objective functions obtained at each compactor.\nThe results of the calibration in progress can also be visualized as graphic form in the Graphic Results frame (Figure 6.1 and Figure 6.4):\n\nThe OF Progress tab shows the temporal evolution of the Objective Function (OF), with Initial value in green, current value in red and all other values in orange. The activation of the mouse wheel on vertical axis allows to zoom on the OF values of interest.\nThe Comparator tab allows following the progression of the current simulated variable (discharges or heights) with respect to the observed one. If more than one comparator had been selected for the calibration in the Comparators frame, the comparator to show can be modified by clicking on the one of interest in the same frame.\n\n\n\n\nFigure 6.4: Graphic results of the calibration in progress. Evolution of the Objective function (left) and hydrograph of both observed and current simulated discharge (right).\n\n\nAt the end of the calibration:\n\nThe parameters obtained for the best Objective Function value are applied in the current model. If the model is saved, the parameters are stored; if not, the hydrological model keeps the initial parameter values.\nThe parameters can be also exported in a file by clicking on  in the Parameters import/export frame (Figure 6.1).\n\n\n\nMultiple calibration\nAdditionally, in combination with all possible optimizations, multiple calibrations can be achieved:\n\nUnconnected basins calibration: several independent basins can be calibrated if the same “order” is provided for all of them.\nUpstream-downstream basins calibration: Different dependent basins can be calibrated from upstream to downstream (“order” grows up from upstream to downstream).\n\nParallel and series calibration can be combined for a complex basin as presented in example of Figure 6.5, where two unconnected basins are calibrated in Calibration A and Calibration B, then a downstream basin is calibrated in Calibration C and, finally, a more downstream basin is calibrated in Calibration D.\n\n\n\nFigure 6.5: Example of a calibration with two unconnected basins and two basins upstream"
  },
  {
    "objectID": "user_expert_module.html#scenario-simulation",
    "href": "user_expert_module.html#scenario-simulation",
    "title": "6  Expert module",
    "section": "6.2 Scenario simulation",
    "text": "6.2 Scenario simulation\nTo evaluate the model sensitivity (i.e. the simulated flows) to the Initial Conditions, to the parameters and also to the meteorological inputs, it is necessary to run a lot of simulations to test different sets of values. But for the user it is very tedious to launch these many scenarios simulations.\nIn RS MINERVE, scenario’s simulations can be realized in the Scenario simulation tool.\n\nClick on the Expert module in the Toolbox frame (Figure 1) and then on the Scenario simulation (Figure 6.6).\n\n\n\n\nFigure 6.6: Interface of the Scenario simulation module (in black: configuration; in green: results)\n\n\n\nScenarios configuration\nA scenario is composed of a combination of input datasets (one for each type of Input data), a set of initial conditions and a set of parameters. Except the dataset for the Station input (meteorological inputs) when the model contains at least one Virtual weather station, all other inputs are optional. Initial conditions and parameters can be provided as text or worksheet files.\nAll possible combinations composed of every input type with at least one dataset or input file are proposed, but the user can erase undesired simulations.\nThe creation of a new scenarios configuration can be achieved following next steps (corresponding to the black boxes in Figure 6.14):\n\nIn the Inputs frame (Figure 6.6), click on the DataSets tab (Figure 6.7). Select the dataset(s) to be used as data sources for the different Inputs: Station, TurbineDB, Source, Reservoir and Consumer (only object types existing in the model are listed). For example, for the Station data source, click on Station in the left part, search the corresponding dataset name(s) in the right part and check it/them.\n\n\n\n\nFigure 6.7: Inputs frame in the Scenario simulation tool\n\n\n\nClick on the Initial conditions tab (Figure 6.7). If you want to add initial conditions (IC) file(s), click on  and import the desired IC files. The selected ones are listed in the Inputs frame.\nClick on the Parameters tab (Figure 6.7). If you want to add parameters file(s), click on  and import the desired parameters files. The selected ones are listed in the Inputs frame.\nIn the Selection frame (Figure 6.6), choose the model selection to be used.\nThen, select the object’s series to be displayed.\n\nThe model selection is also used for the results exportation.\n\nIn the Outputs frame (Figure 6.6), define the outputs to be recorded: All results (all the simulation results of the model) and/or Results from selection (which considers only the above selected model selection). For each one, it is possible to record:\n\nEach simulation: one dataset will be produced by time-slice (see Simulation period in Solver frame at Figure 6.6)\nCombined simulations: only one dataset will be produced for all the period\nNothing: no dataset will be produced\n\nIn the Solver frame (Figure 6.6), specify:\n\nBoth Simulation and Recording time steps\n\n\nThe period of each scenario simulation will only correspond to the period covered by all the datasets composing the scenario. If the covered periods for a scenario do not overlap for more than one time step, a gray progress bar is displayed (since simulation cannot be achieved).\nThe name of the output file of each scenario is composed by merging the names of all the datasets used for the scenario. The input type of each dataset (e.g. Station, Source) is added before the name of each dataset (e.g. “Station-Datameteo_Source-Datasource…”)\n\n\nScenario simulation start/stop\n\nClick on  in the Solver frame to launch the time-slice simulation.\n\n\nIf the model is valid, the simulation starts. Succes of each scenario is presented with a green progress bar (Figure 6.8). If the current scenario is not valid, the RS MINERVE error is displayed and a gray progress bar is shown (Figure 6.8, right).\n\n\n\n\nFigure 6.8: Progress state after succes (left) and failure (right) of the simulation\n\n\n\nClick on  in the Solver frame if necessary to stop the simulation. All results until that moment are saved.\n\n\n\nScenarios results\nAfter simulation of each scenario, following components are showed:\n\nIn the Selection frame: the temporal evolution of the selected object’s series.\nIn the Comparators frame: the values of indicators checked at the top left of the frame (Indicators to visualize).These values are displayed as graphical and tabular forms and correspond to the comparator selected in the bottom left of the Comparator frame.\n\nDuring the simulation, you can change all the objects or all indicators or all comparators to visualize by clicking on or checking them. The tabular results of indicators can be exported at all times by copying then pasting the text in a file.\nAt the end of the scenario simulation, the outputs datasets are available in the same repository than those of the database."
  },
  {
    "objectID": "user_expert_module.html#stochastic-simulation",
    "href": "user_expert_module.html#stochastic-simulation",
    "title": "6  Expert module",
    "section": "6.3 Stochastic simulation",
    "text": "6.3 Stochastic simulation\nThis tool is capable of generating a set of simulations based on different parameters or initial conditions with values located in a defined user interval. For each element of the model, simulated hydrographs, corresponding statistics (mean, median, quartiles, minimum and maximum values), and related set of parameters for each simulation are provided. This module has implemented 4 types of probability distributions, uniform, normal, log normal and exponential. Also, it is possible to define a custom probability distribution with a txt file, to get more information go to the Technical Manual.\nSometimes the complexity of a hydrological model requires a sensitivity analysis to collect a set of simulations. The possibility to analysis the results of a model depending of a range parameter is really useful to know the variability of the model. This module generates a lot of information, all the results simulations, generated parameter series and finally a statistic results.\nIn RS MINERVE, an automatic stochastic simulation can be realized in the Hydrological calibration tool (1).\n\nClick on Expert module and then on the Stochastic Simulation (1).\n\n\n\n\nFigure 6.9: Interface of the Stochastic simulation module (in black: configuration; in green: results)\n\n\n\nStochastic configuration\nThe creation of a new Stochastic simulation configuration can be realized following next steps (corresponding to the black boxes in 1):\n\nIn the Selection frame (1), select the object types to simulate: press simultaneously Ctrl on keyboard and left click on the object types. Then define the corresponding zone(s) by clicking on the Zone Id number(s).\n\n\nAll the objects corresponding to the selected object types and zone(s) appear in the Models frame (1). The correspondent parameters are shown in the Parameters frame (1).\n\n\nIn the Parameters frame (1), select the range parameters to simulate. For each of them, define their minimum and maximum possible values (Min and Max columns) and the probability distribution to be used in the simulation (Uniform, normal, log normal, exponential and user defined). To get more information go to the Technical Manual.\nIf more than one zone has been selected (Selection frame), a column Values per zone appears in the table. For the parameter(s) selected for simulation, a box appears in this column. If the box is checked, the simulation for the parameter will consider a different value for each zone. If not, the same value will be considered for all zones in the concerned simulation.\n\n\nParameters can be imported in the model by clicking on  in the Parameters import/export frame (1).\n\n\nIn the Selection plot frame (1), select the result(s) that will be used for the simulation (press simultaneously Ctrl on keyboard and left click on the selection name to select more than one). It is necessary to define previously a plot to run the stochastic simulation.\nIn the Solver tab of the Hydrologic parameters frame (1), specify the simulation period and both Simulation and Recording time steps.\nClick on  in the Summary results frame\n\nto save the current stochastic configuration. If you want to save the configuration for all the simulations click on . The produced file can be imported for the next simulation test.\n\n\nTo import an existing configuration, click on  in the Simulation Configuration frame (1) and load the file.\n\n\nStochastic start/stop\n\nClick on  in the Hydrologic parameters frame to launch the simulation.\n\n\nIf the simulation configuration is valid, a “Start” message with the current date appears in the Process tab in the Summary Results frame. Otherwise, a red error message is displayed at the bottom of the Solver tab and describes the problem to resolve.\n\n\nClick on  in the Hydrologic parameters frame to stop the simulation. It takes a moment to stop until the current simulation ends.\n\n\n\nStochastic results\nAfter each simulation during the calibration, the following results are showed in the Summary Results frame (Figure 6.10):\n\n\n\nFigure 6.10: Textual results of the stochastic simulation\n\n\nThese results can be exported at all times by saving with the Save button .\nThis action save three CSV files with all the numerical simulation information.\n\nFirst file, (*.csv) contains all the simulations results for the defined period of time (Figure 6.11, left).\nSecond file, (* - Statistical.csv) contains the statistical values for simulations results for the defined period of time (Max, Q(75%), Median, Average, Q(25%) and Min) (fig-stochastic_simulation_numerical_results, right).\nThird file, (* - P&IC.csv) contains the parameters values with a defined probability distribution (Figure 6.12).\n\n\n\n\nFigure 6.11: Numerical results for the stochastic simulation. All the simulation iterations (left). Statistical results (right).\n\n\n \n\n\n\nFigure 6.12: Parameters values with a defined probability distribution\n\n\nFinally, Figure 6.13 shows the statistical graphical results for the defined period of time.\n\n\n\nFigure 6.13: Graphic results of the stochastic simulation, statistical series plots"
  },
  {
    "objectID": "user_expert_module.html#time-slice-simulation",
    "href": "user_expert_module.html#time-slice-simulation",
    "title": "6  Expert module",
    "section": "6.4 Time-slice simulation",
    "text": "6.4 Time-slice simulation\nThe computation duration logically increases with the model complexity but also with the simulation period length. Thus, simulations on long periods with short time steps and a complex model can become inappropriate for user’s computer performance. In this case, it is necessary to clip the simulation period in time-slices.\nIn RS MINERVE, a time-slice simulation can be realized in the Time-slice simulation tool.\n\nClick on Expert module and then in the Time-slice simulation tool (Figure 6.14).\n\n\n\n\nFigure 6.14: Interface of the Time-slice simulation tool (in black: configuration; in green: results\n\n\n\nTime-slice configuration\nThe creation of a new time-slice configuration can be achieved following next steps (corresponding to the black boxes in Figure 6.14):\n\nIn the Inputs frame (Figure 6.14), select the dataset(s) for each data source (Station, TurbineDB, Source, etc.). For example, for the Data Source of Station objects: click on Station, search the corresponding dataset name(s) and check it.\n\n\nMore than one dataset can be checked for each type of input. If a period of the simulation is covered by more than one dataset, the dataset starting first is used\n\n\nIn the Selection frame (Figure 6.14), choose the model selection to be used.\nThen, select the object’s series to be displayed.\n\n\nThe model selection is also used for the results exportation.\n\n\nIn the Outputs frame (Figure 6.14), define the outputs to be recorded: All results (all the simulation results of the model) and/or Results from selection (which considers only the above selected model selection). For each one, it is possible to record:\n\nEach simulation: one dataset will be produced by time-slice (see Simulation period in Solver frame at Figure 6.14)\nCombined simulations: only one dataset will be produced for all the period\nNothing: no dataset will be produced\n\nIn the Solver frame (Figure 6.14), specify:\n\nThe entire simulation period: Start and End dates.\n\n\n\nBy default, the maximum possible period to be simulated is proposed. It corresponds to the maximum period covered by the datasets in each object type for which at least one dataset is selected. Manual modification can only shrink the extent of the simulation period.\n\n\nThe time-slice or Simulation period: annually, monthly, etc.\nBoth Simulation and Recording time steps.\n\n\n\nTime-slice simulation start/stop\n\nClick on  in the Solver frame to launch the time-slice simulation.\n\n\nIf the model is valid, the simulation starts. In addition, succes of each time-slice is presented with a green progress bar (Figure 6.15, left). If one time-slice cannot be achieved, the RS MINERVE error window is displayed and a gray progress bar is shown (Figure 6.15, right).\n\n\n\n\nFigure 6.15: Progress state after success (left) and failure (right) of the simulation\n\n\n\nClick on  in the Solver frame if necessary to stop the simulation. All results until that moment are saved.\n\n\n\nTime-slice results\nAfter each computation of each time-slice, next components are shown:\n\nIn the Solver frame, the progress bar of each time-slice.\nIn the Selection frame, the series of the components selected in the object list for the last computed time-slice.\nIn the Comparators frame: the values of the indicators checked under Indicators to visualize for the selected comparators are graphically shown in the top part of the frame and in tabular form in the bottom part of the same frame (Figure 6.16).\n\n\n\n\nFigure 6.16: Visualization of indicators at the different comparators\n\n\nObjects selection in the Selection frame as well as indicators and comparators to consider in the Comparators frame can be modified during the Time-slice simulation.\nThe tabular results of indicators can be exported at any time by copying them and pasting the text in a file.\nAt the end of the time-slice simulation, the outputs datasets are available in the same repository than those of the database."
  },
  {
    "objectID": "user_expert_module.html#optimizator",
    "href": "user_expert_module.html#optimizator",
    "title": "6  Expert module",
    "section": "6.5 Optimizator",
    "text": "6.5 Optimizator\nIn RS MINERVE, an automatic optimization of the Planner’s conditions and rules can be performed with the Optimizator tool (Figure 6.17).\n\nClick on Expert module and then on the Optimizator tool (Figure 6.17).\n\n\nOptimization configuration\nThe definition of a new optimization configuration can be carried out following the next steps (corresponding to the black boxes in Figure 6.17):\n\nIn the Selection frame (Figure 6.17), select the Zones to be considered and the Planners objects to which the optimization should be applied to: press Ctrl and click to select multiple Zones or Planners.\n\n\nOnce the Zones and Planner objects selected, all the possible “output generation” parameters and the “conditions” parameters that can be optimized appear in the Parameters to optimize frame (Figure 6.17).\n\n\nIn the Parameters to optimize frame (Figure 6.17), select the parameters to optimize in both tabs (Output generation and Conditions). For each one, define its minimum and maximum possible values.\n\n\n\n\nFigure 6.17: Interface of the Planner optimization module (in black: configuration; in green: results)\n\n\n\nChoose the ‘Model selection’ (from those defined in Selection and plots module) in the Objective Function (OF) frame (Figure 6.17). The available series of this selection appear in the table below.\nSelect the series to take into account in the objective function. For each selection, specify its weight, the optimization type (maximize or minimize) and the value we want to maximize/minimize (the maximum value of the series, the minimum value, the average or the value for a specific K date).\nIf the option “Kth date” is selected for the Value to optimize, the user has to define a specific date in the “Kth Date” column.\nA conversion from discharge to damages can be applied to the flow series selected. This could be used to optimize damages instead of discharges. For this purpose, the user can create a conversion curve adding at least two points in the “Table conversion” on the right. When the points are added, the Convert option for this result can be enabled.\nIn the Solver section of the Optimization computation frame, specify the optimization period and both the Simulation and Recording time steps (Figure 6.17).\nIn the Algorithm parameters section of the same frame, define the optimization algorithm to be used (e.g., SCE-UA in Figure 6.17) and its corresponding parameters. Three different algorithms are available: Shuffled Complex Evolution – University of Arizona - SCE-UA; Uniform Adaptive Monte Carlo – UAMC; Coupled Latin Hypercube with Rosenbrock - CLHR. For more information about their basic essentials, please refer to the RS MINERVE – Technical Manual.\nHover the mouse over each parameter to display a short description.\nTo save the current optimization configuration (optional), click on  in the Optimization Configuration frame (Figure 6.17). If you want to save the configuration for all the optimizations, click on . The resulting file can be imported for the next optimization.\nTo import an existing optimization, click on  in the Optimization Configuration frame (Figure 6.17) and load the file.\n\n\n\nOptimization start/stop\n\nClick on  in the Optimization computation frame to launch the optimization.\n\n\nIf the optimization configuration is valid, a “Start” message with the current date appears in the Process tab of the Summary Results frame. Otherwise, a red error message is displayed at the bottom of the Solver section with a description of the problem.\n\n\nTo stop the process, click on  in the Optimization computation frame. It takes a moment to stop until the ongoing simulation ends.\n\n\n\nOptimization results\nDuring the optimization running, the following results are displayed in the Summary Results frame (Figure 6.17 and Figure 6.18):\n\nThe Objective Function (OF), with its maximum possible value.\nThe results of the simulation before the optimization with the initial Planner parameters and the initial OF value.\nThe results of the current iteration with its Planner parameters values and the respective values of the OF value.\nThe best result, with related parameters and OF value.\n\nThe results can be exported for all iterations at the end of the process with the Save button located in the same frame. The summary results can also be copy -pasted the text in a file.\n\n\n\nFigure 6.18: Textual results of the optimization in progress\n\n\nThe results of the optimization in progress are also displayed graphically in the Graphic Results frame (Figure 6.17):\n\nThe OF Progress tab shows the evolution of the Objective Function (OF), with its Initial value in green, the current value in red and all other values in orange. The activation of the mouse wheel on the vertical axis allows to zoom on the OF values of interest.\n\nAt the end of the optimization:\n\nThe Planner parameters obtained at the end of the optimization process are applied to the model. If the model is saved, the parameters are stored; if not, the Planner objects keep the initial (non-optimized) parameters."
  },
  {
    "objectID": "user_plugins.html",
    "href": "user_plugins.html",
    "title": "7  Plugins",
    "section": "",
    "text": "Needs and requests in terms of hydrological and hydraulic modelling differ a lot among users. This is why sometimes, tools need to be developped for specific applications. To answer these particular requests, a plugin module has been developped to enable integration of additional tools into RS MINERVE."
  },
  {
    "objectID": "user_plugins.html#options-for-the-integration-of-plugins",
    "href": "user_plugins.html#options-for-the-integration-of-plugins",
    "title": "7  Plugins",
    "section": "7.1 Options for the integration of plugins",
    "text": "7.1 Options for the integration of plugins\nPlugins are additional tools integrated in RS MINERVE. They are developed by the RS MINERVE Group on request of users of the RS MINERVE community that are willing to fund their developments. Depending on their wish to share or not the developed plugin, three different possibilities exist:\n\nIntegration in RS MINERVE: The plugin is directly integrated in RS MINERVE and therefore available to all users at installation.\nPlugin available for download on a website: The founder can decide that the plugin should not be part of RS MINERVE but freely available for download on a webpage (CREALP website or company website).\nPrivate plugin: The funder can decide not to share the plugin."
  },
  {
    "objectID": "user_plugins.html#plugin-manager-under-development",
    "href": "user_plugins.html#plugin-manager-under-development",
    "title": "7  Plugins",
    "section": "7.2 Plugin Manager (under development)",
    "text": "7.2 Plugin Manager (under development)\nThe Plugin manager will allow integration of plugins not yet available in RS MINERVE (available for download on a webpage). This part is still under development. However, plugins can already be used trough addition of dll files. In case of questions, please contact the RS MINERVE Group trough the email contact indicated on the Plugin Manager."
  },
  {
    "objectID": "user_plugins.html#plugins-documentation",
    "href": "user_plugins.html#plugins-documentation",
    "title": "7  Plugins",
    "section": "7.3 Plugins documentation",
    "text": "7.3 Plugins documentation\nThe documentation of the plugin is specific to each plugin and not part of the official User and Technical manuals of RS MINERVE."
  },
  {
    "objectID": "tech_manual.html",
    "href": "tech_manual.html",
    "title": "Technical Manual",
    "section": "",
    "text": "This chapter contains the Technical Manual of the RS MINERVE software."
  },
  {
    "objectID": "tech_manual.html#manuals-structure",
    "href": "tech_manual.html#manuals-structure",
    "title": "Technical Manual",
    "section": "Manual’s structure",
    "text": "Manual’s structure\nThe Technical manual is organised in 7 chapters:\n\nHydrological and hydraulic models description\nPerformance indicators\nCalibration algorithms\nVisual basic scripts\nFiles formats\nDatabase formats\nGIS formats\n\nFor the RS MINERVE software utilisation, the reader can also use the RS MINERVE User’s Manual."
  },
  {
    "objectID": "tech_hydrological_models.html",
    "href": "tech_hydrological_models.html",
    "title": "8  Hydrological and hydraulics models description",
    "section": "",
    "text": "This chapter presents the hydrological objects existing in RS MINERVE software."
  },
  {
    "objectID": "tech_hydrological_models.html#list-of-objects",
    "href": "tech_hydrological_models.html#list-of-objects",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.1 List of objects",
    "text": "8.1 List of objects\nThe parameters or required data (such as paired data) of all objects are presented hereafter. Not presented objects do not require data or require data from another object or from database.\n\nHydrology:\n\nVirtual Station (see Section 8.2)\nSnow-SD model (see Section 8.3)\nRunoff (SWMM) model (see Section 8.4)\nGSM model (see Section 8.5)\nSOCONT model (see Section 8.6)\nHBV model (see Section 8.7)\nGR4J model (see Section 8.8)\nSAC (SACRAMENTO-SOIL MOISTURE ACCOUNT) model (see Section 8.9)\nSCS (Soil Conservation Service) Unit Hydrograph model (see Section 8.10)\n\nRivers\n\nChannel routing description (see Section 8.11)\n\nStandard:\n\nJunction (object without parameters or paired data)\nTime Series (see Section 8.12)\nSource (object without parameters or paired data, but only a link to the database)\nComparator (see Section 8.21)\nSub-model (object without any parameters or paired data)\nGroup Interface (object without any parameters or paired data)\n\nStructures:\n\nReservoir (see Section 8.13)\nLevel-Discharge relation HQ (see Section 8.14)\nTurbine (see Section 8.15)\nTurbineDB (object linked to the database; see Section 8.15)\nHydropower (see Section 8.16)\nDiversion (see Section 8.17)\nConsumer (see Section 8.18)\nStructure Efficiency (see Section 8.19)\n\nRegulation objects:\n\nPlanner (see Section 8.20)"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-virtual_station",
    "href": "tech_hydrological_models.html#sec-virtual_station",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.2 Virtual Station",
    "text": "8.2 Virtual Station\nThe object “V-Station” (which is associated with the coordinates X, Y, Z) allows the spatial distribution of the meteorological variables (precipitation, temperature, ETP) from available measures or estimations of a database, with spatial reference in metric coordinates.\n\n\nTable 8.1: List of parameters and initial conditions for the virtual station\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nX, Y, Z\n-\nCoordinates of the virtual station\n-\n\n\nSearch Radius\nm\nSearch radius of the virtual stations\n>0\n\n\nNo. min. of stations\n-\nMinimal number of stations used for interpolation (higher priority than “Search Radius”)\n\\(\\geq\\) 1\n\n\nGradient P\n1/m\nPrecipitation gradient\n-1\n\n\nGradient T\n°C/m\nTemperature gradient\n-0.007 to -0.004\n\n\nGradient ETP\n1/m\nEvapotranspiration gradient\n-\n\n\nCoeff P\n-\nMultiplying correction coefficient\n0.5 to 2\n\n\nCoeff T\n°C\nAdding correction coefficient\n-2 to 2\n\n\nCoeff ETP\n-\nMultiplying correction coefficient\n0.5 to 2\n\n\n\n\nThe method chosen for the spatial distribution of the precipitation, the temperature and the ETP corresponds to the Thiessen and Shepard methods. The first method, Thiessen, searches the nearest meteorological station for each meteorological variable. The second one, Shepard, searches i stations being in a search radius and calculates the meteorological variable depending on inverse distance weighting.\n\nThiessen interpolation\nThe evaluation of a variable in a virtual station s from \\(n\\) meteorological stations is obtained by searching the nearest meteorological station \\(k\\) of the database to the virtual point \\(s\\) (normally referring to the gravity centre of a sub-catchment).\nThis method has been extended to take into account the evolution of certain meteorological variables as a function of the altitude. Thus, gradients and coefficients for precipitation, potential evapotranspiration or temperature is also included in the method for obtaining the final value at virtual station \\(s\\), as presented in Equation 8.1 to Equation 8.3.\n\\[\nP_s=CoeffP_s \\cdot \\big( 1 + GradP_s \\cdot (z_s-z_k) \\big) \\cdot P_k\n\\qquad(8.1)\\] \\[\nT_s=CoeffT_s + GradT_s \\cdot(z_s-z_k) + T_k\n\\qquad(8.2)\\] \\[\nETP_s=CoeffETP_s \\cdot\\big( 1 + GradETP_s \\cdot(z_s-z_k) \\big) \\cdot ETP_k\n\\qquad(8.3)\\]\nwith \\(P_s\\): value of the precipitation in the virtual station \\(s\\) [I.U.]; \\(T_s\\): value of the temperature in the virtual station \\(s\\) [I.U.]; \\(ETP_s\\): value of the potential evapotranspiration in the virtual station \\(s\\) [I.U.]; \\(P_k\\): value of the precipitation in the meteorological station \\(k\\) [I.U.]; \\(T_k\\): value of the temperature in the meteorological station \\(k_i\\) [I.U.]; \\(ETP_k\\): value of the potential evapotranspiration in the meteorological station \\(k\\) [I.U.]; \\(CoeffP_s\\): precipitation coefficient [-]; \\(CoeffT_s\\): temperature coefficient [°C]; \\(CoeffETP_s\\): potential evapotranspiration coefficient [-];\\(GradP_s\\): precipitation gradient (\\(\\mathrm{d}P_s/\\mathrm{d}z\\)) [1/m]; \\(GradT_s\\): temperature gradient (\\(\\mathrm{d}T_s/\\mathrm{d}z\\)) [°C/m]; \\(GradETP_s\\): potential evapotranspiration gradient (\\(\\mathrm{d}ETP_s/\\mathrm{d}z\\)) [1/m]; \\(z_s\\): altitude of the virtual station \\(s\\) [m a.s.l.]; \\(z_k\\): position of the meteorological station \\(k\\) of the database [m a.s.l.].\nIn that case, the parameters \\(Search Radius\\) and \\(No. min. of stations\\) are not used, since only the nearest meteorological station is used.\n\n\nShepard interpolation\nThe evaluation of a variable in a virtual station \\(s\\) from \\(n\\) meteorological stations localized at \\(i=1,2,...,n\\) is obtained by weighting according to the inverse square distance \\(d_{i,s}\\) between the meteorological station \\(i\\) of the database and the virtual station \\(s\\).\n\\[\nd_{i,s}=\\sqrt{(x_i-x_s)^2+(y_i-y_s)^2}\n\\qquad(8.4)\\]\nwith \\(x_i\\), \\(y_i\\): position of the meteorological station \\(i\\) of the database [m]; \\(x_s\\), \\(y_s\\): position of the virtual station s [m]; \\(d_{i,s}\\): distance between the meteorological station \\(i\\) and the virtual station \\(s\\) [m].\nThe \\(n\\) meteorological stations for the spatial interpolation in the virtual station \\(s\\) are determined automatically respecting Equation 8.5. Hence, the number \\(n\\) of meteorological stations is variable for every pair (\\(s\\), \\(r_s\\)). Nevertheless, a minimal number of stations used for interpolation can be fixed by the user with the corresponding parameter.\n\\[\nd_{i,s} \\leq r_s\n\\qquad(8.5)\\]\nwith \\(r_s\\): search radius of meteorological stations [m].\nThe Shepard method (Shepard 1968) has been also extended to take into account the evolution of the meteorological variables as a function of the altitude. Gradients and coefficients for precipitation, potential evapotranspiration or temperature are also included in the method for obtaining the final value at virtual station \\(s\\), as presented in Equation 8.6 to Equation 8.8.\n\\[\nP_S=CoeffP_S \\cdot \\Bigg(\\frac{\\sum_{i=1}^{n} \\Big[ \\big( 1 + GradP_s \\cdot (z_s-z_i) \\big) \\cdot P_i \\cdot {\\frac {1}{d_{i,s}^2}} \\Big]}{\\sum_{i=1}^{n} \\frac{1}{{d_{i,s}}^2}} \\Bigg)\n\\qquad(8.6)\\] \\[\nT_S=CoeffT_S + \\Bigg(\\frac{\\sum_{i=1}^{n} \\Big[\\big(GradT_s \\cdot (z_s-z_i) + T_i\\big) \\cdot {\\frac {1}{d_{i,s}^2}} \\Big]}{\\sum_{i=1}^{n} \\frac{1}{{d_{i,s}}^2}} \\Bigg)\n\\qquad(8.7)\\] \\[\nETP_S=CoeffETP_S \\cdot \\Bigg(\\frac{\\sum_{i=1}^{n} \\Big[\\big( 1 + GradETP_s \\cdot (z_s-z_i) \\big) \\cdot ETP_i \\cdot {\\frac {1}{d_{i,s}^2}} \\Big]}{\\sum_{i=1}^{n} \\frac{1}{{d_{i,s}}^2}} \\Bigg)\n\\qquad(8.8)\\]\nwith \\(P_s\\): value of the precipitation in the virtual station \\(s\\) [I.U.]; \\(T_s\\): value of the temperature in the virtual station \\(s\\) [I.U.]; \\(ETP_s\\): value of the potential evapotranspiration in the virtual station \\(s\\) [I.U.]; \\(P_i\\): value of the precipitation in the meteorological station \\(i\\) [I.U.]; \\(T_i\\): value of the temperature in the meteorological station \\(i\\) [I.U.]; \\(ETP_i\\): value of the potential evapotranspiration in the meteorological station \\(i\\) [I.U.]; \\(CoeffP_s\\): precipitation coefficient [-]; \\(CoeffT_s\\): temperature coefficient [°C]; \\(CoeffETP_s\\): potential evapotranspiration coefficient [-]; \\(GradP_s\\): precipitation gradient (\\(\\mathrm{d}P_s/\\mathrm{d}z\\)) [1/m]; \\(GradT_s\\): temperature gradient (\\(\\mathrm{d}T_s/\\mathrm{d}z\\)) [°C/m]; \\(GradETP_s\\): potential evapotranspiration gradient (\\(\\mathrm{d}ETP_s/\\mathrm{d}z\\)) [1/m]; \\(z_s\\): altitude of the virtual station \\(s\\) [m a.s.l.]; \\(z_i\\): position of the meteorological station \\(i\\) of the database [m a.s.l.].\n\n\nComplementary calculations for the Potential Evapotranspiration (ETP)\nIf no ETP values are available in the database, RS MINERVE offers also the possibility of calculating the ETP from different methods directly at virtual station. These methods can be selected in the RS MINERVE Settings, on the Evapotranspiration frame (Figure 8.1).\n\n\n\nFigure 8.1: Selection of the ETP calculation\n\n\nThe available methods are presented hereafter in detail.\na. Turc\nThe potential evapotranspiration proposed by Turc (1955, 1961) is presented in Equation 8.9:\n\\[\nETP =\n  \\begin{cases}\n    CoeffETP \\cdot K \\cdot TT + 15 \\cdot (R_g+50)       & \\quad \\text{if } T>0\\\\\n    0                                                   & \\quad \\text{if } T \\leq 0\n  \\end{cases}\n\\qquad(8.9)\\]\nwith \\(ETP\\): potential evapotranspiration [mm/month]; \\(T\\): air temperature [°C]; \\(R_g\\): global radiation [cal/cm2/day]; \\(K\\): constant [-].\nThe constant \\(K\\) value is:\n\\[\nK =\n  \\begin{cases}\n    0.4   & \\quad \\text{if Month } \\neq \\text{February}\\\\\n    0.37  & \\quad \\text{if Month = February}\n  \\end{cases}\n\\qquad(8.10)\\]\n\\(R_g\\) value is a location dependent (latitude and longitude) monthly average of the global radiation.\nThe global radiation \\(R_g\\) is obtained in [kWh/m2/day] from the Global horizontal radiation dataset provided by the Surface meteorological and Solar Energy (SSE) web portal, sponsored by the NASA’s Applied Science Program (http://eosweb.larc.nasa.gov/sse). This data comes as a grid (latitude and longitude) and is composed of monthly averaged values.\n\\(R_g\\) data takes into account 22 year monthly average (July 1983 - June 2005). The latitude and the longitude values indicate the lower left corner of a 1x1 degree region. Negative values are south and west; positive values are north and east. Boundaries of the -90/-180 region are -90 to -89 (south) and -180 to -179 (west). The last region, 89/180, is bounded by 89 to 90 (north) and 179 to 180 (east). The mid-point of the region is +0.5 added to the latitude/longitude value. These data are regional averages, not point data.\nIf the user introduces decimals to the latitude/longitude values, the RS MINERVE program calculates the nearest integer value for \\(R_g\\) calculations.\nb. McGuinness\nMcGuinness and Bordne (1972) proposes next ETP calculation:\n\\[\nETP =\n  \\begin{cases}\n    CoeffETP \\cdot K \\cdot \\frac{R_g}{\\lambda + \\rho} \\cdot \\frac {T_a + 5}{68}       & \\quad \\text{if } T>-5\\\\\n    0  & \\quad \\text{if } T \\leq -5\n  \\end{cases}\n\\qquad(8.11)\\]\nwith \\(ETP\\): potential evapotranspiration [m/d]; \\(R_g\\): global radiation [MJ/m2/day]; \\(T_a\\): air temperature [°C]; \\(\\rho\\): water density, constant value of 1’000 [kg/m^3^] ; \\(\\lambda\\): latent heat of vaporization, constant value of 2.26 [MJ/kg].\n\\(R_g\\) value is a location dependent (latitude and longitude) monthly average of the global radiation.\nThe global radiation \\(R_g\\) is obtained in [kWh/m2/day] from the Global horizontal radiation dataset provided by the Surface meteorological and Solar Energy (SSE) web portal, sponsored by the NASA’s Applied Science Program (http://eosweb.larc.nasa.gov/sse). This data comes as a grid (latitude and longitude) and is composed of monthly averaged values.\n\\(R_g\\) data takes into account 22 year monthly average (July 1983 - June 2005). The latitude and the longitude values indicate the lower left corner of a 1x1 degree region. Negative values are south and west; positive values are north and east. Boundaries of the -90/-180 region are -90 to -89 (south) and -180 to -179 (west). The last region, 89/180, is bounded by 89 to 90 (north) and 179 to 180 (east). The mid-point of the region is +0.5 added to the latitude/longitude value. These data are regional averages; not point data.\nIf the user introduces decimals to the latitude/longitude values, the RS MINERVE program calculates the nearest integer value for \\(R_g\\) calculations.\nc. Oudin\nOudin (2004) proposes following equation for the calculation of ETP:\n\\[\nETP =\n  \\begin{cases}\n    CoeffETP \\cdot K \\cdot \\frac{R_e}{\\lambda \\cdot \\rho} \\cdot \\frac {T + 5}{100}       & \\quad \\text{if } T>-5\\\\\n    0  & \\quad \\text{if } T \\leq -5\n  \\end{cases}\n\\qquad(8.12)\\]\nwith \\(ETP\\): potential evapotranspiration [m/d]; \\(R_e\\): extra-terrestrial radiation [MJ m-2 d-1]; \\(T\\): Air temperature [°C]; \\(\\rho\\): water density, constant value of 1’000 [kg/m^{3}]; \\(\\lambda\\): latent heat of vaporization, constant value of 2.26 [MJ/kg].\nOudin method coefficients (5 and 100) were optimized for the hydrological modelling, on the basis of a study realized on many worldwide watersheds (Oudin 2004).\nLatitude are only necessary for obtaining \\(R_e\\) values.\nThe extra-terrestrial radiation \\(R_e\\) is calculated as follows:\n\\[\nR_e=37.6 \\cdot dr \\cdot \\big( \\omega \\cdot \\sin(\\psi) \\cdot \\sin(\\delta) + \\sin(\\omega) \\cdot \\cos(\\psi) \\cdot \\cos(\\delta)\\big)\n\\qquad(8.13)\\] \\[\ndr=1 + 0.033 \\cdot \\cos \\Big(\\frac {2 \\cdot \\Pi \\cdot J_d}{365} \\Big)\n\\qquad(8.14)\\] \\[\n\\omega=\\arccos (-\\tan(\\psi) \\cdot \\tan(\\delta))\n\\qquad(8.15)\\] \\[\n\\delta=0.409 \\cdot \\sin \\Big( \\frac{2 \\cdot \\Pi \\cdot J_d}{365} - 1.39\\Big)\n\\qquad(8.16)\\] \\[\nJ_d =\n  \\begin{cases}\n    275 \\cdot \\frac{month}{9} - 30 + Dm       & \\quad \\text{if month} <3\\\\\n    275 \\cdot \\frac{month}{9} - 31 + Dm       & \\quad \\text{if month} \\geq 3 \\text{ and leap year = true}\\\\\n    275 \\cdot \\frac{month}{9} - 32 + Dm       & \\quad \\text{if month} \\geq 3 \\text{ and leap year = false}\n  \\end{cases}\n\\qquad(8.17)\\]\nwith \\(dr\\): relative distance Sun-Earth [-]; \\(\\delta\\): solar declination [rad]; \\(J_d\\): Julian day [-]; \\(\\psi\\): latitude, negative in the south hemisphere [rad]; \\(\\omega\\): hour angle of the sun [rad]; \\(month\\): month of the year, 1 to 12 [-]; \\(Dm\\):day of the month [-].\nd. Uniform ETP\nThe user can also set a uniform ETP for the whole simulation period and for the entire basin.\n\\[\nETP=CoeffETP \\cdot X\n\\qquad(8.18)\\]\nwith \\(X\\): uniform ETP [mm/d]"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_snow",
    "href": "tech_hydrological_models.html#sec-model_snow",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.3 Snow-SD model description",
    "text": "8.3 Snow-SD model description\nThe Snow-SD (Snow model with a Seasonal Degree-day factor) model (Figure 8.2), inspired by Schaefli et al. (2005) and Hamdi, Hingray, and Musy (2005), is composed of two sub-models. They simulate the transient evolution of the snow pack (accumulation and melt) as a function of the temperature (\\(T\\)) and precipitation (\\(P\\)) and produce an equivalent precipitation (\\(P_{eq}\\)) which can be used as an input variable for the SAC-SMA or GR4J model.\n\n\n\nFigure 8.2: Snow-SD model\n\n\n\n\nTable 8.2: List of parameters and initial conditions for the Snow-SD model\n\n\n\n\n\n\n\n\nName\nUnits\nDecription\nRegular range\n\n\n\n\nS\nmm/°C/d\nReference degree-day snowmelt coefficient\n0.5 to 20\n\n\nSInt\nmm/°C/d\nDegree-day snowmelt interval\n0 to 4\n\n\nSMin\nmm/°C/d\nMinimal degree-day snowmelt coefficient\n\\(\\geq\\) 0\n\n\nSPh\nd\nPhase shift of the sinusoidal function\n1 to 365\n\n\nThetaCri\n-\nCritical relative water content of the snow pack\n0.1\n\n\nbp\nd/mm\nMelt coefficient due to liquid precipitation\n0.0125\n\n\nTcp1\n°C\nMinimum critical temperature for liquid precipitation\n0\n\n\nTcp2\n°C\nMaximum critical temperature for solid precipitation\n4\n\n\nTcf\n°C\nCritical snowmelt temperature\n0\n\n\nCFR\n-\nRefreezing coefficient\n0 to 1\n\n\nSWEIni\nm\nInitial snow water equivalent height\n-\n\n\nThetaIni\n-\nInitial relative water content in the snow pack\n-\n\n\n\n\nIn a first step, precipitation is separated into solid (\\(P_{sn}\\)) and liquid precipitation (\\(P_w\\)) as a function of the temperature (Equation 8.19 to Equation 8.21):\n\\[\nP_w = \\alpha \\cdot P\n\\qquad(8.19)\\] \\[\nP_{sn} = (1 - \\alpha) \\cdot P\n\\qquad(8.20)\\] \\[\n\\alpha =\n  \\begin{cases}\n    0                                     & \\quad \\text{if } T \\leq T_{cp1}\\\\\n    (T - T_{cp1})/(T_{cp2} - T_{cp1})     & \\quad \\text{if } T_{cp1} < T < T_{cp2}\\\\\n    1                                     & \\quad \\text{if } T \\geq T_{cp2}\n  \\end{cases}\n\\qquad(8.21)\\]\nwith \\(P_w\\): liquid precipitation [L/T]; \\(\\alpha\\): separation factor; \\(P\\): precipitation [L/T]; \\(P_{sn}\\): solid precipitation [L/T]; \\(T\\): temperature [°C]; \\(T_{cp1}\\): minimum critical temperature for liquid precipitation [°C]; \\(T_{cp2}\\): maximum critical temperature for solid precipitation [°C].\nIf the observed temperature is lower than \\(T_{cp1}\\), only solid precipitation is generated. If the temperature is higher than \\(T_{cp2}\\), only liquid precipitation (\\(P_w\\)) is present. If the observed temperature is between these two critical values, both phases (liquid and solid) are produced. Solid precipitation (\\(P_{sn}\\)) is used as input for the snow pack, varying its content as a function of melt or freezing. The snowmelt calculation is performed as follows, using a time-varying degree-day snowmelt coefficient with a lower bound as presented in Figure 8.3:\n\\[\nS' = max \\Big( S_{Min}\\ ;\\ S + \\ \\frac{S_{Int}}{2} \\cdot \\sin \\big( 2\\pi \\cdot \\frac{n - S_{Ph}}{365} \\big) \\Big)\n\\qquad(8.22)\\] \\[\nM_{sn} =\n  \\begin{cases}\n    S' \\cdot (1 + b_p \\cdot P_w) \\cdot (T - T_{cf})     & \\quad \\text{if } T > T_{cf}\\\\\n    S' \\cdot CFR \\cdot (T - T_{cf})        & \\quad \\text{if } T \\leq T_{cf}\n  \\end{cases}\n\\qquad(8.23)\\] \\[\n\\mathrm{d}H_{snow}/\\mathrm{d}t = P_{sn} - M_{sn}, \\quad M_{sn} \\leq P_{sn} + H_{snow}/\\mathrm{d}t, \\quad M_{sn} \\geq - W_{snow}/\\mathrm{d}t\n\\qquad(8.24)\\]\nwith \\(S'\\) (\\(S\\) Series in RS MINERVE): time-varying degree-day snowmelt coefficient [L/T/°C]; \\(S\\): reference degree-day snowmelt coefficient [L/T/°C]; \\(S_{Int}\\): degree-day snowmelt coefficient interval [L/T/°C]; \\(n\\): day of the year [T]; \\(S_{Min}\\): Minimal degree-day snowmelt coefficient [L/T/°C]; \\(S_{Ph}\\): Phase shift of the sinusoidal function [T]; \\(M_{sn}\\): snowmelt or freezing [L/T]; \\(b_p\\): melt coefficient due to liquid precipitation [T/L]; \\(T_{cf}\\): critical snowmelt temperature [°C]; \\(CFR\\): refreezing coefficient [-]; \\(H_{snow}\\): water content of the solid fraction of snow [L]; \\(dt\\): time step [T]; \\(W_{snow}\\): water content of the liquid fraction of snow [L].\n\n\n\nFigure 8.3: Time-varying degree-day snowmelt coefficient\n\n\n\\(S_{Min}\\) allows to fix a lower limit to the \\(S'\\) value. The \\(S_{Ph}\\) parameter defines the (horizontal) phase shift of the sinusoidal curve with respect to the first day of the year.\nThe equivalent precipitation (\\(P_{eq}\\)) depends on the water content of the snow (Equation 8.25 to Equation 8.27):\n\\[\n\\theta = \\frac{W_{snow}}{H_{snow}}\n\\qquad(8.25)\\] \\[\nP_{eq} =\n  \\begin{cases}\n    P_w + W_{snow}/\\mathrm{d}t                            & \\quad \\text{if } H_{snow} = 0\\\\\n    0                                            & \\quad \\text{if } H_{snow} > 0 \\text{ and } \\theta \\leq \\theta_{cr}\\\\\n    (\\theta - \\theta_{cr}) \\cdot H_{snow}/\\mathrm{d}t     & \\quad \\text{if } H_{snow} > 0 \\text{ and } \\theta > \\theta_{cr}\n  \\end{cases}\n\\qquad(8.26)\\] \\[\n\\mathrm{d}W_{snow}/\\mathrm{d}t = P_w + M_{sn} - P_{eq}\n\\qquad(8.27)\\]\nwith \\(\\theta\\) (\\(Theta\\) in RS MINERVE): relative water content in the snow pack [-]; \\(\\theta_{cr}\\) (\\(ThetaCri\\) in RS MINERVE): critical relative water content in the snow pack [-]; \\(P_{eq}\\): equivalent precipitation [L/T].\nThe snow water equivalent is then the addition of \\(H_{snow}\\) and \\(W_{snow}\\) (Equation 8.28):\n\\[\nSWE = H_{snow} + W_{snow}\n\\qquad(8.28)\\]\nwith \\(SWE\\): snow water equivalent [L].\nThe variables for the initial situation associated to this model are (\\(Theta\\) in RS MINERVE) and \\(SWE\\). The parameters to adjust are \\(S\\), \\(S_{Int}\\) and \\(CFR\\). The parameters \\(S_{Phi}\\), \\(b_p\\), \\(\\theta_{cr}\\), \\(T_{cp1}\\), \\(T_{cp2}\\) and \\(T_{cf}\\) can be assumed as constant (\\(b_p = 0.0125\\), \\(\\theta_{cr} = 0.1\\), \\(T_{cp1} = 0 °C\\), \\(T_{cp2} = 4 °C\\), \\(T_{cf} = 0 °C\\), \\(S_{Phi} = 80\\) (corresponding to March 21st for the Northern hemisphere; use 264 for Southern hemisphere corresponding to September 21)) but can be also be calibrated for some cases.\nThe refreezing coefficient \\(CFR\\) is similar to the one found for example in HBV (see Section 8.7) and is available for the Snow-SD model in RS MINERVE program from the version 2.8.0. By default, \\(CFR\\) is set to 1, recommended values from the literature are around 0.05.\nThe input variables of the model are precipitation (\\(P\\)) and temperature (\\(T\\)), the output value is the equivalent precipitation (\\(P_{eq}\\))."
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_swmm",
    "href": "tech_hydrological_models.html#sec-model_swmm",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.4 Runoff (SWMM) model description",
    "text": "8.4 Runoff (SWMM) model description\nThe SWMM (Storm Water Management Model) model presented hereafter was developed by Metcalf & Eddy (1971).\n\n\n\nFigure 8.4: SWMM Runoff model\n\n\n\n\nTable 8.3: List of parameters and initial conditions for the SWMM model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of runoff\n>0\n\n\nL\nm\nLength of the plane\n>0\n\n\nJ0\n-\nRunoff slope\n>0\n\n\nK\nm1/3/s\nStrickler coefficient\n0.1 to 90\n\n\nHIni\nm\nInitial water level downstream of the surface\n-\n\n\n\n\nThe transfer of the net intensity to an impermeable surface is carried out by the help of a non-linear transfer reservoir (Figure 8.4) depending on the Equation 8.29 to Equation 8.31:\n\\[\n\\mathrm{d}H/\\mathrm{d}t = 2 \\cdot (i_{Net} - i_{r}), \\quad H_{r} \\geq 0\n\\qquad(8.29)\\] \\[\ni_{r} = K \\cdot \\sqrt{J_{o}} \\cdot H^{5/3} \\cdot \\frac{1}{L}\n\\qquad(8.30)\\] \\[\nQ = i_{r} \\cdot A\n\\qquad(8.31)\\]\nwith \\(H\\): runoff water level downstream of the surface [L]; \\(i_{Net}\\): net intensity [L/T]; \\(i_r\\): runoff intensity [L/T]; \\(K\\): Strickler coefficient [L1/3/T]; \\(J_o\\): average slope of the plane [-]; \\(L\\): length of the plane [L]; \\(A\\): run-off surface [L2].\nThe variable for the initial condition associated to the model is \\(H_r\\). The parameter to adjust is \\(K\\). The other parameters (\\(J_o\\), \\(L\\), \\(A\\)) are supposed to be constant.\nThe SWMM model, supplied by a hyetograph of net rainfall (\\(i_{Net}\\)), provides a hydrograph downstream of the surface (\\(Q\\))."
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_gsm",
    "href": "tech_hydrological_models.html#sec-model_gsm",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.5 GSM model description",
    "text": "8.5 GSM model description\nThe GSM model (Figure 8.5) is composed of 5 sub-models, two corresponding to the Snow-SD model and the other three corresponding to the glacier model. The present model allows an easy construction of this kind of composition.\nFrom the inputs of precipitation (\\(P\\)) and temperature (\\(T\\)), the snow model creates an equivalent precipitation (\\(P_{eq}\\)) which is transferred to the glacier model. The same accounts for the height of the snow (\\(SWE\\)) and the temperature (\\(T\\)).\nIn the glacier model the equivalent precipitation is transferred to the linear snow reservoir (\\(R_{sn}\\)) and finally to the outlet of the sub-catchment (\\(Q_{snow}\\)). Besides, the sub-model of the glacier melt creates a flow when the height of snow is zero (\\(SWE=0\\)). This glacier flow (\\(P_{eqGL}\\)) is transferred to the linear glacier reservoir (\\(R_{gl}\\)) and the resulting flow (\\(Q_{glacier}\\)) to the outlet of the sub-catchment.\nThe final flow (\\(Q_{tot}\\)) produced by the sub-catchment is the addition of the two flows (\\(Q_{glacier}\\) and \\(Q_{snow}\\)).\n\n\n\nFigure 8.5: GSM model\n\n\n\n\nTable 8.4: List of parameters and initial conditions for the GSM model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of infiltration\n>0\n\n\nS\nmm/°C/d\nReference degree-day snowmelt coefficient\n0.5 to 20\n\n\nSInt\nmm/°C/d\nDegree-day snowmelt interval\n0 to 4\n\n\nSMin\nmm/°C/d\nMinimal degree-day snowmelt coefficient\n\\(\\geq\\) 0\n\n\nSph\nd\nPhase shift of the sinusoidal function\n1 to 365\n\n\nThetaCri\n-\nCritical relative water content of the snow pack\n0.1\n\n\nbp\nd/mm\nMelt coefficient due to liquid precipitation\n0.0125\n\n\nTcp1\n°C\nMinimum critical temperature for liquid precipitation\n0\n\n\nTcp2\n°C\nMaximum critical temperature for solid precipitation\n4\n\n\nTcf\n°C\nCritical snowmelt temperature\n0\n\n\nG\nmm/°C/d\nReference degree-day glacier melt coefficient\n0.5 to 20\n\n\nGInt\nmm/°C/d\nDegree-day glacier melt interval\n0 to 4\n\n\nGMin\nmm/°C/d\nMinimal degree-day glacier melt coefficient\n\\(\\geq\\) 0\n\n\nTcg\n°C\nCritical glacier melt temperature\n0\n\n\nKgl\n1/d\nRelease coefficient of glacier melt reservoir\n0.1 to 5\n\n\nKsn\n1/d\nRelease coefficient of snowmelt reservoir\n0.1 to 5\n\n\nCFR\n-\nRefreezing coefficient\n0 to 1\n\n\nSWEIni\nm\nInitial snow water equivalent height\n-\n\n\nThetaIni\n-\nInitial relative water content in the snow pack\n-\n\n\nQsnowIni\nm3/s\nInitial outflow of linear snow reservoir\n-\n\n\nQglacierIni\nm3/s\nInitial outflow of linear glacier reservoir\n-\n\n\n\n\nIn a first step, the precipitation is divided into a solid precipitation (\\(P_{sn}\\)) and into a liquid precipitation (\\(P_w\\)) as a function of the temperature (Equation 8.32 to Equation 8.34):\n\\[\nP_{w} = \\alpha \\cdot P\n\\qquad(8.32)\\] \\[\nP_{sn} = (1 - \\alpha) \\cdot P\n\\qquad(8.33)\\] \\[\n\\alpha =\n  \\begin{cases}\n    0                                     & \\quad \\text{if } T \\leq T_{cp1}\\\\\n    (T - T_{cp1})/(T_{cp2} - T_{cp1})     & \\quad \\text{if } T_{cp1} < T < T_{cp2}\\\\\n    1                                     & \\quad \\text{if } T \\geq T_{cp2}\n  \\end{cases}\n\\qquad(8.34)\\]\nwith \\(P_w\\): liquid precipitation [L/T]; \\(\\alpha\\): separation factor; \\(P\\): precipitation [L/T]; \\(P_{sn}\\): solid precipitation [L/T]; \\(T\\): temperature [°C]; \\(T_{cp1}\\): minimum critical temperature for liquid precipitation [°C]; \\(T_{cp2}\\): maximum critical temperature for solid precipitation [°C].\nIf the observed temperature is lower than \\(T_{cp1}\\) only solid precipitation is produced. If the temperature is higher than \\(T_{cp2}\\) only liquid precipitation (\\(P_w\\)) is produced. If the temperature observed is found between these two critical values liquid and solid precipitation are produced. The solid precipitation (\\(P_{sn}\\)) is used as input for the snow pack, varying its content as a function of melt or freezing. The snowmelt calculation is performed as follows, using a time-varying degree-day snowmelt coefficient (Figure 8.3) (Magnusson et al. 2014; Slater and Clark 2006).\n\\[\nS^{'} = max \\bigg( S_{Min}\\ ;\\ S + \\frac{S_{Int}}{2} \\cdot \\sin \\Big( 2 \\pi \\cdot \\frac{n - S_{Ph}}{365} \\Big) \\bigg)\\\n\\qquad(8.35)\\] \\[\nM_{sn} =\n  \\begin{cases}\n    S' \\cdot (1 + b_p \\cdot P_w) \\cdot (T - T_{cf})    & \\quad \\text{if } T > T_{cf} \\\\\n    S' \\cdot CFR \\cdot (T - T_{cf})                    & \\quad \\text{if } T \\leq T_{cf}\n  \\end{cases}\n\\qquad(8.36)\\] \\[\n\\mathrm{d}H_{snow}/\\mathrm{d}t = P_{sn} - M_{sn} , \\quad M_{sn} \\leq P_{sn} + H_{snow}/\\mathrm{d}t , \\quad M_{sn} \\geq - W_{snow}/\\mathrm{d}t\n\\qquad(8.37)\\]\nwith \\(S'\\) (\\(S\\) series in RS MINERVE): time-varying degree-day snowmelt coefficient [L/T/°C]; \\(S\\): reference degree-day snowmelt coefficient [L/T/°C]; \\(S_{Int}\\): degree-day snowmelt coefficient interval [L/T/°C]; \\(n\\): day of the year [T]; \\(S_{Min}\\): Minimal degree-day snowmelt coefficient [L/T/°C]; \\(S_{Ph}\\): Phase shift of the sinusoidal function [T]; \\(M_{sn}\\): snowmelt or freezing [L/T]; \\(b_p\\): melt coefficient due to liquid precipitation [T/L]; \\(T_{cf}\\): critical snowmelt temperature [°C]; \\(CFR\\): refreezing coefficient [-]; \\(H_{snow}\\): water content of the solid fraction of snow [L]; dt: time step [T]; \\(W_{snow}\\): water content of the liquid fraction of snow [L].\nThe \\(S_{Ph}\\) parameter defines the phase shift of the sinusoidal curve with respect to the first day of the year.\nThe equivalent precipitation (\\(P_{eq}\\)) is produced by the water content of the snow (Equation 8.38 to Equation 8.40):\n\\[\n\\theta = \\frac{W_{snow}}{H_{snow}}\n\\qquad(8.38)\\]\n\\[\nP_{eq} =\n  \\begin{cases}\n    P_{w} + W_{snow}/\\mathrm{d}t                          & \\quad \\text{if } H_{snow} = 0 \\\\\n    0                                                     & \\quad \\text{if } H_{snow} > 0 \\text{ and } \\theta \\leq \\theta_{cr} \\\\\n    (\\theta - \\theta_{cr}) \\cdot H_{snow}/\\mathrm{d}t     & \\quad \\text{if } H_{snow} > 0 \\text{ and } \\theta > \\theta_{cr}\n  \\end{cases}\n\\qquad(8.39)\\] \\[\n\\mathrm{d}W_{snow}/\\mathrm{d}t = P_w + M_{sn} - P_{eq}\n\\qquad(8.40)\\]\nwith \\(\\theta\\) (\\(Theta\\) in RS MINERVE): relative water content in the snow pack [-]; \\(\\theta_{cr}\\) (\\(ThetaCri\\) in RS MINERVE): critical relative water content in the snow pack [-]; \\(P_{eq}\\): equivalent precipitation [L/T].\nThe equivalent precipitation \\(P_{eq}\\) is then transferred to the linear snow reservoir (\\(R_{sn}\\)), generating an outflow according to Equation 8.41 and Equation 8.42.\n\\[\n\\mathrm{d}H_{Rsn}/\\mathrm{d}t = P_{eq} - K_{sn} \\cdot H_{Rsn}\n\\qquad(8.41)\\] \\[\nQ_{snow} = K_{sn} \\cdot H_{Rsn} \\cdot A\n\\qquad(8.42)\\]\nwith \\(P_{eq}\\): equivalent precipitation [L/T]; \\(H_{Rsn}\\): level in linear snow reservoir [L]; \\(K_{sn}\\): release coefficient of linear snow reservoir [1/T]; \\(Q_{snow}\\): outflow of linear snow reservoir [L3/T]; \\(A\\): glacier surface [L2].\nThe snow water equivalent is then the addition of \\(H_{snow}\\) and \\(W_{snow}\\) (Equation 8.43):\n\\[\nSWE = H_{snow} + W_{snow}\n\\qquad(8.43)\\]\nwith \\(SWE\\): snow water equivalent [L].\nThe glacier melt sub-model only provides a discharge when the snow level is zero (\\(H_{snow} = 0\\)). The water intensity produced by the glacier melt (\\(P_{eqGL}\\)) is transferred to the linear glacier reservoir (\\(R_{gl}\\)) and the resulting discharge (\\(Q_{glacier}\\)) at the outlet of the sub-catchment.\nThe glacier melt \\(Q_{glacier}\\) is defined according to Equation 8.44 to Equation 8.47:\n\\[\nG' = max \\bigg( G_{Min}\\ ;\\ G + \\frac{G_{Int}}{2} \\cdot \\sin \\Big( 2\\pi \\cdot \\frac{n - S_{Ph}}{365} \\Big) \\bigg)\n\\qquad(8.44)\\] \\[\nP_{eqGL} =\n  \\begin{cases}\n    0                          & \\quad \\text{if } T \\leq T_{cg} \\text{ or }  H_{snow} > 0 \\\\\n    G \\cdot (T - T_{cr})       & \\quad \\text{if } T > T_{cg}    \\text{ and } H_{snow} = 0\n  \\end{cases}\n\\qquad(8.45)\\] \\[\n\\mathrm{d}H_{Rgl}/\\mathrm{d}t = P_{eqGL} - K_{gl} \\cdot H_{Rgl}\n\\qquad(8.46)\\] \\[\nQ_{glacier} = K_{gl} \\cdot H_{Rgl} \\cdot A\n\\qquad(8.47)\\]\nwith \\(P_{eqGL}\\): glacier melt [L/T]; ]; \\(T_{cg}\\): critical glacier melt temperature [°C]; \\(G\\): degree-day glacier melt coefficient [L/T/°C]; \\(G_{Min}\\): Minimal degree-day glacier melt coefficient [L/T/°C]; \\(H_{Rgl}\\):level of glacier melt reservoir [L]; \\(K_{gl}\\): coefficient of linear glacier reservoir [1/T]; \\(Q_{glacier}\\): outflow of linear glacier reservoir [L3/T].\nAnd the total discharge is the addition of \\(Q_{glacier}\\) and \\(Q_{snow}\\):\n\\[\nQ = Q_{snow} + Q_{glacier}\n\\qquad(8.48)\\]\nwith \\(Q\\): total outflow [L3/T];\nThe variables for the initial situation associated to this model are (\\(Theta\\) in RS MINERVE), \\(SWE\\), \\(H_{Rsn}\\), and \\(H_{Rgl}\\).\nThe parameters to adjust are \\(S\\), \\(S_{Int}\\), \\(CFR\\), \\(\\theta_{cr}\\), \\(G\\), \\(G_{Int}\\), \\(K_{gl}\\) and \\(K_{sn}\\). The parameters \\(S_{Ph}\\), \\(b_p\\), \\(\\theta_{cr}\\), \\(T_{cp1}\\), \\(T_{cp2}\\), \\(T_{cf}\\) and \\(T_{cg}\\) can be assumed as constant (\\(b_p = 0.0125\\), \\(\\theta_{cr} = 0.1\\), \\(T_{cp1} = 0 °C\\), \\(T_{cp2} = 4 °C\\), \\(T_{cf} = 0 °C\\), \\(T_{cg} = 0 °C\\), \\(S_{Ph} = 80\\) (corresponding to March 21st for the Northern hemisphere; use 264 for Southern hemisphere corresponding to September 21)). The parameter \\(A\\) is supposed to be constant.\nThe refreezing coefficient \\(CFR\\) is similar to the one found for example in HBV (see Section 8.7) and is available for the GSM model in the RS MINERVE program from its version 2.8.0. By default, \\(CFR\\) is set to 1, recommended values from the literature are around 0.05.\nThe input variables of the model are the precipitation (\\(P\\)) and the temperature (\\(T\\)). The output is the total discharge (\\(Q_{tot}\\)) at the model outlet."
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_socont",
    "href": "tech_hydrological_models.html#sec-model_socont",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.6 SOCONT model description",
    "text": "8.6 SOCONT model description\nIn the SOCONT model (Figure 8.6), the Snow-SD model simulates the transient evolution of the snow pack (melt and accumulation) as a function of the temperature (\\(T\\)) and the precipitation (\\(P\\)), thus providing an equivalent precipitation (\\(P_{eq}\\)) that is used as input by the GR3 model. The GR3 model also takes into account the potential evapotranspiration (\\(ETP\\)) and provides the net intensity to the SWMM model.\n\n\n\nFigure 8.6: SOCONT Model\n\n\n\n\nTable 8.5: List of parameters and initial conditions for the SOCONT model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface\n>0\n\n\nS\nmm/°C/d\nReference degree-day snowmelt coefficient\n0.5 to 20\n\n\nSInt\nmm/°C/d\nDegree-day snowmelt interval\n0 to 4\n\n\nSMin\nmm/°C/d\nMinimal degree-day snowmelt coefficient\n\\(\\geq\\) 0\n\n\nSPh\nd\nPhase shift of the sinusoidal function\n1 to 365\n\n\nThetaCri\n-\nCritical relative water content of the snow pack\n0.1\n\n\nbp\nd/mm\nMelt coefficient due to liquid precipitation\n0.0125\n\n\nTcp1\n°C\nMinimum critical temperature for liquid precipitation\n0\n\n\nTcp2\n°C\nMaximum critical temperature for solid precipitation\n4\n\n\nTcf\n°C\nCritical snowmelt temperature\n0\n\n\nHGR3Max\nm\nMaximum height of infiltration reservoir\n0 to 2\n\n\nKGR3\n1/s\nRelease coefficient of infiltration reservoir\n0.00025 to 0.1\n\n\nL\nm\nLength of the plane\n>0\n\n\nJ0\n-\nRunoff slope\n>0\n\n\nKr\nm1/3/s\nStrickler coefficient\n0.1 to 90\n\n\nCFR\n-\nRefreezing coefficient\n0 to 1\n\n\nSWEIni\nm\nInitial snow water equivalent height\n-\n\n\nHGR3Ini\nm\nInitial level in infiltration reservoir\n-\n\n\nHrIni\nm\nInitial runoff water level downstream of the surface\n-\n\n\nThetaIni\n-\nInitial relative water content in the snow pack\n-\n\n\n\n\nIn a first step, the precipitation is divided into a solid precipitation (\\(P_{sn}\\)) and into a liquid precipitation (\\(P_w\\)) as a function of the temperature (Equation 8.49 to Equation 8.51):\n\\[\nP_w = \\alpha \\cdot P\n\\qquad(8.49)\\] \\[\nP_{sn} = (1 - \\alpha) \\cdot P\n\\qquad(8.50)\\] \\[\n\\alpha =\n  \\begin{cases}\n    0                                     & \\quad \\text{if }  T \\leq T_{cp1} \\\\\n    (T - T_{cp1})/(T_{cp2} - T_{cp1})     & \\quad \\text{if }  T_{cp1} < T < T_{cp2} \\\\\n    1                                     & \\quad \\text{if }  T \\geq T_{cp2}\n  \\end{cases}\n\\qquad(8.51)\\]\nwith \\(P_w\\): liquid precipitation [L/T]; \\(\\alpha\\): separation factor; \\(P\\): precipitation [L/T]; \\(P_{sn}\\): solid precipitation [L/T]; \\(T\\): temperature [°C]; \\(T_{cp1}\\): minimum critical temperature for liquid precipitation [°C]; \\(T_{cp2}\\): maximum critical temperature for solid precipitation [°C].\nIf the observed temperature is lower than \\(T_{cp1}\\) only solid precipitation is produced. If the temperature is higher than \\(T_{cp2}\\) only liquid precipitation (\\(P_w\\)) is produced. If the temperature observed is found between these two critical values liquid and solid precipitation are produced. The solid precipitation (\\(P_{sn}\\)) is used as input for the snow pack, varying its content as a function of melt or freezing. The snowmelt calculation is performed as follows, using a time-varying degree-day snowmelt coefficient (Figure 8.3) (Magnusson et al. 2014; Slater and Clark 2006):\n\\[\nS' = max\\left( S_{Min}\\ ;\\ S + \\ \\frac{S_{Int}}{2}\\sin\\left( 2\\pi\\frac{n - S_{Ph}}{365} \\right) \\right)\n\\qquad(8.52)\\] \\[\nM_{sn} =\n  \\begin{cases}\n    S' \\cdot (1 + b_{p} \\cdot P_{w}) \\cdot (T - T_{cf})      & \\quad \\text{if }  T > T_{cf} \\\\\n    S' \\cdot CFR \\cdot (T - T_{cf})                          & \\quad \\text{if }  T \\leq T_{cf}\n  \\end{cases}\n\\qquad(8.53)\\] \\[\n\\mathrm{d}H_{snow}/\\mathrm{d}t = P_{sn} - M_{sn}, \\quad M_{sn} \\leq P_{sn} + H_{snow}/\\mathrm{d}t, \\quad M_{sn} \\geq - W_{snow}/\\mathrm{d}t\n\\qquad(8.54)\\]\nwith \\(S'\\) (\\(S\\) series in RS MINERVE): time-varying degree-day snowmelt coefficient [L/T/°C]; \\(S\\): reference degree-day snowmelt coefficient [L/T/°C]; \\(S_{Int}\\): degree-day snowmelt coefficient interval [L/T/°C]; \\(n\\): day of the year [T]; \\(S_{Min}\\): Minimal degree-day snowmelt coefficient [L/T/°C]; \\(S_{Ph}\\): Phase shift of the sinusoidal function [T]; \\(M_{sn}\\): snowmelt or freezing [L/T]; \\(b_p\\): melt coefficient due to liquid precipitation [T/L]; \\(T_{cf}\\): critical snowmelt temperature [°C]; \\(CFR\\): refreezing coefficient [-]; \\(H_{snow}\\): water content of the solid fraction of snow [L]; \\(dt\\): time step [T]; \\(W_{snow}\\): water content of the liquid fraction of snow [L].\nThe \\(S_{Ph}\\) parameter defines the phase shift of the sinusoidal curve with respect to the first day of the year.\nThe equivalent precipitation (\\(P_{eq}\\)) is produced by the water content of the snow (Equation 8.55 to Equation 8.57):\n\\[\n\\theta = W_{snow}/H_{snow}\n\\qquad(8.55)\\] \\[\nP_{eq} =\n  \\begin{cases}\n    P_{w} + W_{snow}/\\mathrm{d}t                            & \\quad \\text{if }  H_{snow} = 0 \\\\\n    0                                                       & \\quad \\text{if }  H_{snow} > 0 \\text{ and } \\theta \\leq \\theta_{cr} \\\\\n    (\\theta - \\theta_{cr}) \\cdot H_{snow}/\\mathrm{d}t       & \\quad \\text{if }  H_{snow} > 0 \\text{ and } \\theta > \\theta_{cr}\n  \\end{cases}\n\\qquad(8.56)\\] \\[\n\\mathrm{d}W_{snow}/\\mathrm{d}t = P_w + M_{sn} - P_{eq}\n\\qquad(8.57)\\]\nwith \\(\\theta\\) (\\(Theta\\) in RS MINERVE): relative water content in the snow pack [-]; \\(\\theta_{cr}\\) (\\(ThetaCri\\) in RS MINERVE): critical relative water content in the snow pack [-]; \\(P_{eq}\\): equivalent precipitation [L/T].\nThe snow water equivalent is then the addition of \\(H_{snow}\\) and \\(W_{snow}\\) (Equation 8.58):\n\\[\nSWE = H_{snow} + W_{snow}\n\\qquad(8.58)\\]\nwith \\(SWE\\): snow water equivalent [L].\nNext, the infiltration reservoir is computed as follows:\n\\[\ni_{Inf} =\n  \\begin{cases}\n    P_{eq} \\cdot \\big(1 - (H_{GR3}/H_{GR3Max})^{2} \\big)     & \\quad \\text{if }  H_{GR3} \\leq H_{GR3Max} \\\\\n    0                                                        & \\quad \\text{if }  H_{GR3} > H_{GR3Max}\n  \\end{cases}\n\\qquad(8.59)\\] \\[\nETR =\n  \\begin{cases}\n  ETP \\cdot \\sqrt{ \\frac{H_{GR3}}{H_{GR3Max}}}     & \\quad \\text{if }  H_{GR3} \\leq H_{GR3Max} \\\\\n  ETP                                              & \\quad \\text{if }  H_{GR3} > H_{GR3Max}\n  \\end{cases}\n\\qquad(8.60)\\] \\[\ni_{Net} = P_{eq} - i_{Inf}\n\\qquad(8.61)\\] \\[\nQ =\n  \\begin{cases}\n    Q = K_{GR3} \\cdot H_{GR3} \\cdot A           & \\quad \\text{if }  H_{GR3} \\leq H_{GR3Max} \\\\\n    Q = K_{GR3} \\cdot H_{GR3Max} \\cdot A        & \\quad \\text{if }  H_{GR3} > H_{GR3Max}\n  \\end{cases}\n\\qquad(8.62)\\] \\[\n\\mathrm{d}H_{GR3}/\\mathrm{d}t = i_{Inf} - ETR - \\frac{Q}{A}\n\\qquad(8.63)\\]\nwith \\(ETP\\): potential evapotranspiration [L/T]; \\(i_{Inf}\\): infiltration intensity [L/T]; \\(P_{eq}\\): equivalent precipitation [L/T]; \\(H\\): level in infiltration reservoir [L]; \\(H_{GR3Max}\\): capacity of infiltration reservoir [L]; \\(ETR\\): real evapotranspiration [L/T]; \\(Q\\): base discharge [L3/T]; \\(K_{GR3}\\): release coefficient of infiltration reservoir [1/T]; \\(A\\): surface [L2]; \\(i_{Net}\\): net intensity [L/T].\nThe transfer of the net intensity to an impermeable surface is carried out by the help of a non-linear transfer reservoir depending on Equation 8.64 to Equation 8.66:\n\\[\n\\mathrm{d}H_{r}/\\mathrm{d}t = 2 \\cdot (i_{Net} - i_{r}), \\quad H_{r} \\geq 0\n\\qquad(8.64)\\] \\[\ni_{r} = K_{r} \\cdot \\sqrt{J_{o}} \\cdot {H_{r}}^{\\frac{5}{3}} \\cdot \\frac{1}{L}\n\\qquad(8.65)\\] \\[\nQ = i_{r} \\cdot A\n\\qquad(8.66)\\]\nwith \\(H_r\\): runoff water level downstream of the surface [L]; \\(i_{Net}\\): net intensity [L/T]; \\(i_r\\): runoff intensity [L/T]; \\(K_r\\): Strickler coefficient [L1/3/T]; \\(J_o\\): average slope of the plane [-]; \\(L\\): length of the plane [L].\nThe variables for the initial situation associated to this model are \\(\\theta\\) (\\(Theta\\) in RS MINERVE), \\(SWE\\), \\(H_{GR3}\\) and \\(H_r\\). The parameters to adjust are \\(S\\), \\(S_{Int}\\), \\(b_p\\), \\(CFR\\), \\(\\theta_{cr}\\), \\(K_{GR3}\\), \\(H_{GR3Max}\\) and \\(K_r\\). The parameters \\(S_{Phi}\\), \\(b_p\\), \\(\\theta_{cr}\\), \\(T_{cp1}\\), \\(T_{cp2}\\) and \\(T_{cf}\\) can be assumed as constant (\\(b_p = 0.0125\\), \\(\\theta_{cr} = 0.1\\), \\(T:{cp1} = 0 °C\\), \\(T_{cp2} = 4 °C\\), \\(T_{cf} = 0 °C\\), \\(S_{Phi} = 80\\) (corresponding to March 21st for the Northern hemisphere; use 264 for Southern hemisphere corresponding to September 21)). The other parameters (\\(J_o\\), \\(L\\), \\(A\\)) are supposed to be constant.\nThe refreezing coefficient \\(CFR\\) is similar to the one found for example in HBV (see Section 8.7) and is available for the SOCONT model in the RS MINERVE program from its version 2.8.0. By default, \\(CFR\\) is set to 1; recommended values from the literature are around 0.05.\nThe input variables of the model are the precipitation (\\(P\\)), the temperature (\\(T\\)) and the potential evapotranspiration (\\(ETP\\)). The output value is the equivalent precipitation (\\(P_{eq}\\)).\nThe outflow discharge \\(Q_{tot}\\), composed by the base discharge (\\(Q_{GR3}\\)) and the run-off discharge (\\(Q_r\\)), is finally transferred to the outlet of the sub-catchment."
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_hbv",
    "href": "tech_hydrological_models.html#sec-model_hbv",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.7 HBV model description",
    "text": "8.7 HBV model description\nThe integrated rainfall-runoff model HBV (Bergström 1976, 1992) is composed of a snow function, a humidity reservoir and two (upper and lower) soil storage reservoirs. The structure of the implemented model is presented in Figure 8.7.\n\n\n\nFigure 8.7: HBV Model\n\n\n\n\nTable 8.6: List of parameters and initial conditions for the HBV model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of the basin\n>0\n\n\nCFMax\nmm/°C/d\nMelting factor\n0.5 to 20\n\n\nCFR\n-\nRefreezing factor\n0.05\n\n\nCWH\n-\nCritical relative water content of the snow pack\n0.1\n\n\nTT\n°C\nThreshold temperature of rain/snow\n0 to 3\n\n\nTTInt\n°C\nTemperature interval for rain/snow mixing\n0 to 3\n\n\nTTSM\n°C\nThreshold temperature for snow melt\n0\n\n\nBeta\n-\nModel parameter (shape coefficient)\n1 to 5\n\n\nFC\nm\nMaximum soil storage capacity\n0.050 to 0.65\n\n\nPWP\n-\nSoil permanent wilting point threshold\n0.030 to 1\n\n\nSUMax\nm\nUpper reservoir water level threshold\n0 to 0.10\n\n\nKr\n1/d\nNear surface flow storage coefficient\n0.05 to 0.5\n\n\nKu\n1/d\nInterflow storage coefficient\n0.01 to 0.4\n\n\nKl\n1/d\nBaseflow storage coefficient\n0 to 0.15\n\n\nKperc\n1/d\nPercolation storage coefficient\n0 to 0.8\n\n\nSWEIni\nm\nInitial snow water equivalent height\n-\n\n\nWHIni\n-\nInitial relative water content in the snow pack\n-\n\n\nHumIni\nm\nInitial humidity\n-\n\n\nSUIni\nm\nInitial upper reservoir water level\n-\n\n\nSLIni\nm\nInitial lower reservoir water level\n-\n\n\n\n\nThe precipitation is first divided into snowfall (\\(SF\\)) and rainfall (\\(RF\\)) as a function of the temperature (Equation 8.106 to Equation 8.108). If the observed temperature is lower than \\(TT-TTInt/2\\), only solid snowfall is produced. If the temperature is higher than \\(TT+TTInt/2\\), only rainfall is produced. If the observed temperature is found between these values, both rainfall and snowfall are produced.\n\\[\nRF = \\alpha \\cdot P\n\\qquad(8.67)\\] \\[\nSF = (1 - \\alpha) \\cdot P\n\\qquad(8.68)\\] \\[\n\\alpha =\n  \\begin{cases}\n    0                                    & \\quad \\text{if } T < TT - TTInt/2 \\\\\n    \\frac{T - (TT - TTInt/2)}{TTInt}     & \\quad \\text{if } TT - TTInt/2 < T < TT + TTInt/2 \\\\\n    1                                    & \\quad \\text{if } T > TT + TTInt/2\n  \\end{cases}\n\\qquad(8.69)\\]\nwith \\(RF\\): rainfall [L/T]; \\(\\alpha\\): separation factor; \\(P\\): precipitation [L/T]; \\(SF\\): snowfall [L/T]; \\(T\\): temperature [°C]; \\(TT\\): threshold temperature for rain/snow [°C]; \\(TTInt\\): temperature interval for rain/snow mixing [°C].\nThe snowfall (\\(SF\\)) is used as input for the snow pack, varying its content as a function of melt or freezing. The snowmelt calculation is performed as follows:\n\\[\nM_{sn} =\n  \\begin{cases}\n    CFMax \\cdot (T - TTSM)               & \\quad \\text{if } T > TTSM \\\\\n    CFR \\cdot CFMax \\cdot (T - TTSM)     & \\quad \\text{if } T \\leq TTSM\n  \\end{cases}\n\\qquad(8.70)\\] \\[\n\\mathrm{d}H_{snow}/\\mathrm{d}t = SF - M_{sn} , \\quad M_{sn} \\leq SF + H_{snow}/\\mathrm{d}t, \\quad M_{sn} \\geq - W_{snow}/\\mathrm{d}t\n\\qquad(8.71)\\]\nwith \\(M_{sn}\\): snowmelt or freezing [L/T]; \\(CFMax\\): degree-day melting factor [L/T/°C]; \\(CFR\\): refreezing factor [-]; \\(TTSM\\): critical snowmelt temperature [°C]; \\(H_{snow}\\): snow height [L]; \\(W_{snow}\\): water content [L]; \\(dt\\): time step [T].\nThe equivalent precipitation (\\(P_{eq}\\)) is produced by the water content of the snow (Equation 8.72 to Equation 8.74):\n\\[\nWH = W_{snow}/H_{snow}\n\\qquad(8.72)\\] \\[\nP_{eq} =\n  \\begin{cases}\n    RF + W_{snow}/\\mathrm{d}t                      & \\quad \\text{if } H_{snow} = 0 \\\\\n    0                                     & \\quad \\text{if } H_{snow} > 0 \\text { and } WH \\leq CWH \\\\\n    (\\ WH - \\ CWH) \\cdot H_{snow}/\\mathrm{d}t      & \\quad \\text{if } H_{snow} > 0 \\text { and } WH > CWH\n  \\end{cases}\n\\qquad(8.73)\\] \\[\n\\mathrm{d}W_{snow}/\\mathrm{d}t = RF + M_{sn} - P_{eq}\n\\qquad(8.74)\\]\nwith \\(WH\\): relative water content in the snow pack [-]; \\(CWH\\): critical relative water content in the snow pack [-]; \\(P_{eq}\\): equivalent precipitation [L/T].\nThe snow water equivalent is then the addition of \\(H_{snow}\\) and \\(W_{snow}\\) (Equation 8.75):\n\\[\nSWE = H_{snow} + W_{snow}\n\\qquad(8.75)\\]\nwith \\(SWE\\): snow water equivalent [L].\nThe calculation of the recharge is carried out depending on a model parameter \\(Beta\\), as presented in Equation 8.115. \\(ETR\\) is calculated as shown in Equation 8.116. Finally, the humidity of the soil (\\(Hum\\)) is performed taking into account the input (Equivalent precipitation, \\(P_{eq}\\)) and outputs (Recharge intensity and \\(ETR\\)) as presented in Equation 8.117. Additionally, and based on Seibert (1997), parameter \\(PWP\\) is a rate related to parameter \\(FC\\). Thus, the height of the soil permanent wilting point threshold is calculated multiplying \\(PWP\\) by \\(FC\\).\n\\[\ni_{Recharge} = \\Bigg( \\frac{Hum}{FC} \\Bigg)^{Beta} \\cdot P_{eq}\n\\qquad(8.76)\\] \\[\nETR =\n  \\begin{cases}\n    ETP \\cdot \\frac{Hum}{(PWP \\cdot FC)}      & \\quad \\text{if } Hum < (PWP \\cdot FC) \\\\\n    ETP                                       & \\quad \\text{if } Hum \\geq (PWP \\cdot FC)\n  \\end{cases}\n\\qquad(8.77)\\] \\[\n\\frac{dHum}{dt} = (P_{eq} - i_{Recharge}) - ETR, \\quad Hum \\geq 0\n\\qquad(8.78)\\]\nwith \\(i_{Recharge}\\): Reservoir recharge intensity [L/T]; \\(Hum\\): Humidity [L]; \\(FC\\): Maximum soil storage capacity [L]; \\(Beta\\): Model parameter (shape coefficient) [-]; \\(P_{eq}\\): Equivalent precipitation [L/T]; \\(ETR\\): Evapotranspiration [L/T]; \\(ETP\\): Potential evapotranspiration [L/T]; \\(PWP\\): Soil permanent wilting point threshold [-].\nThen, near surface (or run-off) flow is calculated depending on the water level in the Upper reservoir (\\(SU\\)) and its threshold, as well as on a flow storage coefficient \\(K_r\\).\n\\[\nQ_r =\n  \\begin{cases}\n    K_{r} \\cdot (SU - SU_{Max}) \\cdot A       & \\quad \\text{if } SU > SU_{Max} \\\\\n    0                                         & \\quad \\text{if } SU \\leq SU_{Max}\n  \\end{cases}\n\\qquad(8.79)\\]\nwith \\(Q_r\\): Near surface flow (or run-off flow) [L3/T]; \\(K_r\\): Near surface flow storage coefficient [1/T]; \\(SU\\): Upper reservoir water level [L]; \\(SU_{Max}\\): Upper reservoir water level threshold [L]; \\(A\\): Basin surface [L2].\nThe Upper reservoir (or interflow reservoir), corresponding to the upper soil storage and producing the interflow, is computed as follows:\n\\[\n\\frac{dSU}{dt} = i_{Recharge} - (K_{perc} + K_{u}) \\cdot SU - \\frac {Q_{r}}{A} , \\quad SU \\geq 0 \\\\\n\\qquad(8.80)\\] \\[\ni_{Perc} = K_{perc} \\cdot SU\n\\qquad(8.81)\\] \\[\nQ_{u} = K_{u} \\cdot SU \\cdot A\n\\qquad(8.82)\\]\nwith \\(K_{perc}\\): Percolation storage coefficient [1/T]; \\(K_u\\): Interflow storage coefficient [1/T]; \\(i_{Perc}\\): Percolation intensity [L/T]; \\(Q_u\\): Interflow [L3/T].\nAfterwards, the lower reservoir (or baseflow reservoir), corresponding to the lower soil storage, is calculated as presented in Equation 8.83 and Equation 8.84.\n\\[\n\\mathrm{d}SL/\\mathrm{d}t = i_{Perc} - K_{l} \\cdot SL , \\quad SL \\geq 0\n\\qquad(8.83)\\] \\[\nQ_{l} = K_{l} \\cdot SL \\cdot A\n\\qquad(8.84)\\]\nwith \\(SL\\): Lower reservoir water level [L]; \\(K_l\\): Baseflow storage coefficient [1/T]; \\(Q_l\\): Baseflow [L3/T].\nAnd finally the total outflow is:\n\\[\nQ_{tot} = Q_{r} + Q_{u} + Q_{l}\n\\qquad(8.85)\\]\nwith \\(Q_{tot}\\): Total outflow [L3/T].\nThe initial conditions associated to this model are \\(SWE_{Ini}\\), \\(WH_{Ini}\\), \\(Hum_{Ini}\\), \\(SU_{Ini}\\) and \\(SL_{Ini}\\). The parameters to adjust are \\(CFMax\\), \\(CFR\\), \\(CWH\\), \\(TT\\), \\(TTInt\\), \\(TTSM\\), \\(Beta\\), \\(FC\\), \\(PWP\\), \\(SU_{Max}\\), \\(K_r\\), \\(K_u\\), \\(Kl\\) and \\(K_{perc}\\). The parameter \\(A\\) is supposed to be constant.\nThe model inputs are the precipitation (\\(P\\)), the temperature (\\(T\\)) and the potential evapotranspiration (\\(ETP\\)). The output is the total discharge at the model outlet (\\(Q_{tot}\\))."
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_gr4j",
    "href": "tech_hydrological_models.html#sec-model_gr4j",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.8 GR4J model description",
    "text": "8.8 GR4J model description\nThe GR4J model is a global hydrological model with four parameters developed by Perrin, Michel, and Andréassian (2003). It is an empirical model (Figure 8.8), but its structure is similar to the conceptual models. It takes into account the humidity and contains two reservoirs (production and routing). Unit hydrographs are also associated for the hydrological behaviour of the basin.\n\n\n\nFigure 8.8: GR4J Model\n\n\n\n\nTable 8.7: List of parameters and initial conditions for the GR4J model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of the basin\n>0\n\n\nX1\nm\nCapacity of production store\n0.01 to 1.2\n\n\nX2\nm\nWater exchange coefficient\n-0.005 to 0.003\n\n\nX3\nm\nCapacity of routing store\n0.01 to 0.5\n\n\nX4\nd\nUH time base\n-0.5 to 1\n\n\nSIni\nm\nInitial water content in the production reservoir\n-\n\n\nRIni\nm\nInitial water level in the routing reservoir\n-\n\n\n\n\nThe first calculation is the neutralization of \\(P_{eq}\\) by \\(ETP\\) for determining a net intensity (\\(P_n\\)) and a net evapotranspiration (\\(E_n\\)) according to Equation 8.86 and Equation 8.87.\n\\[\nP_n =\n  \\begin{cases}\n    P_{eq} - ETP       & \\quad \\text{if } P \\geq ETP \\\\\n    0                  & \\quad \\text{if } P < ETP\n  \\end{cases}\n\\qquad(8.86)\\] \\[\nE_n =\n  \\begin{cases}\n    0                  & \\quad \\text{if } P \\geq ETP \\\\\n    ETP - P_{eq}       & \\quad \\text{if } P < ETP\n  \\end{cases}\n\\qquad(8.87)\\]\nwith \\(P_n\\): net rain intensity [L/T]; \\(P_{eq}\\): Equivalent precipitation [L/T]; ETP: potential evapotranspiration [L/T]; \\(E_n\\): net evapotranspiration [L/T].\nWhen \\(P_n\\) is not zero, a part (\\(P_s\\)) of \\(P_n\\) feed the production reservoir (\\(S\\)) as presented in Equation 8.88. Similarly, when \\(E_n\\) is not zero, an evapotranspiration (\\(E_s\\)) from the production reservoir is calculated depending on the water level in the production reservoir as described in Equation 8.89.\n\\[\nP_s = \\frac{\\mathrm{d}}{\\mathrm{d} t} \\frac {X1 \\cdot \\bigg( 1-{( \\frac{S}{X1})}^{2} \\bigg) \\cdot tanh \\Big( \\frac{P_n \\cdot dt}{X1} \\Big)}{1 + \\frac{S}{X1} \\cdot tanh\\Big( \\frac{P_n \\cdot dt}{X1} \\Big)}\n\\qquad(8.88)\\] \\[\nE_s = \\frac{\\mathrm{d}}{\\mathrm{d} t} \\frac {S \\cdot  \\bigg( 2- \\frac{S}{X1} \\bigg) \\cdot tanh \\Big( \\frac{E_n \\cdot dt}{X1} \\Big)}{1 + \\Big( 1 - \\frac{S}{X1} \\Big) \\cdot tanh\\Big( \\frac{E_n \\cdot dt}{X1} \\Big)}\n\\qquad(8.89)\\]\nwith \\(P_s\\): rain intensity feeding the production reservoir [L/T]; \\(X1\\): maximum capacity of production reservoir \\(S\\) [L]; \\(S\\): water content in the production reservoir [L]; \\(E_s\\): evapotranspiration from the production reservoir [L/T].\nThe percolation (\\(i_{Perc}\\)) flowing from the production reservoir is then calculated as follows:\n\\[\ni_{Perc} = \\frac {\\mathrm{d}}{\\mathrm{d} t} \\big( S + (P_s - E_s) \\cdot dt \\big) \\cdot \\Bigg( 1 - \\bigg( 1 + \\Big( \\frac{4}{9} \\cdot \\frac{ S + (P_s - E_s) \\cdot dt}{X1} \\Big)^{4} \\bigg)^{- \\frac{1}{4}} \\Bigg)\n\\qquad(8.90)\\]\nwith \\(i_{Perc}\\): percolation intensity [L/T].\nFinally, the variation in the production reservoir \\(S\\) is obtained according to Equation 8.91:\n\\[\n\\frac {\\mathrm{d} S}{\\mathrm{d} t} = P_s - E_s - i_{Perc} , \\quad S \\geq 0\n\\qquad(8.91)\\]\nThe quantity of water (\\(i_{Pr}\\)) which goes to the routing reservoir is provided by:\n\\[\ni_{Pr} = i_{Perc} + (P_n - P_s)\n\\qquad(8.92)\\]\nwith \\(i_{Pr}\\): intensity flowing to the routing reservoir [L/T].\nAfterwards, for the calculation of unit hydrographs, \\(i_{Pr}\\) is divided in two flow components: 90% are routed by a unit hydrograph UH1 and a routing reservoir and 10% by a symmetrical unit hydrograph UH2. UH1 and UH2 depend on parameter \\(X4\\), which is the base time.\nThe ordinates of the hydrographs are calculated from curves SH1 and SH2, which correspond to the cumulated hydrograph. SH1 and SH2 are defined depending on the time step \\(t\\) as presented in Equation 8.93 and Equation 8.94. The ordinates of UH1 and UH2 are then calculated.\n\\[\nSH1_{t} =\n  \\begin{cases}\n    0                                              & \\quad \\text{if } t \\leq 0 \\\\\n    \\bigg( \\frac{t}{X4} \\bigg)^{\\frac{5}{2}}       & \\quad \\text{if } 0 < t < X4 \\\\\n    1                                              & \\quad \\text{if } t \\geq X4\n  \\end{cases}\n\\qquad(8.93)\\] \\[\nSH2_{t} =\n  \\begin{cases}\n    0                                                                      & \\quad \\text{if } t \\leq 0 \\\\\n    \\frac{1}{2} \\cdot \\bigg( \\frac{t}{X4} \\bigg)^{\\frac{5}{2}}             & \\quad \\text{if } 0 < t < X4 \\\\\n    1 - \\frac{1}{2} \\cdot \\bigg( 2 - \\frac{t}{X4} \\bigg)^{\\frac{5}{2}}     & \\quad \\text{if } X4 < t < 2 \\cdot X4 \\\\\n    1                                                                      & \\quad \\text{if } t \\geq 2 \\cdot X4 \\\\\n  \\end{cases}\n\\qquad(8.94)\\] \\[\nUH1_{j} = SH1_{j} - SH1_{j - 1}\n\\qquad(8.95)\\] \\[\nUH2_{j} = SH2_{j} - SH2_{j - 1}\n\\qquad(8.96)\\]\nwith \\(SH1\\): hydrograph 1 from \\(S\\) [-]; \\(SH2\\): hydrograph 2 from \\(S\\) [-]; \\(t\\): time step [T]; \\(X4\\): base time [T]; \\(UH1\\): hydrograph from SH1 [-]; \\(UH2\\): hydrograph from \\(SH2\\) [-].\nThen, at each time step \\(k\\), outflows \\(Q9\\) and \\(Q1\\) from the two hydrographs correspond to the convolution of previous intensities according to the repartition provided by the discretized hydrograph and calculated as presented in Equation 8.97 and Equation 8.98.\n\\[\nQ9 = 0.9 \\cdot \\sum_{j = 1}^{l} ( UH1_{j} \\cdot {i_{Pr}}_{k - j - l})\n\\qquad(8.97)\\] \\[\nQ1 = 0.1 \\cdot \\sum_{j = 1}^{m} ( UH2_{j} \\cdot {i_{Pr}}_{k - j - l})\n\\qquad(8.98)\\]\nwith \\(Q9\\): Unitary flow from the UH1 hydrograph; [L/T]; \\(Q1\\): Unitary flow from the UH2 hydrograph [L/T]; \\(j\\): day (integer) [T]; \\(l\\): integer value of \\(X4 + 1\\) [T]; \\(m\\): integer value of \\(2 \\cdot X4+1\\) [T].\nThen, an exchange function (\\(i_F\\)) with the non-atmospheric outside produces an underground water exchange according to Equation 8.99 (physical interpretation of this function is not direct). Then, the routing reservoir (\\(R\\)) is emptied by a routing discharge (\\(Q_{r'}\\)) as described in Equation 8.100.\n\\[\ni_F = \\frac{\\mathrm{d}}{\\mathrm{d} t}X2 \\cdot \\bigg( \\frac{R}{X3} \\bigg)^{\\frac{7}{2}}\n\\qquad(8.99)\\] \\[\nQ_{r'} = \\frac{\\mathrm{d}}{\\mathrm{d} t} \\big( R + (Q9 + iF) \\cdot dt \\big) \\cdot \\Bigg( 1 - \\bigg( 1 + \\Big( \\frac{R + (Q9 + iF) \\cdot dt}{X3} \\Big)^{4} \\bigg)^{- \\frac{1}{4}} \\Bigg)\n\\qquad(8.100)\\]\nwith \\(i_F\\): exchange function [L/T]; \\(X2\\): water exchange coefficient, positive for contributions, negative for losses due to infiltration or zero when no exchange is produced [L]; \\(R\\): water level in the routing reservoir [L]; \\(X3\\): one day capacity of routing reservoir [L]; \\(Q_{r'}\\): unitary routing reservoir outflow [L/T].\nThe variation of the water level in the routing reservoir is:\n\\[\n\\mathrm{d}R/\\mathrm{d}t = Q9 - i_F - Q_{r'} , \\quad R \\geq 0\n\\qquad(8.101)\\]\nThe outflow \\(Q1\\) from hydrograph UH2 has also the same exchange for providing the complementary flow \\(Q_{d'}\\):\n\\[\nQ_{d'} = Q1 + i_F\n\\qquad(8.102)\\]\nwith \\(Q_{d'}\\): unitary complementary outflow [L/T].\nFinally, the model outflows are calculated as presented in Equation 8.103 and Equation 8.104 and the total flow at the outlet, \\(Q_{tot}\\), as presented in Equation 8.105:\n\\[\nQ_r = Q_{r'} \\cdot A\n\\qquad(8.103)\\] \\[\nQ_d = Q_{d'} \\cdot A\n\\qquad(8.104)\\] \\[\nQ_{tot} = Q_r + Q_d\n\\qquad(8.105)\\]\nwith \\(Q_r\\): outflow from the routing reservoir [L3/T]; \\(A\\): Basin surface [L2]; \\(Q_d\\): complementary outflow [L3/T]; \\(Q_{tot}\\): total outflow [L3/T].\nThe variables associated to this model are \\(S_{Ini}\\) and \\(R_{Ini}\\). The parameters to adjust are \\(X1\\), \\(X2\\), \\(X3\\) and \\(X4\\). The parameter \\(A\\) is supposed to be constant.\nThe model inputs are the equivalent precipitation (\\(P_{eq}\\)) and the potential evapotranspiration (\\(ETP\\)). The output is the total discharge at the model outlet (\\(Q_{tot}\\))."
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_sac_sma",
    "href": "tech_hydrological_models.html#sec-model_sac_sma",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.9 SAC-SMA model description",
    "text": "8.9 SAC-SMA model description\nThe SAC-SMA (Figure 8.9) or SACRAMENTO hydrological model was developed in the 70’s (R. L. Burnash Ferral 1973; R. J. C. Burnash 1995) to optimize humidity characteristics into the soil, distributed into different level, with rational percolation characteristics, for an efficient simulation of discharges. This model calculates the total discharge from the precipitation (\\(P\\)) and the potential evapotranspiration (\\(ETP\\)) depending on the parameters and initial conditions presented in Table 8.8.\n\n\n\nFigure 8.9: SAC-SMA Model\n\n\n\n\nTable 8.8: List of parameters and initial conditions for the SAC-SMA model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of the basin\n>0\n\n\nAdimp\n-\nMaximum fraction of an additional impervious area due to saturation\n0 to 0.2\n\n\nPctim\n-\nPermanent impervious area fraction\n0 to 0.05\n\n\nRiva\n-\nRiparian vegetarian area fraction\n0 to 0.2\n\n\nUztwMax\nm\nUpper Zone Tension Water capacity\n0.01 to 0.15\n\n\nUzfwMax\nm\nUpper Zone Free Water capacity\n0.005 to 0.10\n\n\nUzk\n1/d\nInterflow depletion rate from the Upper Zone Free Water storage\n0.10 to 0.75\n\n\nZperc\n-\nRatio of maximum and minimum percolation rates\n10 to 350\n\n\nRexp\n-\nShape parameter of the percolation curve\n1 to 4\n\n\nPfree\n-\nPercolation fraction that goes directly to the Lower Zone Free Water storages\n0 to0.6\n\n\nLztwMax\nm\nThe Lower Zone Tension Water capacity\n0.05 to 0.40\n\n\nLzfpMax\nm\nThe Lower Zone primary Free Water capacity\n0.03 to 0.80\n\n\nLzfsMax\nm\nThe Lower Zone supplementary Free Water capacity\n0.01 to 0.40\n\n\nRserv\n-\nFraction of Lower Zone Free Water not transferable to Lower Zone Tension Water\n0 to 1\n\n\nLzpk\n1/d\nDepletion rate of the Lower Zone primary Free Water storage\n0.001 to 0.03\n\n\nLzsk\n1/d\nDepletion rate of the Lower Zone supplemental Free Water storage\n0.02 to 0.3\n\n\nSide\n-\nRatio of deep percolation from Lower Zone Free Water storages\n0 to 0.5\n\n\nAdimIni\nm\nInitial Tension Water content of the Adimp area\n-\n\n\nUztwIni\nm\nInitial Upper Zone Tension Water content\n-\n\n\nUzfwIni\nm\nInitial Upper Zone Free Water content\n-\n\n\nLztwIni\nm\nInitial Lower Zone Tension Water content\n-\n\n\nLzfpIni\nm\nInitial Lower Zone Free supplementary content\n-\n\n\nLzfsIni\nm\nInitial Lower Zone Free primary content\n-\n\n\n\n\nWhen considering rainfall over a basin, two basic basin areas are taken into account:\n\nAn impervious portion of the soil mantle covered by streams, lake surfaces, marshes and other impervious material directly linked to the streamflow network. This area produces impervious and direct runoff \\(Q_{DirectRunoff}\\) from any rainfall.\nA pervious portion of the soil mantle which distributes rainwater to the next storages. In addition, the pervious area can produce runoff when rainfall rates are sufficiently heavy.\n\nThe basin may present permanent or temporarily impervious areas, determined by:\n\nThe permanent impervious area fraction (\\(P_{ctim}\\)).\nThe maximum fraction of an additional impervious area due to saturation (\\(A_{dimp}\\)). It represents the maximum portion of reservoirs and temporary watersheds contained in the basin.\n\nThus, the permanent pervious area fraction of the basin is calculated following Equation 8.106.\n\\[\nP_{area} = 1 - (P_{ctim} + A_{dimp})\n\\qquad(8.106)\\]\nwith \\(P_{area}\\): permanent pervious area fraction of the basin [-]; \\(P_{ctim}\\): permanent impervious area fraction [-]; \\(A_{dimp}\\): maximum fraction of an additional impervious area due to saturation [-].\nIt is worth mentioning that the behaviour of the additional impervious area might be purely pervious, purely impervious or mixed, depending on the storage of the permanent pervious and impervious areas. The pervious capacity (or fraction) of this area will decrease as the rainfall grows.\nAs shown in Figure 8.9, the SAC model divides the soil in 2 zones:\n\nAn Upper Zone, sub-divided in two areas that receive the infiltrated water from rainfall.\nA Lower Zone, sub-divided in 3 reservoirs, where the input is the percolation from the Upper Zone.\n\nThe main components of the model and their flow transfers are described below.\nUpper Zone Tension Water storage\nThis storage represents the water bound by adhesion and cohesion in between the soil pores as well as the water intercepted by vegetation. The water can be only consumed by evapotranspiration.\nThe water that reaches this reservoir comes from the rain felt into the pervious area of the basin, but also from transfers from the Upper Zone Free Water storage.\nThe following concepts are defined for this reservoir:\n\nThe Upper Zone Tension Water Maximum capacity (\\(Uztw_{Max}\\)) is the maximum Tension Water storage admissible in the Upper Zone.\nThe Upper Zone Tension Water Content (\\(UztwC\\)) is the Tension Water stored in this Upper Zone at any given time.\n\nIf the relative content of Tension Water (ratio between its content and its maximum storage) is smaller than the relative content of Free Water, a transfer is produced from the Free Water storage to the Tension Water storage. The expressions of these ratios and the infiltration transfer are shown in Equation 8.107 to Equation 8.109:\n\\[\nT = \\frac{UztwC}{Uztw_{Max}}\n\\qquad(8.107)\\] \\[\nF = \\frac{UzfwC}{Uzfw_{Max}}\n\\qquad(8.108)\\] \\[\nUztr =\n  \\begin{cases}\n    \\mathrm{d} \\bigg( \\frac{UzfwC \\cdot Uztw_{Max} - UztwC \\cdot Uzfw_{Max}}{Uzfw_{Max} + Uztw_{Max}} \\bigg) / \\mathrm{d}t      & \\quad \\text{if } T < F \\\\\n    0                                                                                                                           & \\quad \\text{if } T \\geq F\n  \\end{cases}\n\\qquad(8.109)\\]\nwith \\(T\\): relative content of Upper Zone Tension Water [-]; \\(F\\): relative content of Upper Zone Free Water [-]; \\(Uztr\\): infiltration transfer from the Free Water storage to the Tension Water storage [L/T]; \\(UztwC\\): the Upper Zone Tension Water storage [L]; \\(Uztw_{Max}\\): the Upper Zone Tension Water capacity [L]; \\(UzfwC\\): the Upper Zone Free Water storage [L]; \\(Uzfw_{Max}\\): the Upper Zone Free Water capacity [L].\nAlthough free water is present during filling of Upper Zone Tension Water (by infiltration), this free water is rapidly transformed into Upper Zone Tension Water until tension water relative content requirements are satisfied.2\nIn addition, when the Upper Zone Tension Water volume has been filled, excess moisture above the Upper Zone Tension Water capacity is accumulated in the Upper Zone Free Water.\nUpper Zone Free Water storage\nThis storage represents the water not attached to the soil particles and free to move under gravitational forces. The water that reaches this reservoir comes from the infiltration of the Upper Zone Tension Water storage\nThe following concepts are defined:\n\nThe Upper Zone Free Water Maximum capacity (\\(Uzfw_{Max}\\)) is the maximum Free Water storage admissible in the Upper Zone.\nThe Upper Zone Free Water Content (\\(UzfwC\\)) is the Free Water stored in the Upper Zone at any given time.\nThe Interflow depletion rate (\\(Uzk\\)) represents the portion of the Upper Zone Free Water that is transferred outside as interflow.\n\nThe water may be depleted by evapotranspiration, percolation to the Lower Zone or horizontal flow (surface runoff and interflow).\nOn the one hand, the percolation to the Lower Zone is computed prior to the interflow computation as it is its preferred path. It depends on the deficiency of the Lower Zone moisture volumes, on the soil properties, and on the water relative storage in this reservoir. The first 2 factors define the percolation demand from the Lower Zone (\\(DDA\\)). This demand represents the percolation in case of total percolation availability on the Upper Zone Free Water storage.\n\\[\nP_{Base} = Lzfp_{Max} \\cdot Lzpk + Lzfs_{Max} \\cdot Lzsk\n\\qquad(8.110)\\] \\[\nDEFR = \\frac{(Lztw_{Max} - LztwC) + (Lzfp_{Max} - LzfpC) + (Lzfs_{Max} - LzfsC)}{Lztw_{Max} + Lzfp_{Max} + Lzfs_{Max}}\n\\qquad(8.111)\\] \\[\nDDA = P_{Base} \\cdot (1 + Zperc \\cdot {DEFR}^{Rexp})\n\\qquad(8.112)\\]\nwith \\(P_{Base}\\): the continuing percolation rate under saturated condition (maximal percolation) [L/T]; \\(DDA\\): Lower Zone maximum percolation demand [L/T]; \\(Zperc\\): ratio of maximum and minimum percolation rates [-]; \\(DEFR\\): relative Lower Zone water deficiency [-]; \\(Rexp\\): shape parameter of the percolation curve [-].\nThe effective percolation depends on the percolation demand and the ratio between the Upper Zone Free Water content and the Upper Zone Free Water capacity as shown in Equation 8.113. In addition, the effective percolation is limited by the humidity content in the Upper Zone and also by the deficiency in the Lower Zone (Equation 8.114 and Equation 8.115 respectively):\n\\[\nPERC = DDA \\cdot \\frac{UzfwC}{Uzfw_{Max}}\n\\qquad(8.113)\\] \\[\nPERC \\leq \\mathrm{d}(UzfwC)/\\mathrm{d}t\n\\qquad(8.114)\\] \\[\nPERC \\leq \\mathrm{d} \\Big( (Lztw_{Max} - LztwC) + (Lzfp_{Max} - LzfpC) + (Lzfs_{Max} - LzfsC) \\Big) / \\mathrm{d}t\n\\qquad(8.115)\\]\nwith \\(PERC\\): real percolation [L/T]; \\(DDA\\): Lower Zone maximum percolation demand [L/T]; \\(UzfwC\\): Upper Zone Free Water content [L]; \\(Uzfw_{Max}\\): Upper Zone Free Water capacity [L].\nOn the other hand, the interflow occurs only when the rate of precipitation exceed the rate at which downward motion can occur from the Upper Zone Free Water. It depends on the water content and on its interflow depletion rate \\(Uzk\\), as shown in Equation 8.116:\n\\[\nQ_{interflow} = Uzk \\cdot UzfwC \\cdot P_{area} \\cdot A\n\\qquad(8.116)\\]\nwith \\(Q_{interflow}\\): interflow [L3/T]; \\(Uzk\\): interflow depletion rate from the Upper Zone Free water storage [T-1]; \\(UzfwC\\): Upper Zone Free Water content [L]; \\(P_{area}\\): pervious area fraction of the basin [-]; \\(A\\): surface of the basin [L2].\nMoreover, when the Upper Zone Free Water storage is completely full and the precipitation intensity exceeds both the percolation rate and the maximum interflow drainage capacity, the excess precipitation results in surface runoff \\(Q_{SurfRunoff}\\).\nLower Zone Tension Water storage\nThis storage represents the semi-saturated zone. It characterizes the volume of moisture in the lower soils which will be claimed by dry soil particles when moisture from a wetting front reaches that depth. The water is consumed through evapotranspiration, proportionally to the remaining ETP of the Upper Zone Tension Water storage.\nThe water reaching this reservoir comes from the Upper Zone percolation. One fraction (\\(Pfree\\)) of this percolation goes directly to the Free Water storages, even if the Tension Water storage is not yet full, and the other fraction (\\(1-Pfree\\)) goes to the Tension Water storage of the Lower Zone 3. The water also reaches this storage from transfers between the other Lower Zone Free Water storages.\nThe following concepts are defined:\n\nThe Lower Zone Tension Water Maximum capacity (\\(Lztw_{Max}\\)) is the maximum Tension Water storage admissible in the Lower Zone.\nThe Lower Zone Tension Water Content (\\(LztwC\\)) is the Tension Water stored in the Lower Zone at any given time.\n\nIf the relative content of Tension Water (ratio between its content and its maximum storage) is smaller than the relative content of Free Water, the incoming excess is transferred from Free Water to Tension Water. The expressions of both ratios are shown in Equation 8.117 to Equation 8.119:\n\\[\nRFW = Rserv \\cdot (LzfpMax + Lzfs_{Max})\n\\qquad(8.117)\\] \\[\nT = \\frac{LztwC}{Lztw_{Max}}\n\\qquad(8.118)\\] \\[\nF = \\frac{LzfpC + LzfsC - RFW}{Lzfp_{Max} + Lzfs_{Max} - RFW}\n\\qquad(8.119)\\]\nwith \\(T\\): relative content of Lower Zone Tension Water [-]; \\(F\\): relative content of Lower Zone Free Water [-]; \\(RFW\\): Lower Zone Free Water not transferable to Lower Zone Tension Water, susceptible to become baseflow [L]; \\(Rserv\\): fraction of Lower Zone Free Water not transferable to Lower Zone Tension Water[-].\nIf the relative content of the Lower Zone Tension Water is smaller than the relative fullness of the global Lower Zone, a water transfer DEL occurs from the Lower Zone Free Supplementary reservoir to the Lower Zone Tension Water reservoir, as described by the following equations:\n\\[\nR = \\frac{LzfpC + LzfsC + LztwC - RFW}{Lzfp_{Max} + Lzfs_{Max} + Lztw_{Max} - RFW}\n\\qquad(8.120)\\] \\[\nDEL = Lztw_{Max} \\cdot \\mathrm{d}(R - T)/\\mathrm{d}t\n\\qquad(8.121)\\]\nwith \\(DEL\\): the Free-Tension Water transfer in the Lower Zone [L/T]; \\(R\\): ratio between the available water for evapotranspiration and the total water content, in the whole Lower Zone [-]; \\(RFW\\): Lower Zone Free Water not transferable to Lower Zone Tension Water, susceptible to become baseflow [L].\nLower Zone Primary and Supplementary Free Water storages\nThis storage represents the saturated zone of the subsoil, i.e. the aquifer. There are two types of Lower Zone Free Water: a primary type with a very slow draining providing baseflow over long periods of time, and a supplementary type which supplements the baseflow after a period of relatively recent rainfall.\nThe water that reaches these storages comes from the \\(Pfree\\) fraction of the percolation of the Upper Zone Free Water. This fraction is distributed into the primary and supplementary storages according to their deficiency of water.\nThe following concepts are defined:\n\nThe Lower Zone primary Free Water Maximum capacity (\\(Lzfp_{Max}\\)) is the maximum primary water storage admissible in the Lower Zone.\nThe Lower Zone primary Free Water Content (\\(LzfpC\\)) is the primary Free Water stored in the Lower Zone at any given time.\nThe Depletion rate of the Lower Zone primary Free Water storage (\\(Lzpk\\)) is the portion of primary Free Water that drains as baseflow per day.\nThe Lower Zone supplementary Free Water Maximum capacity (\\(LzfsMax\\)) is the maximum supplementary water storage admissible in the Lower Zone.\nThe Lower Zone supplementary Free Water Content (\\(LzfsC\\)) is the supplementary Free Water stored in the Lower Zone at any given time.\nThe Depletion rate of the Lower Zone supplementary Free Water storage (\\(Lzsk\\)) is the portion of supplementary Free Water that drains as baseflow per day.\n\nThe drained water leaving these two storages (primary flow \\(Q_{primary}\\) and supplementary flow \\(Q_{supplementary}\\)) follows the Darcy’s law and forms the baseflow of the Lower Zone \\(Q_{Lower\\ Zone}\\) as shown in Equation 8.122 to Equation 8.124:\n\\[\nQ_{primary} = Lzpk \\cdot LzfpC \\cdot P_{area} \\cdot A\n\\qquad(8.122)\\] \\[\nQ_{supplementary} = Lzsk \\cdot LzfsC \\cdot P_{area} \\cdot A\n\\qquad(8.123)\\] \\[\nQ_{Lower\\ Zone} = Q_{primary} + Q_{supplementary}\n\\qquad(8.124)\\]\nwith \\(Q_{primary}\\): primary baseflow [L3/T]; \\(Q_{supplementary}\\): supplementary baseflow [L3/T]; \\(Q_{Lower\\ Zone}\\): total baseflow produced in the Lower Zone [L3/T]; \\(Lzpk\\): depletion rate of the Lower Zone primary Free Water storage [T-1]; \\(LzfpC\\): Lower Zone primary Free Water Content [L]; \\(Lzsk\\): depletion rate of the Lower Zone supplementary Free Water storage [T-1]; \\(LzfsC\\): Lower Zone supplementary Free Water Content [L]; \\(P_{area}\\): pervious area fraction of the basin [-]; \\(A\\): surface of the basin [L2].\nThe model allows including baseflow losses, called subsurface flow \\(Q_{SubSurf}\\), due to the existence of geological faults, fractured rocks, etc. that lead to filtrations throughout the aquifer. The \\(Side\\) parameter captures these losses as shown in Equation 8.125:\n\\[\nQ_{SubSurf} = Side \\cdot Q_{baseflow}\n\\qquad(8.125)\\]\nwith \\(Side\\): ratio of deep percolation from Lower Zone Free Water storages [-], \\(Q_{baseflow}\\): Lower Zone Free Water volume actually integrated to the channel outflow hydrographs [L3/T]; \\(Q_{SubSurf}\\): discharge lost into the aquifer [L3/T].\nAnd so this \\(Side\\) parameter is used to correct the baseflow as follows:\n\\[\nQ_{baseflow} = \\frac{Q_{Lower\\ Zone}}{1 + Side}\n\\qquad(8.126)\\] \\[\nQ_{SubSurf} = Side \\cdot \\frac{Q_{Lower\\ Zone}}{1 + Side}\n\\qquad(8.127)\\]\nEvapotranspiration\nThe real evapotranspirations are obtained from each Tension Water storage, from the transfers between Free Water and Tension Water storages, from riverside vegetation and from impervious areas. They are described hereafter.\n\n\\(ETR1\\): evapotranspiration from the Upper Zone Tension Water reservoir. If this reservoir is not full, the evapotranspiration is proportional to its content (Equation 8.128):\n\n\\[\nETR1 = ETP \\cdot \\frac{UztwC}{Uztw_{Max}} \\leq UztwC\n\\qquad(8.128)\\]\nwith \\(ETP\\): potential evapotranspiration [L/T].\nThe remaining evapotranspiration demand \\(RED\\) and the updated content of water in the Upper Zone Tension Water reservoir \\(UztwC\\) are then calculated:\n\\[\nRED = ETP - ETR1\n\\qquad(8.129)\\] \\[\n\\mathrm{d}(UztwC)/\\mathrm{d}t = - ETR1\n\\qquad(8.130)\\]\n\n\\(ETR2\\): evapotranspiration from the Upper Zone Free Water reservoir. This evapotranspiration is equal to the remaining \\(RED\\) left by the Tension Water reservoir, but it is limited by the Upper Zone Free Water content \\(UzfwC\\):\n\n\\[\nETR2 = min \\big( RED ; \\mathrm{d}(UzfwC)/\\mathrm{d}t \\big)\n\\qquad(8.131)\\]\nThen, the remaining evapotranspiration \\(REDLz\\) from the Lower Zone is:\n\\[\nREDLz = RED - ETR2\n\\qquad(8.132)\\]\nThe variation of the water content \\(UzfwC\\) in the Upper Zone Free Water reservoir is defined as follows:\n\\[\n\\mathrm{d}(UzfwC)/\\mathrm{d}t = - ETR2\n\\qquad(8.133)\\]\n\n\\(ETR3\\): evapotranspiration from the Lower Zone Tension Water reservoir. The evapotranspiration availability corresponds to the remaining evapotranspiration demand in the Lower Zone. Evapotranspiration in this reservoir is proportional to the remaining evapotranspiration and to the Lower Zone Tension Water content, and inversely proportional to the Tension Water reservoirs’ capacity of the Upper Zone and the Lower Zone:\n\n\\[\nETR3 = REDLz \\cdot \\frac{LztwC}{Uztw_{Max} + Lztw_{Max}} \\leq \\mathrm{d}(LztwC)/\\mathrm{d}t\n\\qquad(8.134)\\]\n\n\\(ETR4\\): evapotranspiration from the basin covered by riverside vegetation. Riverside vegetation absorbs the deficiency of potential evapotranspiration from the Upper Zone and the Lower Zone:\n\n\\[\nETR4 = ETP - ETR1 - ETR2 - ETR3\n\\qquad(8.135)\\]\n\n\\(ETR5\\): evapotranspiration from the impervious fraction of the basin.\n\n\\[\nETR5 = ETR1 + (RED + ETR2) \\cdot \\frac{A_{dimp}C - UztwC - V_{ETR1}}{Uztw_{Max} + Lztw_{Max}}\n\\qquad(8.136)\\] \\[\nV_{ETR1} = \\int_{t1}^{t2}{ETR1 \\cdot \\mathrm{d}t}\n\\qquad(8.137)\\]\nwith \\(A_{dimp}C\\): sum of the Upper Zone and Lower Zone Tension Water Content in the \\(A_{dimp}\\) area [-]; \\(V_{ETR1}\\): evapotranspirated water from the Upper Zone Tension Water reservoir in a time step [L].\nEach evapotranspiration value is weighted based on the portion of the basin area in which it is produced. The total evapotranspiration is finally:\n\\[\nETRtotal = \\Big( (ETR1 + ETR2 + ETR3) \\cdot P_{area} + ETR4 \\cdot Riva + ETR5 \\cdot A_{dimp} \\Big) \\cdot A\n\\qquad(8.138)\\]\nwith \\(ETRtotal\\): total evapotranspiration [L3/T]; \\(P_{area}\\): pervious area fraction of the basin [-]; \\(Riva\\): riparian vegetarian area fraction [-]; \\(Pctim\\): permanent impervious area fraction of the basin [-]; \\(A_{dimp}\\): maximum fraction of an additional impervious area due to saturation [-]; \\(A\\): surface of the basin [L2].\nA more detailed guide about the SAC-SMA equations can be found on the following National Weather Service link: http://www.nws.noaa.gov/iao/iao_SAC_SMA.php"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_scs",
    "href": "tech_hydrological_models.html#sec-model_scs",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.10 SCS (Soil Conservation Service) model description",
    "text": "8.10 SCS (Soil Conservation Service) model description\nThe Soil Conservation Service (SCS) model is a popular method developed in the early 70’s (Service 1972) for assessing an event runoff volume and peak rate of discharge using limited input data (precipitation). It is especially applicable for small watersheds.\nThe SCS model only requires precipitation as input, which provides the effective precipitation considered after the initial abstraction. The hydrograph computation is by default based on the dimensionless unit hydrograph (Figure 8.10) resulting from a 1 cm of excess rainfall. This unit hydrograph (UH) has 37.5% of the total runoff volume before the peak discharge (\\(T/T_p=1\\)) and the remaining 62.5% volume after. The shape of the default UH can be tailored in RS MINERVE.\nTo use the SCS UH, one needs to determine only two things: time to peak \\(T_p\\); and peak discharge \\(Q_p\\).\nThe total hydrograph from the rainfall event will be the addition of each hydrograph resulting from each excess rainfall, scaled by the rainfall magnitude.\n\n\n\nFigure 8.10: Curvilinear and triangular dimensionless unit hydrographs\n\n\n\n\nTable 8.9: List of parameters and initial conditions for the SCS model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of the basin\n>0\n\n\nCN\n-\nCurve Number\n30 to 100\n\n\nL\nm\nWidth of the plane\n\\(\\geq\\) 0\n\n\nJ0\n-\nRunoff slope\n\n\n\nIa\nmm\nInitial abstraction\n0 to 100000\n\n\nTI\ns\nLag time\n\\(\\geq\\) 0\n\n\n\n\nFirst, according to the SCS-CN method, we define the rainfall excess (\\(Q_e\\), in m) as:\n\\[\nQ_{e} = \\frac{(P - Ia)^{2}}{P - Ia + \\lambda} \\text{ for } P > 0.2 \\lambda , \\text{ else } Q_{e} = 0\n\\qquad(8.139)\\]\nInitial abstraction (\\(I_a\\), in m) is all losses before runoff begins. It includes water retained in surface depressions, water intercepted by vegetation, evaporation, and infiltration. If not specified, \\(I_a\\) will be derived from the Curve Number following Equation 8.140.\n\\[\nI_{a} = 0.2 \\cdot \\lambda\n\\qquad(8.140)\\]\nwith \\(\\lambda\\): potential maximum retention after runoff begins [m], given by Equation 8.141:\n\\[\n\\lambda = \\bigg( \\frac{25400}{CN} - 254 \\bigg) \\cdot \\frac{1}{1000}\n\\qquad(8.141)\\]\nwith \\(CN\\): curve number [-].\nThe UH can be solved using a simplified form of ‘triangular’ unit hydrograph. Assuming that this triangular unit hydrograph has the same 37.5% of volume on the rising side as the dimensionless UH of Figure 8.10, we can solve for the \\(T_b\\), which contains entire 100% volume of runoff:\n\\[\nT_{b} = \\frac{1}{0.375} \\cdot T_{p} = 2.67 \\cdot T_{p}\n\\qquad(8.142)\\]\n\\(T_p\\) (in h) and \\(Q_p\\) (in m3/s per unit excess rainfall) can then be derived from the triangular UH. By considering two triangles, we can write the total volume (\\(Q\\)) under the hydrograph:\n\\[\nQ = \\frac{Q_{p} \\cdot T_{p}}{2} + \\frac{Q_{p} \\cdot (T_{b} - T_{p})}{2} = \\frac{Q_{p}}{2} \\cdot 2.67 \\cdot T_{p}\n\\qquad(8.143)\\]\nSince the area under the UH is equivalent to 1 cm, we have (for 1 cm rainfall depth, with A in m2):\n\\[\n\\frac{q_{p}}{2} \\cdot 2.67T_{p} \\cdot 3600 = \\frac{A}{100}\n\\qquad(8.144)\\] \\[\nq_{p} = \\frac{2A}{100 \\cdot 3600 \\cdot 2.67T_{p}} = \\frac{2A}{3600 \\cdot 2.67 \\cdot T_{p}} \\text { per m excess rainfall}\n\\qquad(8.145)\\]\nFrom the scheme in Figure 8.10, we have the time-of-peak:\n\\[\nT_{p} = \\frac{T_{r}}{2} + T_{l}\n\\qquad(8.146)\\]\nwith \\(T_r\\) (in h) being the duration of the unit excess rainfall and \\(T_l\\) (in h) the time between the center of mass of excess rainfall and the peak of the UH. RS MINERVE numerically applies the UH to each precipitation time interval, therefore \\(T_r\\) is equal to the computation time-step \\(dT\\) in the code. If the lag time parameter (\\(T_l\\)) is not provided, SCS defines it as:\n\\[\nT_{l} = 0.6 \\cdot T_{c}\n\\qquad(8.147)\\]\nwith \\(T_c\\): the time of concentration defined in SI (in h), as:\n\\[\nT_{c} = \\frac{227 \\cdot L^{0.8}(\\lambda + 1)^{0.7}}{10^{5} \\sqrt{J0}}\n\\qquad(8.148)\\]\nwith \\(L\\): the width of plane parameter; \\(J0\\): the runoff slope parameter.\nIf \\(T_l\\) is provided, \\(T_c\\) is simply computed from Equation 8.147. We can thus compute \\(T_p\\) as:\n\\[\nT_{p} = \\frac{dT}{2} + 0.6 \\cdot T_{c}\n\\qquad(8.149)\\]\nAnd the resulting flow \\(Q_p\\) becomes (with \\(Q_e\\) the excess rainfall during the time interval \\(dT\\)):\n\\[\nQ_p = q_p \\cdot Q_e = \\frac {2.08 \\cdot 10^{-4} \\cdot A}{T_p} \\cdot Q_e\n\\qquad(8.150)\\]"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_channel_routing",
    "href": "tech_hydrological_models.html#sec-model_channel_routing",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.11 Channel routing description",
    "text": "8.11 Channel routing description\nThe channel routing can be solved by the St-Venant, Muskingum-Cunge or Kinematic wave. The three possibilities are presented hereafter and their parameters in Table 8.10.\n\n\nTable 8.10: List of parameters and initial conditions for the channel routing model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nL\nm\nLength\n>0\n\n\nB0\nm\nWidth of the channel base\n>0\n\n\nm\n-\nSide bank relation coefficient (1H/mV)\n0.1 to 1\n\n\nJ0\n-\nSlope\n>0\n\n\nK\nm1/3/s\nStrickler coefficient\n10 to 90\n\n\nN\n-\nNumber of sections (not for Lag-Time)\n>0\n\n\nLag\nmin\nLag time (only for Lag-Time)\n\\(\\geq\\) 0\n\n\nQIni\nm3/s\nInitial discharge\n-\n\n\n\n\n\nSt. Venant routing\nThe St. Venant equations solving the 1D unsteady flow are:\n\\[\n\\frac{\\partial A}{\\partial t} + \\frac{\\partial Q}{\\partial x} = 0\n\\qquad(8.151)\\] \\[\n\\frac{\\partial Q}{\\partial t} + \\frac{\\partial}{\\partial x} \\bigg( \\frac{Q^{2}}{A} + g \\cdot I_{1} \\bigg) = g \\cdot A \\cdot \\big( J_{0} - J_{f} \\big) + g \\cdot I_{2}\n\\qquad(8.152)\\]\nwith \\(A\\): cross sectional flow area [L2]; \\(Q\\): discharge [L3/T]; \\(J_0\\): bottom slope; \\(J_f\\): friction slope [-]; \\(I_1\\): profile coefficient [L3]; \\(I_2\\): coefficient for cross sectional variation [L2].\nEquation 8.151 expresses the mass conservation while Equation 8.152 ensures the conservation of momentum. The term \\(I_1\\) takes into account the shape of the transversal profile and is calculated as follows:\n\\[\nI_{1} = \\int_{0}^{h}{(h - \\eta) \\cdot b(\\eta})\\ \\mathrm{d}\\eta\n\\qquad(8.153)\\]\nThe term \\(b\\) represents the cross-sectional variation for the level and constitutes an integration variable according to Figure 8.11 (a). St. Venant equations can be solved in RS MINERVE for a trapezoidal profile (Figure 8.11 (b)).\n\n\n\n\n\n\n\n(a) Descriptive sketch for parameters used in the calculation of \\(I_1\\)\n\n\n\n\n\n\n\n(b) Transversal profile available for the computation of channel routing\n\n\n\n\nFigure 8.11: Sections of the Channel routing model\n\n\nFor this trapezoidal section, the equation defining \\(I_1\\) is reduced to:\n\\[\nI_1 = \\frac {B \\cdot h^2}{2} + \\frac {m \\cdot h^3}{3}\n\\qquad(8.154)\\]\nwith \\(B\\): width of the base of the transversal profile [L]; \\(h\\): water level [L]; \\(m\\): side bank relation coefficient (1 vertical / \\(m\\) horizontal) [-].\nThe friction slope \\(J_f\\) is calculated according to Manning-Strickler:\n\\[\nJ_f = \\frac{Q \\cdot |Q|}{A^{2} \\cdot K^{2} \\cdot {R_{h}}^{\\frac{4}{3}}}\n\\qquad(8.155)\\] \\[\nR_h = \\frac{A}{L_p}\n\\qquad(8.156)\\]\nwith \\(J_f\\): friction slope [-]; \\(K\\): Strickler coefficient [L1/3/T]; \\(R_h\\): hydraulic radius [L]; \\(A\\): flow area [L2]; \\(L_p\\): wetted perimeter [L].\nThe term \\(I_2\\) takes into account the variation of the section along the channel. In the case of a prismatic channel \\(I_2\\) is equal to zero. In general, \\(I_2\\) is:\n\\[\nI_2 = \\int_{0}^{h}{(h - \\eta) \\ {\\frac{\\partial b}{\\partial x}} |_{h = \\eta}}\n\\qquad(8.157)\\]\nFor a prismatic channel, Equation 8.151 and Equation 8.152 are solved by the Euler method (first order) as follows:\n\\[\n{A_{j + 1}}^{n + 1} = {A_{j + 1}}^{n} - \\frac{\\Delta t}{\\Delta x}({Q_{j + 1}}^{n} - {Q_{j}}^{n})\n\\qquad(8.158)\\] \\[\n  {Q_{j + 1}}^{n + 1} = {Q_{j + 1}}^{n} - \\frac{\\Delta t}{\\Delta x}(\\frac{({Q_{j + 1}}^{n})^{2}}{{A_{j + 1}}^{n}} - \\frac{({Q_{j}}^{n})^{2}}{{A_{j}}^{n}} + g \\cdot {I_{1,j + 1}}^{n} - g \\cdot {I_{1,j}}^{n}) + \\Delta t \\cdot g \\cdot \\frac{({A_{j}}^{n} + {A_{j + 1}}^{n})}{2} \\cdot J_{0} - \\Delta t \\cdot g \\cdot {A_{j + 1}}^{n} \\cdot {{J_{f}}_{j + 1}}^{n}\n\\qquad(8.159)\\]\nwith \\(j\\) and \\(j+1\\) representing the spatial position; \\(n\\) and \\(n+1\\) representing the time increment; \\(g\\): gravity constant [L2/T]; \\(\\Delta x\\): longitudinal increment [L].\nThe downstream boundary condition used by RS MINERVE is the normal flow depth.\nIn practice, according to the physical situation to be simulated, some terms of the complete dynamic equations can be eliminated in order to get simplified expressions without losing precision. Applicable solutions are the diffusive and kinematic waves which are presented in the following.\n\n\nMuskingum-Cunge routing\nRuling out the first two terms of Equation 8.152 yields:\n\\[\n\\frac{\\partial I_{1}}{\\partial x} = A \\cdot \\left( J_{0} - J_{f} \\right) + I_{2}\n\\qquad(8.160)\\]\nThis new equation corresponds to the approximation of the diffusive wave. With the supplementary hypothesis of a prismatic channel (Cunge 1991) it is possible to express Equation 8.152 as follows:\n\\[\n\\frac{\\partial Q}{\\partial t} + \\bigg( \\frac{Q}{BD}\\frac{\\mathrm{d}D}{\\mathrm{d}h} \\bigg) \\cdot \\frac{\\partial Q}{\\partial x} - \\frac{D^{2}}{2 \\cdot B \\cdot |Q|} \\cdot \\frac{\\partial^{2}Q}{\\partial x^{2}} = 0\n\\qquad(8.161)\\]\nwith \\(B\\): width of the bottom of the transversal profile [L]; \\(D\\): discharge rate [L3/T].\nThe discharge rate is the capacity of a cross section of a channel to transport a certain flow and is defined as:\n\\[\nQ = D \\cdot {J_{0}}^{\\frac{1}{2}}\n\\qquad(8.162)\\]\nEquation 8.161 is an equation with partial derivatives of parabolic type which represents the convection and the diffusion of the variable \\(Q\\). Hence, the flow transported with a velocity \\(c\\) (Equation 8.163) and diffused with a diffusion coefficient (Equation 8.164):\n\\[\nc = \\frac{Q}{B \\cdot D} \\cdot \\frac{\\mathrm{d}D}{\\mathrm{d}h}\n\\qquad(8.163)\\] \\[\n\\delta = \\frac{D^{2}}{2B \\cdot |Q|}\n\\qquad(8.164)\\]\nBased on the hypothesis of a clearly defined relation between the flow \\(Q\\) and the water level \\(h\\), Equation 8.161 is reduced to:\n\\[\n\\frac{\\partial Q}{\\partial t} + \\bigg( \\frac{\\mathrm{d}Q}{\\mathrm{d}A} \\bigg)_{x_{0}} \\cdot \\frac{\\partial Q}{\\partial x} = 0\n\\qquad(8.165)\\]\nThis equation is called “equation of the kinematic wave” and describes the simple convection of the flow with a velocity \\(c\\) according to Equation 8.163. It can be solved by the following numerical finite difference scheme:\n\\[\n\\frac{\\partial Q}{\\partial t} \\approx \\frac{X \\cdot \\big( {Q_{j}}^{n + 1} - {Q_{j}}^{n} \\big) + (1 + X) \\cdot \\big( {Q_{j + 1}}^{n + 1} - {Q_{j + 1}}^{n} \\big)}{\\Delta t}\n\\qquad(8.166)\\] \\[\n\\frac{\\partial Q}{\\partial x} \\approx \\frac{\\frac{1}{2} \\cdot \\big( {Q_{j + 1}}^{n + 1} - {Q_{j}}^{n + 1} \\big) + \\frac{1}{2} \\cdot \\big( {Q_{j + 1}}^{n} - {Q_{j}}^{n} \\big)}{\\Delta x}\n\\qquad(8.167)\\]\nApplying this scheme to Equation 8.165 yields:\n\\[\n\\frac{X \\cdot \\big( {Q_{j}}^{n + 1} - {Q_{j}}^{n} \\big) + (1 + X) \\cdot \\big( {Q_{j + 1}}^{n + 1} - {Q_{j + 1}}^{n} \\big)}{c \\cdot \\Delta t} + \\frac{\\frac{1}{2} \\cdot \\big( {Q_{j + 1}}^{n + 1} - {Q_{j}}^{n + 1} \\big) + \\frac{1}{2} \\cdot \\big( {Q_{j + 1}}^{n} - {Q_{j}}^{n} \\big)}{\\Delta x} = 0\n\\qquad(8.168)\\]\nWe can express the solution of this equation as a function of the unknown variable \\({Q_{j+1}}^{n+1}\\) namely:\n\\[\n{Q_{j + 1}}^{n + 1} = C_1 \\cdot {Q_{j}}^{n + 1} + C_2 \\cdot {Q_{j}}^{n} + C_3 \\cdot {Q_{j + 1}}^{n}\n\\qquad(8.169)\\]\nwith:\n\\[\n\\begin{matrix}\n  C_1 = - \\frac{K \\cdot X - \\frac{\\Delta t}{2}}{K \\cdot (1 - X) + \\frac{\\Delta t}{2}} \\\\\n  C_2 = \\frac{K \\cdot X + \\frac{\\Delta t}{2}}{K \\cdot (1 - X) + \\frac{\\Delta t}{2}} \\\\\n  C_3 = \\frac{K \\cdot (1 - X) - \\frac{\\Delta t}{2}}{K \\cdot (1 - X) + \\frac{\\Delta t}{2}} \\\\\n\\end{matrix}\n\\qquad(8.170)\\] \\[\nK = \\frac{\\Delta x}{c}\n\\qquad(8.171)\\] \\[\nc = \\frac{{Q_{j + 1}}^{n} - {Q_{j}}^{n}}{{A_{j + 1}}^{n} - {A_{j}}^{n}}\n\\qquad(8.172)\\]\nHere, hydraulic engineers might recognize the equation of Muskingum (Boillat 1980) corresponding to the name of the river localized in the United States where the method was employed for the first time. The Muskingum method represents an approximation by finite differences of the equation for the kinematic wave. This is not only an appearance since developing the terms of Equation 8.168 in terms of a Taylor series around the point (\\(j\\), \\(n\\)) assuming \\(\\Delta x/\\Delta t = c\\) and neglecting the quadratic terms (\\(\\Delta x^2\\)) the equation can be written as follows:\n\\[\n\\frac{\\partial Q}{\\partial t} + c \\cdot \\frac{\\partial Q}{\\partial x} - c \\cdot B\\frac{\\partial^{2}Q}{\\partial x^{2}} = 0\n\\qquad(8.173)\\] \\[\nB = \\Delta x \\cdot \\bigg( \\frac{1}{2} - X \\bigg)\n\\qquad(8.174)\\]\nAccording to this analysis proposed by Cunge (1969) it can be recognized that the Muskingum equation is a solution in terms of finite differences of the equation of the diffusive wave (Equation 8.161) under the condition of correctly introducing the value of the parameters \\(K\\) and \\(X\\). \\(K\\) is defined by Equation 8.171 and according to the celerity \\(c\\) (Equation 8.174), \\(X\\) corresponds to:\n\\[\nX = \\frac{1}{2} - \\frac{D^3}{2 \\cdot \\Delta x \\cdot |Q| \\cdot Q \\cdot \\frac{\\mathrm{d}D}{\\mathrm{d}h}}\n\\qquad(8.175)\\]\nThis function of the diffusive wave implemented at present in RS MINERVE is capable of solving the Muskingum-Cunge equation for the trapezoidal geometry of a transversal profile according to Figure 8.11 (b).\n\n\nKinematic Wave routing\nIn the kinematic wave model the terms of inertia and pressure of the St. Venant equations are supposed to be negligible. As a consequence, the cinematic hypothesis supposes that the gravity forces are identical, though with an opposite sign, to the friction forces. This implies that there is an explicit relationship between the flow and the water level (measured normal water depth).\nThe equation of the cinematic wave as presented in the previous chapter is presented as follows:\n\\[\n\\frac{\\partial Q}{\\partial t} + \\left( \\frac{dQ}{dA} \\right)_{x_{0}} \\cdot \\frac{\\partial Q}{\\partial x} = 0\n\\qquad(8.176)\\]\nThis is a simple equation of convection which indicates that the flow \\(Q\\) is transported downstream with a celerity \\(c\\) which is defined as:\n\\[\nc = \\frac{\\partial Q}{\\partial A}\n\\qquad(8.177)\\]\nThis rather simple model transports each point of the hydrograph from upstream to downstream with a velocity \\(c\\). Since no diffusive term appears in the equation the peak discharge remains constant and is not reduced. On the contrary, the general behaviour of a flood is modified, since high discharges are transferred downstream more rapidly than small ones.\nThe initial parameters are identical to those of the model of the diffusive wave. The geometry for the transversal profiles also corresponds to the same than for the Muskingum-Cunge method (trapezoidal channels, Figure 8.11 (b)). Opposite to the model of the diffusive wave, no reduction of the flood is produced as mentioned previously. The solution is performed according to the following equations:\n\\[\nc = \\frac{{Q_{j + 1}}^{n} - {Q_{j}}^{n}}{{A_{j + 1}}^{n} - {A_{j}}^{n}}\n\\qquad(8.178)\\] \\[\n\\alpha = c \\cdot \\frac{\\Delta t}{\\Delta L}\n\\qquad(8.179)\\] \\[\n{Q_{j + 1}}^{n + 1}=\n  \\begin{cases}\n    \\alpha \\cdot {Q_{j}}^{n} + (1 - \\alpha) \\cdot {Q_{j + 1}}^{n}                                   & \\quad \\text{if } \\alpha \\leq 1 \\\\\n    1/\\alpha \\cdot {Q_{j}}^{n} + (1 - \\frac{1}{\\alpha}) \\cdot {Q_{j}}^{n + 1}               & \\quad \\text{if } \\alpha > 1\n  \\end{cases}\n\\qquad(8.180)\\]\n\n\nLag-time\nThe lag-time model is the simpler routing model where upstream and downstream flows are delayed by a fixed lag time called \\(Lag\\) (in minutes)."
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_timeseries",
    "href": "tech_hydrological_models.html#sec-model_timeseries",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.12 Time series",
    "text": "8.12 Time series\nIn this object, temporary series of flow, precipitation, temperature or ETP can be directly introduced. The time is incorporated in seconds and the associated values in their corresponding units, in tabular form “t [s] - value [depending on the series]”.\n\n\nTable 8.11: Time series required data\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nSeries (paired data)\ns (depending on the series)\nTime - Value series"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_reservoir",
    "href": "tech_hydrological_models.html#sec-model_reservoir",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.13 Reservoir",
    "text": "8.13 Reservoir\nThe transient evolution of a water volume \\(V\\) in a reservoir is described by the following retention equation:\n\\[\n\\frac{\\mathrm{d}V}{\\mathrm{d}t} = Q_{e} - Q_{s}\n\\qquad(8.181)\\]\nwith \\(V\\): volume in the reservoir [L3]; \\(Q_e\\): inflow in the reservoir [L3/T]; \\(Q_s\\): outflow [L3/T].\nUsually, reservoirs are equipped with turbines, pumps and spillways depending on the water level in the reservoir. To solve Equation 8.181, it is necessary to know the outflow as a function of the water volume \\(V\\) in the reservoir. This operation is possible if relation between the water level and the water volume is known (Table 8.12).\n\n\nTable 8.12: Reservoir paired data and initial condition required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nH-V (paired data)\nmasl - m3\nLevel - Volume relation\n\n\nHini\nmasl\nInitial level in the reservoir"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_hq",
    "href": "tech_hydrological_models.html#sec-model_hq",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.14 Level-Discharge Relation (HQ)",
    "text": "8.14 Level-Discharge Relation (HQ)\nThe HQ object provides an outflow depending on a level in a reservoir. The outflow is calculated by the help of a “Level - Discharge” relation (Table 8.13). Hence, the discharge in then calculated as follows:\n\\[\n  {Q_{outflow}}^{n} =\n  \\begin{cases}\n    0                                                                                               & \\quad \\text{if } H^n < H_{1} \\\\\n    Q_{dev,i} + (H_{i + 1} - H^{n}) \\cdot \\frac{Q_{outflow,i+1} - Q_{outflow,i}}{H_{i+1} - H_i}     & \\quad \\text{if } H_i < H^n < H_{i+1} \\\\\n  \\end{cases}\n\\qquad(8.182)\\]\nwith \\({Q_{outflow}}^n\\): discharge at instant \\(n\\) [L3/T]; \\(H^n\\): water level at instant \\(n\\) [L]; \\(Q_{outflow,i}\\): discharge flow for a water level \\(H_i\\) [L3/T]; \\(H_i\\): reservoir water level [L].\n\n\nTable 8.13: HQ paired data required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nH-Q (paired data)\nmasl - m3/s\nLevel - Discharge relation"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_turbine",
    "href": "tech_hydrological_models.html#sec-model_turbine",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.15 Turbine",
    "text": "8.15 Turbine\nIn this object, temporary series of flow can be directly introduced to provide an outflow in a reservoir. The time is incorporated in seconds and the associated values in their corresponding units, in tabular form “t [s] - discharge”. The final discharge also depends on the level reservoir as presented in next equations:\n\\[\n{Q_{turbine}}^n =\n  \\begin{cases}\n    {Q_{wanted}}^{n}    & \\quad \\text{if } \\left( H^{n} > H_{on}  \\right) \\text{ or } (H_{off} \\leq  H^{n} \\leq H_{on} \\text{ and } IsOperating = 1)  \\\\\n    0                   & \\quad \\text{if } \\left( H^{n} < H_{off} \\right) \\text{ or } (H_{off} \\leq  H^{n} \\leq H_{on} \\text{ and } IsOperating = 0) \\\\\n  \\end{cases}\n\\qquad(8.183)\\]\nwith \\({Q_{turbine}}^n\\): discharge at instant \\(n\\) [L3/T]; \\(H^n\\): water level at instant \\(n\\) [L]; \\({Q_{wanted}}^n\\): discharge flow wanted at instant \\(n\\) [L3/T]; \\(Hon\\): Threshold in the level of the reservoir to start the turbine cycle [L]; \\(Hoff\\): Threshold in the level of the reservoir to stop the turbine cycle [L]; \\(IsOperating\\): Planned turbine cycle at instant \\(t\\) [0/1].\n\n\nTable 8.14: Time-Q paired data, parameters and initial conditions required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nH-Q (paired data)\nmasl - m3/s\nLevel - Discharge relation\n\n\nHon\nmasl\nThreshold in the level of the reservoir to start the turbine cycle (turbine starts when the threshold is exceeded)\n\n\nHoff\nmasl\nThreshold in the level of the reservoir to stop the turbine cycle (turbine stops when level go below the threshold)\n\n\nIsOperatingIni\n0/1\nFirst suggested value for the turbine cycle (0 = not turbine; 1 = turbine). Only taken into account if Hoff > H > Hon\n\n\n\n\n\n\n\nFigure 8.12: Time-H, tubine start and stop operation"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_hydropower",
    "href": "tech_hydrological_models.html#sec-model_hydropower",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.16 Hydropower",
    "text": "8.16 Hydropower\nThe inputs of this object are a reservoir level and a discharge. It also needs the paired data relation “Discharge (\\(Q\\)) - Performance (\\(\\eta\\))” for the turbine, the altitude (\\(Z_{central}\\)) of the hydropower plant, the length (\\(L\\)), the diameter (\\(D\\)) and the roughness (\\(K\\)) of the pipe as well as the kinematic viscosity of the fluid (\\(\\nu\\)).\nAs outputs, the object calculates not only the power and the revenue for each time step, as presented in Equation 8.184 to Equation 8.186, but also the total energy produced and the total obtained revenue. For this calculation, it takes into account the head loss in terms of volumetric flow rate in a full-flowing circular pipe from the Darcy-Weisbach equation (Darcy 1857; Simmons 2008).\n\\[\n{Z_{net}}^{n} = ({Z_{water}}^{n} - Z_{central}) - f \\cdot \\frac{8 \\cdot L \\cdot {Q^{n}}^{2}}{g \\cdot \\pi^{2} \\cdot D^{5}}\n\\qquad(8.184)\\] \\[\nPower^{n} = \\eta^{n} \\cdot 1000 \\cdot Q^{n} \\cdot g \\cdot {Z_{net}}^{n}\n\\qquad(8.185)\\] \\[\nRevenue^{n} = Power^{n} \\cdot Price^{n}\n\\qquad(8.186)\\]\nwith \\({H_{net}}^n\\): net height at instant \\(n\\) [L]; \\({Z_{water}}^n\\): water height in the reservoir at instant \\(n\\) [L]; \\(Z_{central}\\): hydropower plant altitude [L]; \\(f\\): friction factor [-]; \\(L\\): length of the pipe [L]; \\(Q^n\\): discharge at instant \\(n\\) [L3/T]; \\(g\\): gravity, 9.81 [L2/T]; \\(D\\): diameter [L]; \\(Power^n\\): power at instant \\(n\\) [Watt]; \\(\\eta\\): performance of the turbine at instant \\(n\\) [%]; \\(Revenue^n\\): Revenue of the turbine at instant \\(n\\) [/Kwh]; \\(Price^n\\): Price of the energy at instant \\(n\\) [/Kwh].\nIf the discharge actually provided to the object Hydropower is higher than the range proposed in the relation \\(Q-\\eta\\) of this object, the maximum discharge of the paired data \\(Q-\\eta\\) is taken for the energy production calculations.\n\n\nTable 8.15: Hydropower paired data and parameters required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nQ- (paired data)\nm^ 3^/s - %\nDischarge-Performance relation\n\n\nZplant\nmasl\nHydropower plant altitude\n\n\nL\nm\nLength of the pipe\n\n\nD\nm\nDiameter of the pipe\n\n\nK\nm\nRoughness\n\n\n\nm2/s\nKinematic viscosity\n\n\nDefault Price\n€/Kwh\nDefault price, only used if no data exists in the database\n\n\n\n\nA default price can be introduced for first approximation of the revenue. It is used only if the object does not have a price series in the database.\nFor the calculation of the friction factor \\(f\\) of the Darcy-Weisbach equation, the equation of Colebrook-White (C. F. Colebrook and White 1937; C. F. Colebrook 1939) is used. It is presented in Equation 8.187, where \\(\\lambda\\) represents \\(f\\). In addition, the Reynolds number, \\(Re\\), is presented in Equation 8.188.\n\\[\n\\frac{1}{\\sqrt{\\lambda}} = - 2 \\cdot log_{10}\\left( \\frac{k/D}{3.7} + \\frac{2.51}{Re \\cdot \\sqrt{\\lambda}} \\right)\n\\qquad(8.187)\\] \\[\nRe = v \\cdot \\frac{D}{\\upsilon}\n\\qquad(8.188)\\]\nwith \\(\\lambda\\): friction factor [-]; \\(k\\): roughness [L]; \\(Re\\): Reynolds number [-]; \\(v\\): velocity [L/T]; \\(\\upsilon\\): kinematic viscosity [L2/T]\nEquation 8.187 is solved for the range of discharges of the paired data \\(Q-\\eta\\), providing the paired data relation “Discharge (Q) - Friction factor (\\(\\lambda\\))” for user information."
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_diversion",
    "href": "tech_hydrological_models.html#sec-model_diversion",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.17 Diversion",
    "text": "8.17 Diversion\nThis object needs the paired data relation “Inflow - Diverted flow” as information as well as the incoming hydrograph. The relation describes the behaviour of the diversion and is generated by the user, who performs a calculation for the behaviour of the diversion and then creates the relation “Inflow - Diverted flow”.\nWith this information, the Diversion calculates the diverted hydrograph and the downstream hydrograph, as presented in Equation 8.189:\n\\[\n{Q_{up}}^{n} = {Q_{down}}^{n} + {Q_{diverted}}^{n}\n\\qquad(8.189)\\]\nwith \\({Q_{up}}^n\\): total flow upstream at instant \\(n\\) [L3/T]; \\({Q_{diverted}}^n\\): diverted flow at instant \\(n\\) [L3/T]; \\({Q_{down}}^n\\): downstream flow at instant \\(n\\) [L3/T].\n\n\nTable 8.16: Diversion paired data required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nQup-Qdiverted (paired data)\nm3/s - m3/s\nUpstream flow - Diverted flow relation"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_consumer",
    "href": "tech_hydrological_models.html#sec-model_consumer",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.18 Consumer",
    "text": "8.18 Consumer\nThe Consumer object is used to take into account a consumption site (agriculture, cities, etc.). A series in the database is used as the demand of the Consumer object. If no information about consummation exists in the database, the parameter \\(Default QDemand\\) is used for the whole period of the simulation as uniform demand.\nThe LossRate parameter provides the distribution losses of a demand site (physical leaks, clandestine connections, etc.). If the input discharge (\\(Qup\\)) is sufficient, the delivered flow (\\(Qdelivered\\)) is equal to the Qdemand and the supply requirement (\\(Qsupplied\\)) is equal to the Qdemand divided by (\\(1-LossRate\\)), otherwise the supply requirement is equal to the input discharge (\\(Qup\\)). Then, the ConsumptionRate parameter is used to determine the discharge consumed by the demand site and which is lost (evaporation, embodied products, etc). The discharge remainder (\\(Qreturn\\)) is returned to the main system. The output flow is equal to the input flow minus the losses and the effective consumption (\\(Qconsumed\\)).\nThe Consumer object calculates the losses, the consumed discharge as well as the downstream hydrograph, as presented in next equations. At the same time, the object also calculates the unmet demand and the demand coverage (%) series during the simulation period.\n\\[\n{Q_{supplied}}^{n} = min \\bigg( \\frac{{Q_{demand}}^{n}}{1 - LossRate};{Q_{up}}^{n} \\bigg)\n\\qquad(8.190)\\] \\[\n{Q_{stream}}^{n} = {Q_{up}}^{n} - {Q_{supplied}}^{n}\n\\qquad(8.191)\\] \\[\n{Q_{losses}}^{n} = {Q_{supplied}}^{n} \\cdot LossRate\n\\qquad(8.192)\\] \\[\n{Q_{delivered}}^{n} = {Q_{supplied}}^{n} \\cdot (1 - LossRate)\n\\qquad(8.193)\\] \\[\n{Q_{UnmetDemand}}^{n} = {Q_{demand}}^{n} - {Q_{delivered}}^{n}\n\\qquad(8.194)\\] \\[\n{DemandCoverage}^{n} = \\frac{{Q_{demand}}^{n} - {Q_{delivered}}^{n}}{{Q_{demand}}^{n}} \\cdot 100\n\\qquad(8.195)\\] \\[\n{Q_{consumed}}^{n} = {Q_{delivered}}^{n} \\cdot ConsumptionRate\n\\qquad(8.196)\\] \\[\n{Q_{return}}^{n} = {Q_{delivered}}^{n} \\cdot (1 - ConsumptionRate)\n\\qquad(8.197)\\] \\[\n{Q_{down}}^{n} = {Q_{up}}^ {n} - {Q_{losses}}^{n} - {Q_{consumed}}^{n}\n\\qquad(8.198)\\]\nwith \\({Q_{demand}}^n\\): demanded consumption at instant \\(n\\) [L3/T]; \\({Q_{up}}^n\\): total flow upstream at instant \\(n\\) [L3/T]; \\(LossRate\\): fraction of the \\(Q_{supplied}\\) lost at the demand site [-]; \\({Q_{supplied}}^n\\): supplied discharge at instant \\(n\\) [L3/T]; \\({Q_{stream}}^n\\): discharge that flows downstream after the initial supply at instant \\(n\\) [L3/T]; \\({Q_{losses}}^n\\): part of the \\(Q_{supplied}\\) discharge that is lost at instant \\(n\\) [L3/T]; \\(LossRate\\): fraction of the \\(Q_{supplied}\\) discharge that will be lost before its delivery [-]; \\({Q_{delivered}}^n\\): part of the \\(Q_{supplied}\\) discharge that is not lost at instant \\(n\\) [L3/T]; \\({Q_{UnmetDemand}}^n\\): discharge shortfall at the consumption site at instant \\(n\\) [L3/T]; \\(DemandCoverage\\): percentage of the demand covered by the delivered discharge at instant \\(n\\) [%]; \\(ConsumptionRate\\): fraction of the \\(Q_{delivered}\\) ultimately consumed [-]; \\({Q_{consumed}}^n\\): discharge consumed at the consumption site at instant \\(n\\) [L3/T]; \\({Q_{return}}^n\\): discharge returning downstream from the consumption site at instant \\(n\\) [L3/T]; \\({Q_{down}}^n\\): downstream flow at instant \\(n\\) [L3/T].\n\n\nTable 8.17: Consumer parameters required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nLossRate\n-\nFraction of the \\(Q_{supplied}\\) lost at the demand site\n\n\nConsumptionRate\n-\nFraction of the \\(Q_{delivered}\\) ultimately consumed\n\n\nDefault QDemand\nm3/s\nDefault demand of consummation, only used if no data exists in the database\n\n\n\n\n\n\n\nFigure 8.13: Distribution of discharges in the Consumer object"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_efficiency",
    "href": "tech_hydrological_models.html#sec-model_efficiency",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.19 Structure efficiency",
    "text": "8.19 Structure efficiency\nThis object needs an efficiency coefficient as information to describe the efficiency of a structure such a canal or a pipe, as well as the incoming hydrograph.\nAn efficiency of 1 provides an output flow equivalent to the input hydrograph. An efficiency of 0 generates a complete loss of the input.\nThe downstream hydrograph is calculated as presented in Equation 8.199 and Equation 8.200:\n\\[\n{Q_{down}}^{n} = {Q_{up}}^{n} \\cdot \\text{Efficiency}\n\\qquad(8.199)\\] \\[\n{Q_{lost}}^{n} = {Q_{up}}^{n} \\cdot (1 - \\text{Efficiency})\n\\qquad(8.200)\\]\nwith \\({Q_{up}}^n\\): total flow upstream at instant \\(n\\) [L3/T]; \\({Q_{lost}}^n\\): lost flow at instant \\(n\\) [L3/T]; \\({Q_{down}}^n\\): downstream flow at instant \\(n\\) [L3/T].\n\n\nTable 8.18: Structure efficiency parameters required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nEfficiency\n-\nEfficiency of the structure"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_planner",
    "href": "tech_hydrological_models.html#sec-model_planner",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.20 Planner",
    "text": "8.20 Planner\nWhen a planner object is selected, a manage system is generated. Inside this object, several Rules can be created. All the rules will be computed, from first one to last one. In each rule define several Conditions is possible and also create combinations between them (with \\(AND\\) or \\(OR\\) operators). The rule will be applied if the combined condition (or an individual condition) is satisfied.\n\n\nTable 8.19: Operators to combine rule conditions\n\n\n\n\n\n\nOperator\nCombined condition is satisfied when\n\n\n\n\nOR\nLeft condition OR Right condition are satisfied\n\n\nAND\nLeft condition AND Right condition are satisfied\n\n\n\n\nA typical example of planner is the implementation of a turbine/pump law as a function of the water level in the reservoir. Thus, some Rules should be created with different conditions regarding to reservoir levels or, in some cases, to results from other objects.\n\n\nTable 8.20: Planner data required\n\n\n\n\n\n\n\n\nObject\nName\nUnits\nDescription\n\n\n\n\nPlanner\nRule\n-\nRule to be applied regarding at least one condition\n\n\nRules\nCondition\n-\nExpression to be evaluated and if it is satisfied the parent rule will be applied\n\n\n\n\nThe possible operators to use inside the conditions are presented in Table 8.20.\n\n\nTable 8.21: Operators for rule conditions\n\n\n\n\n\n\nOperator\nDefinition\n\n\n\n\n>\nBigger than\n\n\n\\(\\geq\\)\nBigger than or equal to\n\n\n=\nEqual to\n\n\n\\(\\leq\\)\nSmaller than or equal to\n\n\n<\nSmaller than"
  },
  {
    "objectID": "tech_hydrological_models.html#sec-model_comparator",
    "href": "tech_hydrological_models.html#sec-model_comparator",
    "title": "8  Hydrological and hydraulics models description",
    "section": "8.21 Comparator",
    "text": "8.21 Comparator\nThe Comparator object calculates ten performance indicators by comparing a simulated and a reference (observed) timeseries. The warm up period parameter (in days) is used for the initialization of the model state variables. Note that this time period starts at the beginning of and must be shorter than the simulation period and is not used to compute the performance indicators. The description of each indicator is presented in Section 9.\nMoreover, for the calculation of threshold-based indicators (Peirce Skill Score and Overall Accuracy), the definition of both the reference and the simulation thresholds is required (Table 8.22).\n\n\nTable 8.22: Comparator parameters required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nReference threshold\n(depends on the variable)\nThreshold used by threshold-based indicators (returns TRUE if reference value > threshold)\n\n\nSimulation threshold\n(depends on the variable)\nThreshold used by threshold-based indicators (returns TRUE if simulation value > threshold)\n\n\nWarm up period\nDays\nWarm up period, not used for indicators computation"
  },
  {
    "objectID": "tech_hydrological_models.html#references",
    "href": "tech_hydrological_models.html#references",
    "title": "8  Hydrological and hydraulics models description",
    "section": "References",
    "text": "References\n\n\n\n\nBergström, Sten. 1976. “Development and Application of a Conceptual Runoff Model for Scandinavian Catchments.” {SMHI} {Reports} RH No. 7. Norrköping, Sweden: SMHI, Research Department, Hydrology.\n\n\n———. 1992. “The HBV Model - Its Structure and Applications.” {SMHI} {Reports} RH No. 4. Norrköping, Sweden: SMHI, Research Department, Hydrology.\n\n\nBoillat, J.-L. 1980. “Polycopié \"Hydraulique Urbaine\".” Laboratoire de Constructions Hydrauliques, Ecole Polytechnique Fédérale de Lausanne.\n\n\nBurnash, R. J. C. 1995. “The NWS River Forecast System - Catchment Modeling.” In Computer Models of Watershed Hydrology, 311–66. Water Resources Publication. Colorado, USA: Singh, V. https://eurekamag.com/research/002/978/002978211.php.\n\n\nBurnash, R. Larry, Ferral. 1973. A Generalized Streamflow Simulation System : Conceptual Modeling for Digital Computers.\n\n\nColebrook, C F. 1939. “Turbulent Flow in Pipes, with Particular Reference to the Transition Region Between Smooth and Rough Pipe Laws.” Journal of the Institution of Civil Engineers 11 (4): 133–56. https://doi.org/10.1680/ijoti.1939.13150.\n\n\nColebrook, C. F., and C. M. White. 1937. “Experiments with Fluid Friction in Roughened Pipes.” Proceedings of the Royal Society of London. Series A - Mathematical and Physical Sciences 161 (906): 367–81. https://doi.org/10.1098/rspa.1937.0150.\n\n\nCunge, J. A. 1969. “On The Subject Of A Flood Propagation Computation Method (Musklngum Method).” Journal of Hydraulic Research 7 (2): 205–30. https://doi.org/10.1080/00221686909500264.\n\n\n———. 1991. “Polycopié Simulation Des Écoulements Non-Permanents Dans Les Rivières Et Canaux.” Institut National Polytechnique de Grenoble, Ecole Nationale Supérieure d’Hydraulique et de Mécanique de Grenoble.\n\n\nDarcy, H. 1857. Recherches Expérimentales Relatives Au Mouvement de l’Eau Dans Les Tuyaux. Mallet-Bachelier. Paris, France.\n\n\nHamdi, Y, B Hingray, and A Musy. 2005. “Un Modèle de Prévision Hydro-Météorologique Pour Les Crues Du Rhône Supérieur En Suisse.” Wasser, Energie and Luft, 325–32.\n\n\nMagnusson, Jan, David Gustafsson, Fabia Hüsler, and Tobias Jonas. 2014. “Assimilation of Point SWE Data into a Distributed Snow Cover Model Comparing Two Contrasting Methods.” Water Resources Research 50 (10): 7816–35. https://doi.org/10.1002/2014WR015302.\n\n\nMcGuinness, J. L., and Erich F. Bordne. 1972. “A Comparison of Lysimeter-Derived Potential Evapotranspiration With Computed Values.” Technical {Bulletins} 171893. United States Department of Agriculture, Economic Research Service. https://EconPapers.repec.org/RePEc:ags:uerstb:171893.\n\n\nMetcalf & Eddy, Inc. 1971. “Storm Water Management Model, Vol. I - Final Report.” Gainesville, Florida: University of Florida.\n\n\nOudin, L. 2004. “Recherche d’un Modèle d’évapotranspiration Potentielle Pertinent Comme Entrée d’un Modèle Pluie-Débit Global.” {PhD} {Thesis}, Ecole Nationale du Génie Rural, des Eaux et des Forêts, Paris.\n\n\nPerrin, Charles, Claude Michel, and Vazken Andréassian. 2003. “Improvement of a Parsimonious Model for Streamflow Simulation.” Journal of Hydrology 279 (1-4): 275–89. https://doi.org/10.1016/S0022-1694(03)00225-7.\n\n\nSchaefli, B., B. Hingray, M. Niggli, and A. Musy. 2005. “A Conceptual Glacio-Hydrological Model for High Mountainous Catchments.” Hydrology and Earth System Sciences 9 (1/2): 95–109. https://doi.org/10.5194/hess-9-95-2005.\n\n\nSeibert, Jan. 1997. “Estimation of Parameter Uncertainty in the HBV Model.” Hydrology Research 28 (4-5): 247–62. https://doi.org/10.2166/nh.1998.15.\n\n\nService, Soil Conservation. 1972. National Engineering Handbook, Section 4: Hydrology. Washington, D.C.: U.S. Dept. of Agriculture.\n\n\nShepard, Donald. 1968. “A Two-Dimensional Interpolation Function for Irregularly-Spaced Data.” In Proceedings of the 1968 23rd ACM National Conference on -, 517–24. Not Known: ACM Press. https://doi.org/10.1145/800186.810616.\n\n\nSimmons, Craig T. 2008. “Henry Darcy (1803–1858): Immortalised by His Scientific Legacy.” Hydrogeology Journal 16 (6): 1023. https://doi.org/10.1007/s10040-008-0304-3.\n\n\nSlater, Andrew G., and Martyn P. Clark. 2006. “Snow Data Assimilation via an Ensemble Kalman Filter.” Journal of Hydrometeorology 7 (3): 478–93. https://doi.org/10.1175/JHM505.1.\n\n\nTurc, L. 1955. “Le Bilan d’eau Des Sols : Relations Entre Les Précipitations, l’évaporation Et l’écoulement.” In Pluie, Évaporation, Filtration Et Écoulement. Compte Rendu Des Troisièmes Journées de l’hydraulique, Alger, 12-14 Avril 1954. Tome 1, 1955. Journées de l’hydraulique. https://www.persee.fr/doc/jhydr_0000-0001_1955_act_3_1_3278.\n\n\n———. 1961. “Evaluation Des Besoins En Eau d’irrigation, Formule Climatique Simplifiée Et Mise à Jour.” Annales Agronomiques, 13–49."
  },
  {
    "objectID": "tech_performance_indicators.html",
    "href": "tech_performance_indicators.html",
    "title": "9  Performance indicators",
    "section": "",
    "text": "The indicators calculated by the Comparator object are based on observed and simulated values. Since the Comparator object is able to compare variables of type flow, height, altitude, power and True/False, the descriptions below only refer to these 2 variables."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_nash",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_nash",
    "title": "9  Performance indicators",
    "section": "9.1 Nash coefficient",
    "text": "9.1 Nash coefficient\nThe Nash-Sutcliffe criteria (Nash and Sutcliffe 1970) is used to assess the predictive power of hydrological models (Ajami et al. 2004; Schaefli et al. 2005; Jordan 2007; Viviroli et al. 2009; García Hernández 2011). It is defined as presented in Equation 9.1.\n\\[\nNash = 1 - \\frac{\\sum_{t = t_{i}}^{t_{f}}{(X_{sim,t} - X_{ref,t})^{2}}}{\\sum_{t = t_{i}}^{t_{f}}{(X_{ref,t} - {\\overline{X}_{ref}})^{2}}}\n\\qquad(9.1)\\]\nwith \\(Nash\\): Nash-Sutcliffe model efficiency coefficient [-]; \\(X_{sim,t}\\): simulated variable (discharge [L3/T] or height [L]) at time \\(t\\); \\(X_{ref,t}\\) : observed variable (discharge [L3/T] or height [L]) at time \\(t\\); \\(\\overline{X}_{ref}\\): average observed variable (discharge [L3/T] or height [L]) for the considered period.\nIt varies from -∞ to 1, with 1 representing the best performance of the model and zero the same performance than assuming the average of all the observations at each time step."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_nashlog",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_nashlog",
    "title": "9  Performance indicators",
    "section": "9.2 Nash coefficient for logarithm values",
    "text": "9.2 Nash coefficient for logarithm values\nThe Nash-Sutcliffe coefficient for logarithm flow values (\\(Nash-ln\\)) is used to assess the hydrological models performance for low values (Krause, Boyle, and Bäse 2005; Nóbrega et al. 2011). It is defined as presented in Equation 9.2.\n\\[\n\\text{Nash-ln} = 1 - \\frac{\\sum_{t = t_{i}}^{t_{f}}{(ln(X_{sim,t}) - ln(X_{ref,t}))^{2}}}{\\sum_{t = t_{i}}^{t_{f}}{(ln(X_{ref,t}) - ln({\\overline{X}_{ref}}))^{2}}}\n\\qquad(9.2)\\]\nwith \\(Nash-ln\\): Nash-Sutcliffe coefficient for log values [-].\nIt varies from -∞ to 1, with 1 representing the best performance of the model."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_pearson",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_pearson",
    "title": "9  Performance indicators",
    "section": "9.3 Pearson Correlation Coefficient",
    "text": "9.3 Pearson Correlation Coefficient\nThe Pearson correlation coefficient shows the covariability of the simulated and observed values without penalizing for bias (Aghakouchak and Habib 2010; Wang et al. 2011). It is defined as presented in Equation 9.3.\n\\[\nPearson = \\frac{\\sum_{t = t_{i}}^{t_{f}}{(X_{sim,t} - {\\overline{X}_{sim}}) \\cdot (X_{ref,t} - {\\overline{X}_{ref}})}}{\\sqrt{\\sum_{t = t_{i}}^{t_{f}}{(X_{sim,t} - {\\overline{X}_{sim}})^{2}} \\cdot \\sum_{t = t_{i}}^{t_{f}}{(X_{ref,t} - {\\overline{X}_{ref}})^{2}}}}\n\\qquad(9.3)\\]\nwith \\(Pearson\\): Pearson Correlation Coefficient [-]; \\({\\overline{X}_{sim}}\\): average simulated variable (discharge [L3/T] or height [L]) for the considered period.\nIt varies from -1 to 1, with 1 representing the best performance of the model."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_klinggupta",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_klinggupta",
    "title": "9  Performance indicators",
    "section": "9.4 Kling-Gupta Efficiency",
    "text": "9.4 Kling-Gupta Efficiency\nThe Kling-Gupta efficiency (Gupta et al. 2009) provides an indicator which facilitates the global analysis based on different components (correlation, bias and variability) for hydrological modelling issues.\nKling, Fuchs, and Paulin (2012) proposed a revised version of this indicator, to ensure that the bias and variability ratios are not cross-correlated. This update is proposed as indicator in RS MINERVE (Equation 9.4):\n\\[\nKGE' = 1 - \\sqrt{(r - 1)^{2} + (\\beta - 1)^{2} + (\\gamma - 1)^{2}}\n\\qquad(9.4)\\] \\[\n\\beta = \\frac{\\mu_{s}}{\\mu_{o}}\n\\qquad(9.5)\\] \\[\n\\gamma = \\frac{{CV}_{s}}{{CV}_{o}} = \\frac{\\sigma_{s}/\\mu_{s}}{\\sigma_{o}/\\mu_{o}}\n\\qquad(9.6)\\]\nwith \\(KGE'\\): modified KGE-statistic [-]; \\(r\\): correlation coefficient between simulated and reference values [-]; \\(\\beta\\): bias ratio [-]; \\(\\gamma\\): variability ratio [-]; \\(\\mu\\): mean discharge [L3/T]; \\(CV\\): coefficient of variation [-]; \\(\\sigma\\): standard deviation of discharge [L3/T]; the indices \\(s\\) and \\(o\\) indicate respectively simulated and observed discharge values.\nIt varies from 0 to 1, with 1 representing the best performance."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_biasscore",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_biasscore",
    "title": "9  Performance indicators",
    "section": "9.5 Bias Score",
    "text": "9.5 Bias Score\nThe Bias Score (\\(BS\\)) is a symmetric estimation of the match between the average simulation and average observation (Wang et al. 2011). It is defined as presented in Equation 9.7.\n\\[\nBS = 1 - \\bigg( max \\Big(\\frac{{\\overline{X}}_{sim}}{{\\overline{X}}_{ref}};\\frac{{\\overline{X}}_{ref}}{{\\overline{X}}_{sim}} \\Big) - 1 \\bigg)^2\n\\qquad(9.7)\\]\nwith \\(BS\\): Bias Score [-].\nIt varies from -∞ to 1, with 1 representing the best performance of the model."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_rrmse",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_rrmse",
    "title": "9  Performance indicators",
    "section": "9.6 Relative Root Mean Square Error",
    "text": "9.6 Relative Root Mean Square Error\nThe Relative Root Mean Square Error (\\(RRMSE\\)) is defined as the RMSE normalized to the mean of the observed values (Feyen et al. 2000; El-Nasr et al. 2005; Heppner et al. 2006) and is presented in Equation 9.8.\n\\[\nRRMSE = \\frac{\\sqrt{\\frac{\\sum_{t = t_{i}}^{t_{f}}{(X_{sim,t} - X_{ref,t})^{2}}}{n}}}{{\\overline{X}}_{ref}}\n\\qquad(9.8)\\]\nwith \\(RRMSE\\): relative \\(RMSE\\) [-]; \\(n\\): number of values [-].\nIt varies from 0 to +∞. The smaller \\(RRMSE\\), the better the model performance is."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_rvb",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_rvb",
    "title": "9  Performance indicators",
    "section": "9.7 Relative Volume Bias",
    "text": "9.7 Relative Volume Bias\nThe Relative Volume Bias (\\(RVB\\)), sometimes called differently, corresponds in this case to the relative error between the simulated and the observed volumes during the studied period (Ajami et al. 2004; Schaefli et al. 2005; Moriasi et al. 2007; Aghakouchak and Habib 2010) according to Equation 9.9. This indicator is envisaged for the comparison between observed and simulated discharges.\n\\[\nRVB = \\frac{\\sum_{t = t_{i}}^{t_{f}}{(X_{sim,t} - X_{ref,t})}}{\\sum_{t = t_{i}}^{t_{f}}{(X_{ref,t})}}\n\\qquad(9.9)\\]\nwith \\(RVB\\): relative volume bias between forecast and observation for the considered period [-]; \\(X\\) usually corresponding to the discharge variable.\nThe \\(RVB\\) varies from -1 to +∞. An index near to zero indicates a good performance of the simulation. Negative values are returned when simulated variable is, in average, smaller than the average of the observed one (deficit model), while positive values mean the opposite (overage model)."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_npe",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_npe",
    "title": "9  Performance indicators",
    "section": "9.8 Normalized Peak Error",
    "text": "9.8 Normalized Peak Error\nThe Normalized Peak Error (\\(NPE\\)) indicates the relative error between the simulated and the observed maximum values (Masmoudi and Habaieb 1993; Sun et al. 2000; Ajami et al. 2004; Gabellani et al. 2007). It is computed according to Equation 9.10 to Equation 9.12.\n\\[\nNPE = \\frac{S_{\\max} - R_{\\max}}{R_{\\max}}\n\\qquad(9.10)\\] \\[\nS_{\\max} = \\overset{t_{f}}{\\underset{t = t_{i}}{\\vee}}Q_{sim,t}\n\\qquad(9.11)\\] \\[\nR_{\\max} = \\overset{t_{f}}{\\underset{t = t_{i}}{\\vee}}Q_{ref,t}\n\\qquad(9.12)\\]\nwith \\(NPE\\): relative error between simulated and observed peak value [-]; \\(S_{max}\\): maximum simulated value (discharge [L3/T] or height [L]) for the studied period; \\(R_{max}\\) : maximum observed value (discharge [L3/T] or height [L]) for the studied period.\nThe NPE varies from -1 to +∞. Negative values are returned when maximum simulated value is below the observed one, while positive values mean the opposite. Values near to zero indicate a good performance of simulated peaks regarding observed ones.\n\n\n\n\n\n\nWarning\n\n\n\nThe indicator is computed over the entire simulation period and the absolute maximum of the simulated and the observed peaks are considered! This indicator should therefore be used with care when simulating over long periods of time."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_pierce",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_pierce",
    "title": "9  Performance indicators",
    "section": "9.9 Peirce Skill Score",
    "text": "9.9 Peirce Skill Score\nThe Peirce Skill Score (\\(PSS\\)) indicates the performance of the model to reproduce the overrun of a threshold (Peirce 1884; Manzato 2007). Based on a contingency table definging the number of cases where the simulation and the obseration exceed or not the threshold, the \\(PSS\\) is computed according to Equation 9.13.\n\\[\nPSS = \\frac{ad - bc}{(a + c)(b + d)}\n\\qquad(9.13)\\]\nwith \\(a\\): the number of cases when both simulation and observation exceed the threshold defined in the Comparator (event); \\(b\\): the number of cases when the simulation exceeds the threshold but not the obseration (false); \\(c\\): the number of cases when the observation exceeds the threshold but not the simulation (miss); \\(d\\): the number of cases when both simulation and obseration are below the threshold (no event).\n\n\n\n\n\n\nNote\n\n\n\nIf the denominerator equals 0 (division by 0), a value of 0 is returned for the PSS."
  },
  {
    "objectID": "tech_performance_indicators.html#sec-tech_performance_indicators_oa",
    "href": "tech_performance_indicators.html#sec-tech_performance_indicators_oa",
    "title": "9  Performance indicators",
    "section": "9.10 Overall Accuracy",
    "text": "9.10 Overall Accuracy\nThe Overall Accurary (\\(OA\\)) indicates the performance of the model to reproduce the overrun of a threshold (Parajka and Blöschl 2008). Based on the same contingency table as the Pierce Skill Score, the \\(OA\\) is computed according to Equation 9.14.\n\\[\nOA = \\frac{a + d}{a + b + \\ c + d}\n\\qquad(9.14)\\]"
  },
  {
    "objectID": "tech_performance_indicators.html#references",
    "href": "tech_performance_indicators.html#references",
    "title": "9  Performance indicators",
    "section": "References",
    "text": "References\n\n\n\n\nAghakouchak, Amir, and Emad H. Habib. 2010. “Application of a Conceptual Hydrologic Model in Teaching Hydrologic Processes.” International Journal of Engineering Education 26: 963–73.\n\n\nAjami, Newsha K., Hoshin Gupta, Thorsten Wagener, and Soroosh Sorooshian. 2004. “Calibration of a Semi-Distributed Hydrologic Model for Streamflow Estimation Along a River System.” Journal of Hydrology 298 (1-4): 112–35. https://doi.org/10.1016/j.jhydrol.2004.03.033.\n\n\nEl-Nasr, Ahmed Abu, Jeffrey G. Arnold, Jan Feyen, and Jean Berlamont. 2005. “Modelling the Hydrology of a Catchment Using a Distributed and a Semi-Distributed Model.” Hydrological Processes 19 (3): 573–87. https://doi.org/10.1002/hyp.5610.\n\n\nFeyen, L., R. Vázquez, K. Christiaens, O. Sels, and J. Feyen. 2000. “Application of a Distributed Physically-Based Hydrological Model to a Medium Size Catchment.” Hydrology and Earth System Sciences 4 (1): 47–63. https://doi.org/10.5194/hess-4-47-2000.\n\n\nGabellani, S., G. Boni, L. Ferraris, J. von Hardenberg, and A. Provenzale. 2007. “Propagation of Uncertainty from Rainfall to Runoff: A Case Study with a Stochastic Rainfall Generator.” Advances in Water Resources 30 (10): 2061–71. https://doi.org/10.1016/j.advwatres.2006.11.015.\n\n\nGarcía Hernández, Javier. 2011. “Flood Management in a Complex River Basin with a Real-Time Decision Support System Based on Hydrological Forecasts.” {PhD} {Thesis} {N}°5093, Lausanne, Switzerland: Ecole Polytechnique Fédérale de Lausanne, EPFL.\n\n\nGupta, Hoshin V., Harald Kling, Koray K. Yilmaz, and Guillermo F. Martinez. 2009. “Decomposition of the Mean Squared Error and NSE Performance Criteria: Implications for Improving Hydrological Modelling.” Journal of Hydrology 377 (1-2): 80–91. https://doi.org/10.1016/j.jhydrol.2009.08.003.\n\n\nHeppner, Christopher S., Qihua Ran, Joel E. VanderKwaak, and Keith Loague. 2006. “Adding Sediment Transport to the Integrated Hydrology Model (InHM): Development and Testing.” Advances in Water Resources 29 (6): 930–43. https://doi.org/10.1016/j.advwatres.2005.08.003.\n\n\nJordan, F. 2007. “Modèle de Prévision Et de Gestion Des Crues - Optimisation Des Opérations Des Aménagements Hydroélectriques à Accumulation Pour La Réduction Des Débits de Crue.” {PhD} {Thesis} {N}°3711, Lausanne, Switzerland: Ecole Polytechnique Fédérale de Lausanne, EPFL.\n\n\nKling, Harald, Martin Fuchs, and Maria Paulin. 2012. “Runoff Conditions in the Upper Danube Basin Under an Ensemble of Climate Change Scenarios.” Journal of Hydrology 424-425 (March): 264–77. https://doi.org/10.1016/j.jhydrol.2012.01.011.\n\n\nKrause, P., D. P. Boyle, and F. Bäse. 2005. “Comparison of Different Efficiency Criteria for Hydrological Model Assessment.” Advances in Geosciences 5 (December): 89–97. https://doi.org/10.5194/adgeo-5-89-2005.\n\n\nManzato, Agostino. 2007. “A Note On the Maximum Peirce Skill Score.” Weather and Forecasting 22 (5): 1148–54. https://doi.org/10.1175/WAF1041.1.\n\n\nMasmoudi, M., and H. Habaieb. 1993. “The Performance of Some Real-Time Statistical Flood Forecasting Models Seen Through Multicriteria Analysis.” Water Resources Management 7 (1): 57–67. https://doi.org/10.1007/BF00872242.\n\n\nMoriasi, D. N., J. G. Arnold, M. W. Van Liew, R. L. Bingner, R. D. Harmel, and T. L. Veith. 2007. “Model Evaluation Guidelines for Systematic Quantification of Accuracy in Watershed Simulations.” Transactions of the ASABE 50 (3): 885–900. https://doi.org/10.13031/2013.23153.\n\n\nNash, J. E., and J. V. Sutcliffe. 1970. “River Flow Forecasting Through Conceptual Models Part I — A Discussion of Principles.” Journal of Hydrology 10 (3): 282–90. https://doi.org/10.1016/0022-1694(70)90255-6.\n\n\nNóbrega, M. T., W. Collischonn, C. E. M. Tucci, and A. R. Paz. 2011. “Uncertainty in Climate Change Impacts on Water Resources in the Rio Grande Basin, Brazil.” Hydrology and Earth System Sciences 15 (2): 585–95. https://doi.org/10.5194/hess-15-585-2011.\n\n\nParajka, J., and G. Blöschl. 2008. “Spatio-Temporal Combination of MODIS Images - Potential for Snow Cover Mapping: SPATIO-TEMPORAL COMBINATION OF MODIS IMAGES.” Water Resources Research 44 (3). https://doi.org/10.1029/2007WR006204.\n\n\nPeirce, C. S. 1884. “The Numerical Measure of the Success of Predictions.” Science ns-4 (93): 453–54. https://doi.org/10.1126/science.ns-4.93.453.b.\n\n\nSchaefli, B., B. Hingray, M. Niggli, and A. Musy. 2005. “A Conceptual Glacio-Hydrological Model for High Mountainous Catchments.” Hydrology and Earth System Sciences 9 (1/2): 95–109. https://doi.org/10.5194/hess-9-95-2005.\n\n\nSun, X., R. G. Mein, T. D. Keenan, and J. F. Elliott. 2000. “Flood Estimation Using Radar and Raingauge Data.” Journal of Hydrology 239 (1-4): 4–18. https://doi.org/10.1016/S0022-1694(00)00350-4.\n\n\nViviroli, Daniel, Heidi Mittelbach, Joachim Gurtz, and Rolf Weingartner. 2009. “Continuous Simulation for Flood Estimation in Ungauged Mesoscale Catchments of Switzerland – Part II: Parameter Regionalisation and Flood Estimation Results.” Journal of Hydrology 377 (1-2): 208–25. https://doi.org/10.1016/j.jhydrol.2009.08.022.\n\n\nWang, Q. J., T. C. Pagano, S. L. Zhou, H. A. P. Hapuarachchi, L. Zhang, and D. E. Robertson. 2011. “Monthly Versus Daily Water Balance Models in Simulating Monthly Runoff.” Journal of Hydrology 404 (3-4): 166–75. https://doi.org/10.1016/j.jhydrol.2011.04.027."
  },
  {
    "objectID": "tech_calibration_algorithms.html",
    "href": "tech_calibration_algorithms.html",
    "title": "10  Calibration algorithms",
    "section": "",
    "text": "The module Calibrator of the RS Expert frame has been implemented for calibrating the parameters of the hydrological model. This module uses an objective function defined by the user and different algorithms to solve it.\nThe first algorithm, the Shuffled Complex Evolution – University of Arizona (SCE-UA), is a global optimization method (Q. Duan, Sorooshian, and Gupta 1992; Q. Y. Duan, Gupta, and Sorooshian 1993) based on a synthesis of the best features from several existing algorithms, including the genetic algorithm, and introduces the concept of complex information exchange, so-called complex shuffling. The SCE-UA method was designed for solving problems encountered in conceptual watershed model calibration (Hapuarachchi, Li, and Wang 2001; Ajami et al. 2004; Muttil and Liong 2004; Blasone, Madsen, and Rosbjerg 2007), but has also been satisfyingly used in water resources management (Zhu, Wu, and Wu 2006; Lin, Cheng, and Lin 2008; Wang et al. 2010).\nThe second algorithm is a variation of the Adaptive Markov Chain Monte Carlo, used since it can be interesting for solving complex problems in high dimensional spaces (Gilks, Richardson, and Spiegelhalter 1995; Liu 2004). It has been modified to an Uniform Adaptative Monte Carlo (UAMC) in this program to adjust the solution space after a defined group of simulations up to the convergence of the optimization. Variations of the Monte Carlo method are usually used in hydrological problem for parameterization optimization (Vrugt et al. 2003; Jeremiah et al. 2012).\nThe third and last algorithm used in RS MINERVE is the Coupled Latin Hypercube and Rosenbrock (CLHR) It couples the Latin Hypercube algorithm (McKay, Beckman, and Conover 1979) with the Rosenbrock algorithm (Rosenbrock 1960), generating a powerful tool for optimization of complex problems. The latin hypercube algorithm has been usually used in hydrology for sampling the initial parameter space, combined the with other methods (Griensven et al. 2006; Kamali, Ponnambalam, and Soulis 2013). Rosenbrock algorithm has been also used for hydrological parameters optimisation (Abbott and Refsgaard 1996) or optimization of numerical functions (Kang, Li, and Ma 2011)."
  },
  {
    "objectID": "tech_calibration_algorithms.html#sec-tech_calibration_algorithms_of",
    "href": "tech_calibration_algorithms.html#sec-tech_calibration_algorithms_of",
    "title": "10  Calibration algorithms",
    "section": "10.2 Objective function",
    "text": "10.2 Objective function\nA flexible objective function (\\(OF\\)) has been developed for the module of calibration aiming to be adapted to the user’s requirements. The indicators presented in Section 9 are used in this OF, each one weighted with a value defined by the user (Table 10.1).\n\n\nTable 10.1: Weights of the indicators for the objective function\n\n\n\n\n\n\n\n\nIndicator\nWeight\nRange of Values\nIdeal value\n\n\n\n\nNash\nw1\n-∞ to 1\n1\n\n\nNash-ln\nw2\n-∞ to 1\n1\n\n\nPearson Correlation Coefficient\nw3\n-1 to 1\n1\n\n\nKling-Gupta Efficiency (KGE)\nw4\n-∞ to 1\n1\n\n\nBias Score (BS)\nw5\n-∞ to 1\n1\n\n\nRelative Root Mean Square Error (RRMSE)\nw6\n0 to +∞\n0\n\n\nRelative Volume Bias (RVB)\nw7\n-∞ to +∞\n0\n\n\nNormalized Peak Error (NPE)\nw8\n-∞ to +∞\n0\n\n\nPeirce Skill Score (PSS)\nw9\n-1 to 1\n1\n\n\nOverall Accuracy (OA)\nw10\n0 to 1\n1\n\n\n\n\nThe \\(OF\\) is presented in Equation 10.1 and takes into account the ideal values of each indicator. Thus, the \\(OF\\) searches to maximize the first five and last two indicators (\\(Nash\\), \\(Nash-ln\\), \\(Pearson\\), \\(Kling-Gupta\\), \\(BS\\), \\(PSS\\) and \\(OA\\)) since their ideal value is equal to the maximum possible value and, at the same time, to minimize the value or the absolute value for the three other indicators (\\(RRMSE\\), \\(RVB\\), \\(NPE\\)) since their ideal value corresponds to zero.\n\\[\nOF = max(Nash \\cdot w_{1} + Nashln \\cdot w_{2} + Pearson \\cdot w_{3} + KGE \\cdot w_{4} + BS \\cdot w_{5} - RRMSE \\cdot w_{6} - \\left| RVB \\cdot w_{7} \\right| - \\left| NPE \\cdot w_{8} \\right| + PSS \\cdot w_{9} + OA \\cdot w_{10})\n\\qquad(10.1)\\]"
  },
  {
    "objectID": "tech_calibration_algorithms.html#sec-tech_calibration_algorithms_sce_ua",
    "href": "tech_calibration_algorithms.html#sec-tech_calibration_algorithms_sce_ua",
    "title": "10  Calibration algorithms",
    "section": "10.3 Shuffled Complex Evoluation – University of Arizona",
    "text": "10.3 Shuffled Complex Evoluation – University of Arizona\n\nModel architecture\nThe Shuffled Complex Evolution – University of Arizona (SCE-UA) method was developed to obtain the traditional best parameter set and its underlying posterior distribution within a single optimization run. The goal is to find a single best parameter set in the feasible space. It starts with a random sample of points distributed throughout the feasible parameter space, and uses an adaptation of the Simplex Downhill search scheme (Nelder and Mead 1965) to continuously evolve the population toward better solutions in the search space, progressively relinquishing occupation of regions with lower posterior probability (Mariani et al. 2011).\nA general description of the steps of the SCE-UA method is given below (Q. Duan, Sorooshian, and Gupta 1994) and illustrated in Figure 10.1.\nStep 1\nGenerate sample: Sample \\(NPT\\) points in the feasible parameter space and compute the criterion value at each point. In the absence of prior information on the location of the global optimum, use a uniform probability distribution to generate a sample.\nStep 2\nRank points: Sort the \\(NPT\\) points to increase criterion value so that the first point represents the point with the lowest criterion value and the last the one with the highest criterion value (assuming that the goal is to minimize the criterion value).\nStep 3\nPartition into complexes: Partition the \\(NPT\\) points into \\(NGS\\) complexes, each containing \\(NPG\\) points. The complexes are partitioned in such a way that the first complex contains every \\(NGS \\cdot (k-1)+1\\) ranked point, the second complex contains every \\(NGS \\cdot (k-1)+2\\) ranked point, and so on, where \\(k = 1,2,...,NPG\\).\nStep 4\nEvolve each complex: Evolve each complex independently by taking \\(NSPL\\) evolution steps, according to the Competitive Complex Evolution (CCE) algorithm. Figure 10.3 illustrates how each evolution step is taken.\nStep 5\nShuffle complexes: Combine the points in the evolved complexes into a single sample population; sort the sample population in order of increasing criterion value; re-partition or shuffle the sample population into \\(NGS\\) complexes according to the procedure specified in the third step.\nStep 6\nCheck convergence: If any of the pre-specified convergence criteria are satisfied, stop; otherwise, continue.\nStep 7\nCheck complex number reduction: If \\(MINGS\\) (the minimum number of complexes) \\(< NGS\\), remove the complex with the lowest ranked points; set \\(NGS=NGS-1\\) and \\(NPT=NGS \\cdot NPG\\); and return to Step 4. If \\(MINGS=NGS\\), return to Step 4.\n\n\n\nFigure 10.1: Flow chart of the shuffled complex evolution method (from Q. Y. Duan, Gupta, and Sorooshian (1993)), with \\(V=n\\), \\(NGS=p\\), \\(NPG=m\\) and \\(NPT=s\\)\n\n\nThe SCE-UA method is explained in Figure 10.2 and Figure 10.3 for a two dimensional case (Q. Duan, Sorooshian, and Gupta 1994). The contour lines in Figure 10.2 and Figure 10.3 represent a function surface having a global optimum located at (4,2) and a local optimum located at (1,2). Figure 10.2 (a) shows that a sample population containing \\(NPT\\) (=10) points is divided into \\(NGS\\) (=2) complexes. Each complex contains \\(NPG\\) (=5) points which are marked by • and * respectively. Figure 10.2 (b) shows the locations of the points in the two independently evolved complexes at the end of the first cycle of evolution. It can be seen that one complex (marked by *) is converging towards the local optimum, while the other (marked by •) is converging toward the global optimum. The two evolved complexes are shuffled according to Step 5. Figure 10.2 (c) displays the new membership of the two evolved complexes after shuffling.\nFigure 10.2 (d) illustrates the two complexes at the end of the second cycle of evolution. It is clear that both complexes are now converging to the global optimum at the end of second cycle.\n\n\n\nFigure 10.2: Illustration of the shuffled complex evolution (SCE-UA) method (from Q. Duan, Sorooshian, and Gupta (1994))\n\n\nThe CCE algorithm is graphically illustrated in Figure 10.3. The black dots (•) indicate the locations of the points in a complex before the evolution step is taken. A sub-complex containing \\(NPS\\) (=3, i.e. forms a triangle in this case) points is selected according to a pre-specified probability distribution to initiate an evolution step.\nThe probability distribution is specified such that the better points have a higher chance of being chosen to form the sub-complex than the worse points. The symbol (*) represents the new points generated by the evolution steps. There are three types of evolution steps: reflection, contraction and mutation.\nFigure 10.3 (a), Figure 10.3 (b) and Figure 10.3 (d) illustrate the “reflection” step, which is implemented by reflecting the worst point in a sub-complex through the centroid of the other points. Since the reflected point has a lower criterion value than the worst point, the worst point is discarded and replaced by the new point. Thus an evolution step is completed.\nIn Figure 10.3 (c), the new point is generated by a “contraction” step (the new point lies half-way between the worst point and the centroid of the other points), after rejecting a reflection step for not improving the criterion value.\nIn Figure 10.3 (e), a “mutation” step is taken by random selection of a point in the feasible parameter space to replace the wrong point of the sub-complex. This is realized after a reflection step is attempted, but results in a wrong point, i.e. outside of the feasible parameter space. Another scenario in which a mutation step is taken is when both the reflection step and the contraction step do not improve the criterion value.\nFinally, the Figure 10.3 (f) shows the final complex after \\(NSPL\\) (=5) evolution steps.\n\n\n\nFigure 10.3: Illustration of the evolution steps taken by each complex (from Q. Duan, Sorooshian, and Gupta (1994)).\n\n\n\n\nAlgorithm parameters\nDifferent parameters of the SCE-UA have to be defined by the user (Table 10.2), as presented hereafter, and other parameters are directly calculated by the process.\nAn initial set of \\(Nopt\\) parameters is given by the user or is assumed as random depending on the user’s needs and the used hydrological models. The other \\(NPT-1\\) points (or parameters sets) are randomly created by the algorithm, depending on a \\(SEED\\) value. The number of points \\(NPG\\) in each complex corresponds to \\(2 \\cdot Nopt+1\\) and the number of points NPS in each sub-complex to \\(Nopt+1\\) (It has to be noted that each point corresponds to a set of parameters). The number of evolution steps allowed for each complex before complex shuffling, \\(NSPL\\), is equal to \\(NPG\\). The number of complexes is defined as \\(NGS\\), which is assumed equal to MINGS according to the Duan investigation. Then, the total number of points \\(NPT\\) in the entire sample population is \\(NGS \\cdot NPG\\).\nThree different convergence criteria are defined by the user:\n\nThe maximum number of function evaluations (or iterations) \\(MAXN\\).\nThe number of shuffling loops (\\(KSTOP\\)) in which the criterion value must change by a fixed percentage (\\(PCENTO\\)) before optimization is finished.\nThe \\(PEPS\\) parameter which provides a flag indicating whether parameter convergence is reached (it compares the value of \\(PEPS\\) with the normalized geometric mean of parameter ranges).\n\n\n\nTable 10.2: Parameters of the SCE-UA algorithm\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nDefault Value\n\n\n\n\nMAXM\n-\nMaximum number of iterations\n10000\n\n\nNGS\n-\nNumber of complexes\n3\n\n\nKSTOP\n-\nNumber of shuffling loops\n10\n\n\nPCENTO\n-\nCriterion value on shuffling loops\n0.1\n\n\nPEPS\n-\nConvergence parameter\n0.001\n\n\nSEED\n-\nSeed value\nRandom"
  },
  {
    "objectID": "tech_calibration_algorithms.html#sec-tech_calibration_algorithms_uamc",
    "href": "tech_calibration_algorithms.html#sec-tech_calibration_algorithms_uamc",
    "title": "10  Calibration algorithms",
    "section": "10.4 Uniform Adaptive Monte Carlo",
    "text": "10.4 Uniform Adaptive Monte Carlo\n\nModel architecture\nThe Uniform Adaptive Monte Carlo (UAMC) algorithm is based on the Monte Carlo experiments that rely on repeated random sampling to obtain simulation results (Gilks, Richardson, and Spiegelhalter 1995; Liu 2004); but has been modified in order to iteratively adjust the solution space.\nThe algorithm randomly launches a collection of simulations (block) and finds the better results in the solution space. Afterwards, the solution space is adjusted and a new group of simulations starts. The process is repeated until the optimization converges to the best set of parameters (Figure 10.4).\n\n\nAlgorithm parameters\nDifferent parameters of the UAMC algorithm have to be defined by the user (Table 10.3), as presented hereafter.\nA number of iterations \\(ITGR\\) per group is defined for the optimization. Random values of parameters are used for each iteration of the group based on a \\(SEED\\) value. Once the first group of iterations is finished, a number \\(NUMBEST\\) of best values is applied for calculating the solutions space range for the next group of iterations. This solution space takes into account the minimum and the maximum values of each parameter providing the best values and adds an additional range \\(COEFRANG\\).\nFinally, the optimization finishes when the convergence criterion (defined as \\(ERR\\)) is achieved, or when the maximum number of iterations \\(MAXN\\) is attained.\n\n\nTable 10.3: Parameters of the UAMC algorithm\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nDefault Value\n\n\n\n\nMAXN\n-\nMaximum number of iterations\n2000\n\n\nITGR\n-\nNumber of iterations per group\n100\n\n\nNUMBEST\n-\nNumber of best values taken into account for the next group calculation\n5\n\n\nCOEFRANG\n-\nAdditional range coefficient\n0.1\n\n\nERR\n-\nError difference until convergence\n0.001\n\n\nSEED\n-\nSeed value\nRandom\n\n\n\n\n\n\n\nFigure 10.4: Flow chart of the UAMC algorithm"
  },
  {
    "objectID": "tech_calibration_algorithms.html#sec-tech_calibration_algorithms_rosenb",
    "href": "tech_calibration_algorithms.html#sec-tech_calibration_algorithms_rosenb",
    "title": "10  Calibration algorithms",
    "section": "10.5 Coupled Latin Hypercube and Rosenbrock",
    "text": "10.5 Coupled Latin Hypercube and Rosenbrock\n\nModel architecture\nThe Coupled Latin Hypercube (McKay, Beckman, and Conover 1979) and the Rosenbrock algorithm (Rosenbrock 1960), called hereafter CLHR, generates a powerful tool for optimization of complex problems. This combined algorithm can discretize a wide domain and then narrow your search to smaller sectors (Figure 10.5). Scanning of the space of possible solutions is performed by the Latin Hypercube. This algorithm allows pseudo-statistical sampling conditioned by the previous calculated solutions. The Latin hypercube is an evolution of Monte Carlo method, with more homogeneous samples achieved with fewer samples. An important advantage of this method is that the dimension of the problem is defined by the division of the latin hypercube and not by the number of parameters.\nThe best results from samples become the starting points required for Rosenbrock algorithm. The advantage of this subroutine calculation lies in the speed to obtain near optimal values. This algorithm is based on a gradient search, adjusting axis changes based on the direction of maximum enhancement, thus reducing the number of evaluations of the objective function.\n\n\n\nFigure 10.5: Illustration of the operation of the CLHR algorithm\n\n\nA general description of the steps of the CLHR method is given below:\nStep 1\nGenerate sample: Generation and evaluation of a pseudorandom sample by a Latin hypercube within the feasible parameter space. If the size of the hypercube is greater, uncertainty is reduced within the domain of search.\nStep 2\nRank points: The results obtained in the first step are ordered (Figure 10.6). The best results from the Latin hypercube algorithm will serve as starting points to launch the Rosenbrock algorithm.\n\n\n\nFigure 10.6: Illustration of the operation of the Latin Hypercube algorithm\n\n\nStep 3\nLaunch of Rosenbrock: Rosenbrock algorithm starts at least once. This subroutine searches around the starting point the values that improve the objective function. Depending on whether the objective function improves or worsens, the parameters values are changed to advance or backward.\nStep 4\nAxes change: Axes are changed to orient the Cartesian axes to the direction of maximum improvement. For applying this change of axes, it should have obtained worse results in all directions of search and at least an improvement in one of these directions (remember each direction has 2 ways).\nStep 5\nThe best result of all Rosenbrock releases is stored.\n\n\n\nFigure 10.7: Illustration of the operation of the Rosenbrock algorithm\n\n\n\n\nAlgorithm parameters\nNumber of tests with the latin hypercube algorithm is equal to the parameter \\(DivLH\\) (\\(\\geq 2\\)).The \\(SEED\\) is responsible for generating the randomness of the sample.\nThe \\(RLAUNCHES\\) (\\(1 \\geq RLAUNCHES \\leq DivLH\\)) best results from the Latin Hypercube algorithm are used as starting points for the Rosenbrock algorithm.\nThe \\(ALPHA\\) coefficient represents the increment in the direction of search if the objective function improves. The \\(BETA\\) coefficient represents the movement if a worse result is obtained.\nThe \\(STEPROS\\) parameter indicates the subdivisions for each parameter’s range. It is used to calculate value variations in each of the parameters (\\(∆_i\\)) to be studied, as presented in Equation 10.2.\n\\[\n\\frac{MaxP{arameterValue}_{i} - Min{ParameterValue}_{i}}{STEPROS} = Delta_i\n\\qquad(10.2)\\]\nThe optimization finishes when the convergence criterion (defined as \\(ERR\\)) is achieved, or when the maximum number of iterations \\(MAXN\\) is attained.\n\n\nTable 10.4: Parameters of the CLHR algorithm\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nDefault Value\n\n\n\n\nMAXN\n-\nMaximum number of iterations\n2000\n\n\nDivLH\n-\nLatin hypercube division\n50\n\n\nSEED\n-\nSeed value\nRandom\n\n\nRLAUNCHES\n-\nRosenbrock algorithm launches\n2\n\n\nALPHA\n-\nAdvance coefficient\n3\n\n\nBETA\n-\nBackward coefficient\n-0.5\n\n\nSTEPROS\n-\nParameter range subdivision\n40\n\n\nERR\n-\nConvergence parameter\n0.001"
  },
  {
    "objectID": "tech_calibration_algorithms.html#references",
    "href": "tech_calibration_algorithms.html#references",
    "title": "10  Calibration algorithms",
    "section": "References",
    "text": "References\n\n\n\n\nAbbott, Michael B., and Jens Christian Refsgaard, eds. 1996. Distributed Hydrological Modelling. Vol. 22. Water Science and Technology Library. Dordrecht: Springer Netherlands. https://doi.org/10.1007/978-94-009-0257-2.\n\n\nAjami, Newsha K., Hoshin Gupta, Thorsten Wagener, and Soroosh Sorooshian. 2004. “Calibration of a Semi-Distributed Hydrologic Model for Streamflow Estimation Along a River System.” Journal of Hydrology 298 (1-4): 112–35. https://doi.org/10.1016/j.jhydrol.2004.03.033.\n\n\nBlasone, R.-S., H. Madsen, and Dan Rosbjerg. 2007. “Parameter Estimation in Distributed Hydrological Modelling: Comparison of Global and Local Optimisation Techniques.” Hydrology Research 38 (4-5): 451–76. https://doi.org/10.2166/nh.2007.024.\n\n\nDuan, Q. Y., V. K. Gupta, and S. Sorooshian. 1993. “Shuffled Complex Evolution Approach for Effective and Efficient Global Minimization.” Journal of Optimization Theory and Applications 76 (3): 501–21. https://doi.org/10.1007/BF00939380.\n\n\nDuan, Qingyun, Soroosh Sorooshian, and Vijai Gupta. 1992. “Effective and Efficient Global Optimization for Conceptual Rainfall-Runoff Models.” Water Resources Research 28 (4): 1015–31. https://doi.org/10.1029/91WR02985.\n\n\nDuan, Qingyun, Soroosh Sorooshian, and Vijai K. Gupta. 1994. “Optimal Use of the SCE-UA Global Optimization Method for Calibrating Watershed Models.” Journal of Hydrology 158 (3-4): 265–84. https://doi.org/10.1016/0022-1694(94)90057-4.\n\n\nGilks, W. R., S. Richardson, and David Spiegelhalter, eds. 1995. Markov Chain Monte Carlo in Practice. 0th ed. Chapman; Hall/CRC. https://doi.org/10.1201/b14835.\n\n\nGriensven, A. van, T. Meixner, S. Grunwald, T. Bishop, M. Diluzio, and R. Srinivasan. 2006. “A Global Sensitivity Analysis Tool for the Parameters of Multi-Variable Catchment Models.” Journal of Hydrology 324 (1-4): 10–23. https://doi.org/10.1016/j.jhydrol.2005.09.008.\n\n\nHapuarachchi, H. A. Prasantha, Zhijia Li, and Shouhui Wang. 2001. “Application of SCE-UA Method for Calibrating the Xinanjiang Watershed Model.” Journal of Lake Sciences 12 (4): 304–14.\n\n\nJeremiah, Erwin, Scott A. Sisson, Ashish Sharma, and Lucy Marshall. 2012. “Efficient Hydrological Model Parameter Optimization with Sequential Monte Carlo Sampling.” Environmental Modelling & Software 38 (December): 283–95. https://doi.org/10.1016/j.envsoft.2012.07.001.\n\n\nKamali, M., K. Ponnambalam, and E. D. Soulis. 2013. “Comparison of Several Heuristic Approaches to Calibration of WATCLASS Hydrologic Model.” Canadian Water Resources Journal 38 (1): 40–46. https://doi.org/10.1080/07011784.2013.774154.\n\n\nKang, Fei, Junjie Li, and Zhenyue Ma. 2011. “Rosenbrock Artificial Bee Colony Algorithm for Accurate Global Optimization of Numerical Functions.” Information Sciences 181 (16): 3508–31. https://doi.org/10.1016/j.ins.2011.04.024.\n\n\nLin, Jian-Yi, Chun-Tian Cheng, and Tao Lin. 2008. “A Pareto Strength SCE-UA Algorithm for Reservoir Optimization Operation.” In 2008 Fourth International Conference on Natural Computation, 406–12. Jinan, Shandong, China: IEEE. https://doi.org/10.1109/ICNC.2008.84.\n\n\nLiu, Jun S. 2004. Monte Carlo Strategies in Scientific Computing. Springer Series in Statistics. New York, NY: Springer New York. https://doi.org/10.1007/978-0-387-76371-2.\n\n\nMariani, Viviana Cocco, Luiz Guilherme Justi Luvizotto, Fábio Alessandro Guerra, and Leandro dos Santos Coelho. 2011. “A Hybrid Shuffled Complex Evolution Approach Based on Differential Evolution for Unconstrained Optimization.” Applied Mathematics and Computation 217 (12): 5822–29. https://doi.org/10.1016/j.amc.2010.12.064.\n\n\nMcKay, M. D., R. J. Beckman, and W. J. Conover. 1979. “A Comparison of Three Methods for Selecting Values of Input Variables in the Analysis of Output from a Computer Code.” Technometrics 21 (2): 239. https://doi.org/10.2307/1268522.\n\n\nMuttil, Nitin, and Shie-Yui Liong. 2004. “Superior Exploration–Exploitation Balance in Shuffled Complex Evolution.” Journal of Hydraulic Engineering 130 (12): 1202–5. https://doi.org/10.1061/(ASCE)0733-9429(2004)130:12(1202).\n\n\nNelder, J. A., and R. Mead. 1965. “A Simplex Method for Function Minimization.” The Computer Journal 7 (4): 308–13. https://doi.org/10.1093/comjnl/7.4.308.\n\n\nRosenbrock, H. H. 1960. “An Automatic Method for Finding the Greatest or Least Value of a Function.” The Computer Journal 3 (3): 175–84. https://doi.org/10.1093/comjnl/3.3.175.\n\n\nVrugt, Jasper A., Hoshin V. Gupta, Luis A. Bastidas, Willem Bouten, and Soroosh Sorooshian. 2003. “Effective and Efficient Algorithm for Multiobjective Optimization of Hydrologic Models.” Water Resources Research 39 (8). https://doi.org/10.1029/2002WR001746.\n\n\nWang, Lei, Cho Thanda Nyunt, Toshio Koike, Oliver Saavedra, Lan Chau Nguyen, and Tran van Sap. 2010. “Development of an Integrated Modeling System for Improved Multi-Objective Reservoir Operation.” Frontiers of Architecture and Civil Engineering in China 4 (1): 47–55. https://doi.org/10.1007/s11709-010-0001-x.\n\n\nZhu, Xiaobin, Jichun Wu, and Jianfeng Wu. 2006. “Application of SCE-UA to Optimize the Management Model of Groundwater Resources in Deep Aquifers of the Yangtze Delta.” In First International Multi-Symposiums on Computer and Computational Sciences (IMSCCS’06), 2:303–8. https://doi.org/10.1109/IMSCCS.2006.192."
  },
  {
    "objectID": "tech_stochastic_equations.html",
    "href": "tech_stochastic_equations.html",
    "title": "11  Stochastic equations",
    "section": "",
    "text": "The problem of identifiability is basic to all statistical methods and data analysis and it occurs in diverse areas such as reliability theory, survival analysis, econometrics, etc., where stochastic modelling is widely used (Prakasa Rao 1992).\nThe module Stochastic of the Expert frame has been implemented for launching multiple simulations depending of the object’s selected parameters. This module uses probability distributions to calculate the simulation parameters. The defaults results are two CSV files, one of them is a statistics series of all the simulations and the other is a parameter series with a selected distribution. The user can save all the simulation in a single file when the process is finished."
  },
  {
    "objectID": "tech_stochastic_equations.html#sec-tech_stochastic_equations_distributions",
    "href": "tech_stochastic_equations.html#sec-tech_stochastic_equations_distributions",
    "title": "11  Stochastic equations",
    "section": "11.2 Probability distributions",
    "text": "11.2 Probability distributions\nA probability distribution assigns a probability to each measurable subset of the possible outcomes of a random experiment. The predefined distributions are uniform, normal, log normal, exponential and finally it is possible use a customized distribution (Figure 11.1).\n\n\n\nFigure 11.1: Probability distributions of the stochastic simulations module\n\n\nFor define a correct probability distribution, the area under the probability density function must be equal to 1. For other hand, cumulative distribution function is bounded between 0 and 1 and also it must be non-decreasing and right-continuous.\n\nUniform\nThe continuous uniform distribution or rectangular distribution is a family of symmetric probability distributions such that for each member of the family, all intervals of the same length on the distribution’s support are equally probable. Figure 11.2 shows an example with a bounded \\(X\\) between [-5, 5].\n\n\n\nFigure 11.2: Uniform distribution. Probability density function (left), cumulative distribution function (right)\n\n\n\n\nNormal\nThe normal distribution (or Gaussian distribution) is a very common continuous probability distribution. Normal distributions are important in statistics and are often used to represent distributions are not known. Several characterizations of the univariate and the multivariate normal distribution are known (Kagan and Shalaevsky 1967; Prakasa Rao 1992). The normal distribution is sometimes informally called the bell curve. The following Figure 11.3 shows an example with a bounded \\(X\\) axis between [-5,5], where is more probable to find an \\(X\\) value.\n\n\n\nFigure 11.3: Normal distribution. Probability density function (left), cumulative distribution function (right)\n\n\nProbability density function:\n\\[\n\\varphi = f(x\\ |\\ \\mu,\\ \\sigma) = \\frac{1}{\\sigma\\sqrt{2\\pi}} \\cdot e^{- \\frac{(x - \\mu)^{2}}{2\\sigma^{2}}}\n\\qquad(11.1)\\]\nwith \\(\\mu\\): mean or expectation of the distribution (and also its median and mode); \\(\\sigma^{2}\\): variance; \\(\\sigma\\): standard deviation.\nCumulative distribution function:\n\\[\n\\phi = f(x\\ |\\ \\mu,\\ \\sigma) = \\frac{1}{2}\\cdot \\Bigg( 1 + \\frac{1}{\\sqrt{\\pi}}\\int_{- \\Big( \\frac{x - \\mu}{\\sigma\\sqrt{2}} \\Big)}^{\\Big( \\frac{x - \\mu}{\\sigma\\sqrt{2}} \\Big)}e^{{- t}^{2}} \\mathrm{d}t \\Bigg)\n\\qquad(11.2)\\]\nThe normal distribution is useful because of the central limit theorem. In its most general form, under some conditions, it states that averages of random variables independently drawn from independent distributions converge in distribution to the normal, that is, become normally distributed when the number of random variables is sufficiently large.\n\n\nLog normal\nA log-normal distribution is a continuous probability distribution of a random variable whose logarithm is normally distributed. Consequently, if the random variable \\(X\\) is log-normally distributed, then \\(Y = ln(X)\\) has a normal distribution. Likewise, if \\(Y\\) has a normal distribution, then \\(X = e^y\\) has a log-normal distribution. A random variable which is log-normally distributed takes only positive real values (Johnson, Kotz, and Balakrishnan 1994). Figure 11.4 shows an example with a bounded \\(X\\) axis between [0, 2], where is more probable to find an \\(X\\) value.\n\n\n\nFigure 11.4: Log normal distribution. Probability density function (left), cumulative distribution function (right)\n\n\nProbability density function:\n\\[\n\\varphi = f(x\\ |\\ \\mu,\\ \\sigma) = \\frac{1}{x\\sigma\\sqrt{2\\pi}}e^{- \\frac{\\left( \\ln x - \\mu \\right)^{2}}{2\\sigma^{2}}}\n\\qquad(11.3)\\]\nwith \\(\\mu\\): mean or expectation of the distribution (and also its median and mode); \\(\\sigma^{2}\\): variance; \\(\\sigma\\) standard deviation.\nCumulative distribution function:\n\\[\n\\phi = f(x\\ |\\ \\mu,\\ \\sigma) = \\frac{1}{2}\\left\\lbrack 1 + \\frac{1}{\\sqrt{\\pi}}\\int_{- \\left( \\frac{\\ln x - \\mu}{\\sigma\\sqrt{2}} \\right)}^{\\left( \\frac{\\ln x - \\mu}{\\sigma\\sqrt{2}} \\right)}e^{{- t}^{2}}dt \\right\\rbrack\n\\qquad(11.4)\\]\nA log-normal process is the statistical realization of the multiplicative product of many independent random variables, each of which is positive. This is justified by considering the central limit theorem in the log domain. The log-normal distribution is the maximum entropy probability distribution for a random variate \\(X\\) for which the mean and variance of \\(ln(X)\\) are specified (Park and Bera 2009).\n\n\nExponential\nThe exponential distribution describes the time between events in a Poisson point process. Is a type of random mathematical object that consists of points randomly located on a mathematical space (Chiu et al. 2013). It is a particular case of the gamma distribution. It is the continuous analogue of the geometric distribution, and it has the key property of being memoryless. Figure 11.5 shows an example with a bounded \\(X\\) axis between [0, 10], where is more probable to find an \\(X\\) value.\n\n\n\nFigure 11.5: Exponential distribution. Probability density function (left), cumulative distribution function (right)\n\n\nProbability density function:\n\\[\n\\varphi = f(x\\ |\\ \\lambda) = \\lambda e^{- \\lambda x}\n\\qquad(11.5)\\]\nwith \\(\\lambda\\): the parameter of the distribution, often called the rate parameter (\\(λ>0\\)).\nCumulative distribution function:\n\\[\n\\phi = f(x\\ |\\ \\lambda) = 1 - e^{- \\lambda x}\n\\qquad(11.6)\\]\n\n\nUser defined\nFor define a custom probability distribution, the user must create a text file with two columns (Figure 11.6, left). The first column is the cumulated probability and the second it is for the \\(X\\) value associated. The middle values are calculated with a linear interpolation method. Figure 11.6 right is the cumulative distribution for a user defined distribution.\n\n\n\nFigure 11.6: Custom distribution. Format distribution file (left). Cumulative distribution function (right).\n\n\nFigure 11.7 shows the probability density function for the user defined distribution. As same to cumulative distribution, program calculate middle point through linear interpolation.\n\n\n\nFigure 11.7: User distribution. Probability density function."
  },
  {
    "objectID": "tech_stochastic_equations.html#references",
    "href": "tech_stochastic_equations.html#references",
    "title": "11  Stochastic equations",
    "section": "References",
    "text": "References\n\n\n\n\nChiu, Sung Nok, Dietrich Stoyan, Wilfrid S. Kendall, and Joseph Mecke, eds. 2013. Stochastic Geometry and Its Applications. 1st ed. Wiley Series in Probability and Statistics. Wiley. https://doi.org/10.1002/9781118658222.\n\n\nJohnson, N. L., S. Kotz, and N. Balakrishnan. 1994. “14: Lognormal Distributions.” In Continuous Univariate Distributions. Vol. 1. New York, USA: John Wiley & Sons.\n\n\nKagan, A., and O. Shalaevsky. 1967. “Characterization of Normal Law by a Property of the Non-Central Χ²-Distribution.” Lithuanian Mathematical Journal 7 (1): 57–58. https://doi.org/10.15388/LMJ.1967.19934.\n\n\nPark, Sung Y., and Anil K. Bera. 2009. “Maximum Entropy Autoregressive Conditional Heteroskedasticity Model.” Journal of Econometrics 150 (2): 219–30. https://doi.org/10.1016/j.jeconom.2008.12.014.\n\n\nPrakasa Rao, B. L. S. 1992. Identifiability in Stochastic Models : Characterization of Probability Distributions. Probability and Mathematical Statistics. Boston: Academic Press."
  },
  {
    "objectID": "tech_scripts.html",
    "href": "tech_scripts.html",
    "title": "12  Visual Basic Scripts",
    "section": "",
    "text": "VBScript (Visual Basic Scripting Edition) is an Active Scripting language developed by Microsoft that is modelled on Visual Basic. It is designed as a “lightweight” language with a fast interpreter and can be effectively used for automating day to day office tasks as well as monitoring in the Windows-based environment. It has been installed by default in every desktop release of Microsoft Windows since Windows 98.\nThis chapter describes the methodology to run tasks using Visual Basic scripts when working with RS MINERVE models (running a model, extracting information from dataset, etc.)."
  },
  {
    "objectID": "tech_scripts.html#introduction-to-visual-basic-scripts",
    "href": "tech_scripts.html#introduction-to-visual-basic-scripts",
    "title": "12  Visual Basic Scripts",
    "section": "12.1 Introduction to Visual Basic Scripts",
    "text": "12.1 Introduction to Visual Basic Scripts\nA VBScript script must be executed within a host environment, of which there are several provided with Microsoft Windows, including: Windows Script Host (WSH), Internet Explorer (IE), and Internet Information Services (IIS).\nVBScript can also be used to create applications that run directly on a workstation running Microsoft Windows. The simplest example is a script that makes use of the Windows Script Host (WSH) environment. Such a script is usually in a stand-alone file with the file extension .vbs.\nVBScript can be used for managing RS MINERVE without the graphical interface. The VBScript can be invoked in two ways: from the command line with Cscript, or directly by double-clicking on the script.\nIn VBScript, Properties are attributes or values of an object that can be read and set. As long as the value returned by the property is not an object, setting and retrieving property values requires a simple assignment statement. Many properties return either individual objects or collections (a collection is an object that serves as a container for other data items or objects). These also require assignment statements that use the Set statement. For example, you can retrieve a reference to the root folder of the C: drive on a local system with a code fragment like the following:\nSet oFS = CreateObject(\"Scripting.FileSystemObject\")\nWhen running RS MINERVE with VBScripts, the following code line has to be used before executing the specific RS MINERVE tasks:\nSet rsm = CreateObject(\"RSMinerve.RS.Task\")\nAlso, it is worth mentioning the difference between:\n\nProcedures (or Sub Procedures): does not return any value.\nFunctions (or Function Procedures): return a value."
  },
  {
    "objectID": "tech_scripts.html#available-vbs-procedures-and-functions-in-rs-minerve",
    "href": "tech_scripts.html#available-vbs-procedures-and-functions-in-rs-minerve",
    "title": "12  Visual Basic Scripts",
    "section": "12.2 Available VBS procedures and functions in RS MINERVE",
    "text": "12.2 Available VBS procedures and functions in RS MINERVE\n\n\nTable 12.1: Summary of the VBS procedures and functions available in RS MINERVE\n\n\nType\nName of procedure/ function\n\n\n\n\nApplication start\nStart\n\n\nModel preparation\nLoadDataset\n\n\n\nLoadDatasetAndSetDates\n\n\n\nMergeLoadedDataset\n\n\n\nLoadInitialConditionsFromFile\n\n\n\nLoadInitialConditionsFromDataset\n\n\n\nLoadInitialConditionsFromFileAndCopyFile\n\n\n\nLoadInitialConditionsFromFileAndMoveFile\n\n\n\nLoadParametersFromFile\n\n\n\nGetStartDateFromDataset\n\n\n\nGetEndDateFromDataset\n\n\n\nGetStartDateFromModel\n\n\n\nGetEndDateFromModel\n\n\n\nGetICDateFromICFile\n\n\n\nSetDates\n\n\n\nSetStartDate\n\n\n\nSetEndDate\n\n\n\nSetSimulationTimeStep\n\n\n\nSetRecordingTimeStep\n\n\n\nSetETPMethod\n\n\n\nSetLongitudeAndLatitude\n\n\n\nSetUniformETPValue\n\n\n\nSetSpatialInterpolationMethod\n\n\n\nDefineModelProperties\n\n\n\nUpdateModelProperties\n\n\n\nSetOutputRatioCoeffsInPlanner\n\n\n\nSetConditionThresholdInPlanner\n\n\n\nSetDaysInPlanner\n\n\n\nSetHoursInPlanner\n\n\nSimulation and reports\nSavePreSimulationReportAs\n\n\n\nSavePreSimulationReport\n\n\n\nSimulate\n\n\n\nSavePostSimulationReportAs\n\n\n\nSavePostSimulationReport\n\n\nSave model and properties\nSaveModelAs\n\n\n\nSaveModel\n\n\n\nSaveInitialConditionsAs\n\n\n\nSaveInitialConditions\n\n\n\nSaveFinalConditionsAs\n\n\n\nSaveFinalConditions\n\n\n\nSaveParametersAs\n\n\n\nSaveParameters\n\n\nModel results\nSaveFullResultsAs\n\n\n\nSaveFullResults\n\n\n\nSaveSelectionResultsAs\n\n\n\nSaveSelectionResults\n\n\n\nSaveInitializationDatasetAs\n\n\n\nSaveInitializationDataset\n\n\n\nExportResultsTo\n\n\n\nMergeFullResults\n\n\n\nMergeSelectionResults\n\n\n\nMergeDatasetsAs\n\n\n\nMergeDatasets\n\n\n\nGetPropertyValue\n\n\n\nGetIndicatorValue\n\n\nCalibration\nLoadCalibrationsInModel\n\n\n\nLoadCalibrationsByFile\n\n\n\nSaveAllCalibrationsInModel\n\n\n\nRunCalibration\n\n\n\nRunAllCalibrations\n\n\n\nExportCalibrationResults\n\n\n\nExportAllCalibrationsResults\n\n\n\nSetCalibrationDates\n\n\nApplication stop\nStop\n\n\nOther procedures /functions\nRemoveFile\n\n\n\nGetAppVersion\n\n\n\nGetReaderVersion"
  },
  {
    "objectID": "tech_scripts.html#sec-tech_scripts_start",
    "href": "tech_scripts.html#sec-tech_scripts_start",
    "title": "12  Visual Basic Scripts",
    "section": "12.3 Application Start",
    "text": "12.3 Application Start\n\n\n\n\n\n\n\n Start \nOpening of the model\n\n\n\nDescription\nThis procedure opens the indicated model to be used.\nSyntax\nStart (modelFullPath, debug=false)\nParameters\n\n\n\n\n\n\n\nmodelFullPath\nString. Full path of the hydrological model. The file extension of the model has to be *.rsm; otherwise, the script reports an error.\n\n\nDebug\nBoolean (optional). If TRUE, the script writes a text file with the error logs.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“Model file not defined”\n\n\nArgument Exception\n“Model file not found”\n\n\nInvalid Operation Exception\n“Model file not valid”"
  },
  {
    "objectID": "tech_scripts.html#model-preparation",
    "href": "tech_scripts.html#model-preparation",
    "title": "12  Visual Basic Scripts",
    "section": "12.4 Model preparation",
    "text": "12.4 Model preparation\n\n\n\n\n\n\n\n LoadDataset \nLoading of the input dataset\n\n\n\nDescription\nThis procedure loads the indicated input dataset in the model. The model has to have been previously open.\nSyntax\nLoadDataset (inputDatasetFullPath)\nParameters\n\n\n\n\n\n\n\ninputDatasetFullPath\nString. Full path of the input dataset\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Input dataset not defined”\n\n\nArgument Exception\n“Input dataset not found”\n\n\nInvalid Operation Exception\n“Input dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to apply datasources”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n LoadDatasetAndSetDates \nLoading of the input dataset and set dates\n\n\n\nDescription\nThe input dataset is loaded, and the datasource and the simulation period are defined based on the dataset. Depending on the parameters and whether each time series have a different period, the simulation period is defined.\nSyntax\nLoadDatasetAndSetDates (inputDatasetFullPath, canBeginWithMissingData, canEndWithMissingData)\nParameters\n\n\n\n\n\n\n\ninputDatasetFullPath\nString. Full path of the input dataset\n\n\ncanBeginWithMissingData\nBoolean. If false, the last start date of the time series is used as simulation date start.\n\n\ncanEndWithMissingData\nBoolean. If false, the first last date of the time series is used as simulation date end.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Input dataset not defined”\n\n\nArgument Exception\n“Input dataset not found”\n\n\nInvalid Operation Exception\n“Input dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to apply datasources”\n\n\nInvalid Operation Exception\n“Input dataset is empty”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n MergeLoadedDataset \nMerging of the input dataset to base dataset\n\n\n\nDescription\nThis procedure merges a loaded dataset to a base dataset. It can be useful when new data is available and the user would like to merge to historical data. The result is an updated base dataset containing the loaded dataset, saved in a text or binary format file.\nSyntax\nMergeLoadedDataset (baseDatasetFullPath, saveDataInDstFile)\nParameters\n\n\n\n\n\n\n\nbaseDatasetFullPath\nString. Full path of the base dataset.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Input dataset not loaded, failed to merge with base dataset”\n\n\nArgument Null Exception\n“Input dataset not defined”\n\n\nArgument Exception\n“Fullpath of base dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to create new base dataset”\n\n\nInvalid Operation Exception\n“Base dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to merge input dataset with base dataset”\n\n\nInvalid Operation Exception\n“Failed to save changes in base dataset”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n LoadInitialConditionsFromFile \nSetting of the initial conditions\n\n\n\nDescription\nThis procedure sets the initial conditions of the model from a text or an Excel file (please refer to Section 13.2 to learn more about Initial Conditions files).\nSyntax\nLoadInitialConditionsFromFile (icFileFullPath)\nParameters\n\n\n\n\n\n\n\nicFileFullPath\nString. Full path of the IC file. Accepted file extensions are *.txt and *.xlsx.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“IC file not defined”\n\n\nArgument Exception\n“IC file not found”\n\n\nInvalid Operation Exception\n“Failed to import initial conditions from IC file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n LoadInitialConditionsFromDataset \nSetting of the initial conditions from a dataset\n\n\n\nDescription\nThe initial conditions are set from a dataset file (please refer to Section 14.2 of this manual to learn more about dataset formats).\nSyntax\nLoadInitialConditionsFromDataset (icDatasetFullPath)\nParameters\n\n\n\n\n\n\n\nicDatasetFullPath\nString. Full path of the dataset from where to extract the initial conditions.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“IC dataset not defined”\n\n\nArgument Exception\n“IC dataset not found”\n\n\nInvalid Operation Exception\n“IC dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to load results from IC dataset”\n\n\nInvalid Operation Exception\n“Failed to initialize the model with IC dataset”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n LoadInitialConditionsFromFileAndCopyFile \nSetting of the initial conditions from a file and copy the file\n\n\n\nDescription\nThis procedure sets the initial conditions of the model from a text or an Excel file, and copies them in a newly created text file (which name is based on the original IC filename but includes the start date of the simulation). If the indicated folder where to create the new IC file does not exist it will be created.\nSyntax\nLoadInitialConditionsFromFileAndCopyFile (icFileFullPath, saveFolder)\nParameters\n\n\n\n\n\n\n\nicFileFullPath\nString. Full path of the IC file. Accepted file extensions are *.txt and *.xlsx.\n\n\nsaveFolder\nString. Folder where results have to be stored.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“IC file not defined”\n\n\nArgument Exception\n“IC file not found”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘saveFolder’ not valid”\n\n\nInvalid Operation Exception\n“Failed to import initial conditions from IC file”\n\n\nInvalid Operation Exception\n“Failed to copy the IC file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n LoadInitialConditionsFromFileAndMoveFile \nLoading of the initial conditions and moving of the text file\n\n\n\nDescription\nThis procedure sets the initial conditions of the model from a text or an Excel file, and moves the file to the specified folder (the filename is based on the original IC filename but includes the start date of the simulation). The target file must not exist before; otherwise an error occurs.\nSyntax\nLoadInitialConditionsFromFileAndMoveFile (icFileFullPath, saveFolder)\nParameters\n\n\n\n\n\n\n\nicFileFullPath\nString. Full path of the IC file. Accepted file extensions are *.txt and *.xlsx.\n\n\nsaveFolder\nString. Folder where results are stored.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“IC file not defined”\n\n\nArgument Exception\n“IC file not found”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘saveFolder’ not valid”\n\n\nInvalid Operation Exception\n“Failed to import initial conditions from IC file”\n\n\nInvalid Operation Exception\n“Failed to move the IC file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n LoadParametersFromFile \nSetting of the parameters\n\n\n\nDescription\nThis procedure sets the parameters of the model from a text or an Excel file (please refer to Section 13.2 of this manual to learn more about Parameters files).\nSyntax\nLoadParametersFromFile (paramFileFullPath)\nParameters\n\n\n\n\n\n\n\nicFileFullPath\nString. Full path of the Parameters file. Accepted file extensions are *.txt and *.xlsx.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Parameters file not defined”\n\n\nArgument Exception\n“Parameters file not found”\n\n\nInvalid Operation Exception\n“Failed to import parameters from Parameters file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetStartDateFromDataset \nGetting the start date from a dataset\n\n\n\nDescription\nThis function extracts the start date of a specified dataset file. If the dataset contains different start dates (data series with initial lacking data), the user can choose whether to get the first common date of the complete dataset.\nSyntax\nGetStartDateFromDataset (DatasetFullPath, canBeginWithMissingData)\nParameters\n\n\n\n\n\n\n\nDatasetFullPath\nString. Full path of the dataset file.\n\n\ncanBeginWithMissingData\nBoolean. If true the last start date of the time series is used as simulation date start.\n\n\n\nReturned value\n\n\n\n\n\n\n\nStart date\nIt returns the value of the start date of a dataset. The format of the date is: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Dataset not defined”\n\n\nArgument Exception\n“Dataset not found”\n\n\nInvalid Operation Exception\n“Dataset not valid”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetEndDateFromDataset \nGetting the end date from a dataset\n\n\n\nDescription\nThis function extracts the end date of a specified dataset file. If the dataset contains different end dates (data series with final lacking data), the user can choose whether to get the last common date of the complete dataset.\nSyntax\nGetEndDateFromDataset (DatasetFullPath, canEndWithMissingData)\nParameters\n\n\n\n\n\n\n\nDatasetFullPath\nString. Full path of the dataset file.\n\n\ncanEndWithMissingData\nBoolean. If true the first last date of the time series is used as simulation date end.\n\n\n\nOutputs\n\n\n\n\n\n\n\nEnd date\nIt returns the value of the end date of a dataset. The format of the date is: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Dataset not defined”\n\n\nArgument Exception\n“Dataset not found”\n\n\nInvalid Operation Exception\n“Dataset not valid”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetStartDateFromModel \nGetting the start date from model\n\n\n\nDescription\nThis function extracts the start date from the loaded model.\nSyntax\nGetStartDateFromModel ()\nReturned value\n\n\n\n\n\n\n\nStart date\nIt returns the value of the start date of the model. The format of the date is: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetEndDateFromModel \nGetting the end date from model\n\n\n\nDescription\nThis function extracts the end date from the loaded model.\nSyntax\nGetEndDateFromModel ()\nReturned value\n\n\n\n\n\n\n\nEnd date\nIt returns the value of the end date of the model. The format of the date is: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetICDateFromICFile \nGetting the date from an Initial Conditions file\n\n\n\nDescription\nThis function extracts the date corresponding to a specified Initial Conditions file.\nSyntax\nGetICDateFromICFile (icFileFullPath)\nParameters\n\n\n\n\n\n\n\nicFileFullPath\nString. Full path of the IC file. Accepted file extension is *.txt.\n\n\n\nReturned value\n\n\n\n\n\n\n\nDate\nIt returns the date of the Initial Conditions file. The format of the date is: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“IC file not defined”\n\n\nArgument Exception\n“IC file not found”\n\n\nInvalid Operation Exception\n“Failed to get IC Date from IC file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetDates \nSetting of the dates\n\n\n\nDescription\nThis procedure sets the simulation period based on specified start and end dates.\nSyntax\nSetDates (startDate, endDate)\nParameters\n\n\n\n\n\n\n\nstartdate\nDate. Start date for the simulation period. The format of the date has to be: dd.MM.yyyy HH:mm:ss.\n\n\nenddate\nDate. End date for the simulation period. The format of the date has to be: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Start Date not valid, unable to convert ‘startdate’ to a Date”\n\n\nArgument Exception\n“End Date not valid, unable to convert ‘enddate’ to a Date”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetStartDate \nSetting of the start date\n\n\n\nDescription\nThis procedure sets the simulation period start date.\nSyntax\nSetStartDate (startDate)\nParameters\n\n\n\n\n\n\n\nstartdate\nDate. Start date for the simulation period. The format of the date has to be: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Start Date not valid, unable to convert ‘startdate’ to a Date”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetEndDate \nSetting of the end date\n\n\n\nDescription\nThis procedure sets the simulation period end date.\nSyntax\nSetEndtDate (endDate)\nParameters\n\n\n\n\n\n\n\nenddate\nDate. End date for the simulation period. The format of the date has to be: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“End Date not valid, unable to convert ‘enddate’ to a Date”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetSimulationTimeStep \nSetting of the simulation timestep\n\n\n\nDescription\nThis procedure sets the simulation timestep and its unit for the simulation.\nSyntax\nSetSimulationTimeStep (value, unit)\nParameters\n\n\n\n\n\n\n\nvalue\nDouble. Simulation time step as double (value has to be >0).\n\n\nunit\nString. Unit: Seconds, Minutes, Hours or Days.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Simulation time step not valid, unable to convert ‘value’ to a Double”\n\n\nArgument Exception\n“Simulation time step not valid, ‘value’ is outside the range of a Double”\n\n\nArgument Exception\n“Simulation time step not valid, unit ‘unit’ not recognized”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetRecordingTimeStep \nSetting of the recording timestep\n\n\n\nDescription\nThis procedure sets the recording timestep and its unit for the simulation.\nSyntax\nSetRecordingTimeStep (value, unit)\nParameters\n\n\n\n\n\n\n\nvalue\nDouble. Recording time step as double (value has to be >0).\n\n\nunit\nString. Unit: Seconds, Minutes, Hours, Days or Months.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Recording time step not valid, unable to convert ‘value’ to a Double”\n\n\nArgument Exception\n“Recording time step not valid, ‘value’ is outside the range of a Double”\n\n\nArgument Exception\n“Recording time step not valid, unit ‘unit’ not recognized”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetETPMethod \nSetting of the ETP method\n\n\n\nDescription\nThis procedure sets the ETP (Potential EvapoTranspiration) method in the model (please refer to Section 13.2 of the User’s Manual to learn more about the model Settings).\nSyntax\nSetETPMethod (etpMethod)\nParameters\n\n\n\n\n\n\n\nselectedETPMethod\nString. Selected ETP Method: Turc, McGuinness, Oudin or Uniform ETP.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Selected ETP Method is not implemented in RS MINERVE”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetLongitudeAndLatitude \nSetting of the Longitude and Latitude\n\n\n\nDescription\nThis procedure sets the Longitude and Latitude used when applying ETP methods.\nSyntax\nSetLongitudeAndLatitude (longitude, latitude)\nParameters\n\n\n\n\n\n\n\nlongitude\nInteger. Selected Longitude.\n\n\nlatitude\nInteger. Selected Latitude.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Longitude not valid”\n\n\nArgument Exception\n“Latitude not valid”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetUniformETPValue \nSetting of the Uniform ETP\n\n\n\nDescription\nThis procedure sets the Uniform ETP value when Uniform ETP Method has been set.\nSyntax\nSetUniformETPValue (value)\nParameters\n\n\n\n\n\n\n\nvalue\nString. Uniform ETP value.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Uniform ETP value not valid”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetSpatialInterpolationMethod \nSetting of the Spatial Interpolation method\n\n\n\nDescription\nThis procedure sets the Spatial Interpolation method to be used.\nSyntax\nSetSpatialInterpolationMethod (spatialInterpolationMethod)\nParameters\n\n\n\n\n\n\n\nselectedETPMethod\nString. Selected ETP Method.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Selected Spatial Interpolation Method does not exist in RS MINERVE”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n DefineModelProperties \nDefining property of an object\n\n\n\nDescription\nThis procedure defines a parameter or an initial condition in all objects included in the specified zone.\nSyntax\nDefineModelProperties (objectType, propertyName, value, zone = null)\nParameters\n\n\n\n\n\n\n\nobjectType\nString. Object type (e.g. SOCONT, GSM, Reservoir, etc.). See Table 12.2.\n\n\npropertyName\nString. Property name (e.g. HGR3Max). See Table 12.2.\n\n\nvalue\nDouble. Value of the property.\n\n\nzone = null\nString (optional). Zone where the objects are.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Object type ‘objectType’ not valid”\n\n\nArgument Null Exception\n“Property name not defined”\n\n\nArgument Exception\n“Zone ‘zone’ not found in ‘hydrologicalmodel’”\n\n\nArgument Exception\n“Value is not valid, unable to convert ‘value’ to a Double”\n\n\nInvalid Operation Exception\n“Failed to define model properties”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n UpdateModelProperties \nUpdating of model properties\n\n\n\nDescription\nThis procedure updates a parameter or an initial condition in all objects included in the specified zone.\nSyntax\nUpdateModelProperties (objectType, propertyName, scale, shift, linkedPropertyName=null, zone = null, objectName=null)\nParameters\n\n\n\n\n\n\n\nobjectType\nString. Object type (e.g. SOCONT, GSM, Reservoir, etc.). See Table 12.2.\n\n\npropertyName\nString. Property name (e.g. HGR3Ini). See Table 12.2.\n\n\nscale\nString. Scale to multiply the current property.\n\n\nshift\nString. Shift to add to the current property.\n\n\nlinkedPropertyName = null\nString (optional). Name of the property that restricts the maximum value of the updated property (e.g. the HGR3Max when updating the HGR3Ini).\n\n\nzone = null\nString (optional). Zone where the objects to which the procedure will be applied are.\n\n\nobjectName = null\nString (optional). Name of the object to which the procedure will be applied. The object must be within the zone if this one has been specified.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Object type ‘objectType’ not valid”\n\n\nArgument Null Exception\n“Property name not defined”\n\n\nArgument Exception\n“Zone ‘zone’ not found in ‘hydrologicalmodel’”\n\n\nArgument Exception\n“Scale is not valid, unable to convert ‘scale’ to a Double”\n\n\nArgument Exception\n“Shift is not valid, unable to convert ‘shift’ to a Double”\n\n\nInvalid Operation Exception\n“Failed to update model properties”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetOutputRatioCoeffsInPlanner \nSetting of the coefficients of the expression defining a rule’s output\n\n\n\nDescription\nThis procedure sets the coefficients A and B in the expression: \\(Q=A \\cdot Output+B\\) for the definition of a particular Rule output at a specified Planner.\nSyntax\nSetOutputRatioCoeffsInPlanner (plannerName, ruleName, coefA, coefB)\nParameters\n\n\n\n\n\n\n\nplannerName\nString. Name of the Planner object concerned.\n\n\nruleName\nString. Name of the Rule (defined within the above Planner) for which the output expression’s coefficients are to be defined.\n\n\ncoefA\nDouble. Value of the coefficient A in the output expression \\(Q=A \\cdot Output+B\\)\n\n\ncoefB\nDouble. Value of the coefficient B in the output expression *\\(Q=A \\cdot Output+B\\)\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“Planner name not defined”\n\n\nArgument Null Exception\n“Rule name not defined”\n\n\nArgument Exception\n“Ratio Coeff. A is not valid, unable to convert to a Double”\n\n\nArgument Exception\n“Ratio Coeff. B is not valid, unable to convert to a Double”\n\n\nInvalid Operation Exception\n“No Planner with this name”\n\n\nInvalid Operation Exception\n“No Rule with this name”\n\n\nInvalid Operation Exception\n“Failed to define Ratio Coefficient in Planner”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetConditionThresholdInPlanner \nSetting of the threshold value of a condition in a specific Planner\n\n\n\nDescription\nThis procedure sets the Threshold value of a condition in a Rule of a specific Planner.\nSyntax\nSetConditionThresholdInPlanner (plannerName, ruleName, conditionName, value)\nParameters\n\n\n\n\n\n\n\nregulationName\nString. Name of the Planner object concerned.\n\n\nruleName\nString. Name of the Rule, defined within the above Planner.\n\n\nconditionName\nString. Name of the Condition, defined within the above Rule, for which the threshold is to be defined.\n\n\nvalue\nDouble. Value of the threshold of the specified condition.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“Planner name not defined”\n\n\nArgument Null Exception\n“Rule name not defined”\n\n\nArgument Null Exception\n“Condition name not defined”\n\n\nArgument Exception\n“Value is not valid, unable to convert to a Double”\n\n\nInvalid Operation Exception\n“No Planner with this name”\n\n\nInvalid Operation Exception\n“No Rule with this name”\n\n\nInvalid Operation Exception\n“No condition with this name”\n\n\nInvalid Operation Exception\n“Failed to define Threshold value in Planner”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetDaysInPlanner \nSetting of the days of a rule in a specific Planner\n\n\n\nDescription\nThis procedure sets the week days of a Rule of a specific Planner.\nSyntax\nSetDaysInPlanner (plannerName, ruleName, day1, day2, day3, day4, day5, day6, day7)\nParameters\n\n\n\n\n\n\n\nplannerName\nString. Name of the Planner object concerned.\n\n\nruleName\nString. Name of the Rule, defined within the above Planner.\n\n\nday1,…, day7\nBoolean. Whether the rule is active for the nth day of the week (day1=Monday, day2=Tuesday…).\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“Planner name not defined”\n\n\nArgument Null Exception\n“Rule name not defined”\n\n\nArgument Exception\n“No Planner with name plannerName”\n\n\nArgument Exception\n“No Rule with name ruleName”\n\n\nInvalid Operation Exception\n“Failed to define rule days in Planner”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetHoursInPlanner \nSetting of the hours of a rule in a specific Planner\n\n\n\nDescription\nThis procedure sets the hours of a Rule of a specific Planner.\nSyntax\nSetHoursInPlanner (plannerName, ruleName, startHour, endHour)\nParameters\n\n\n\n\n\n\n\nplannerName\nString. Name of the Planner object concerned.\n\n\nruleName\nString. Name of the Rule, defined within the above Planner.\n\n\nstartHour\nString. Initial hour of the period for which the rule is active.\n\n\nendHour\nString. Final hour of the period for which the rule is active.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“Planner name not defined”\n\n\nArgument Null Exception\n“Rule name not defined”\n\n\nArgument Exception\n“No Planner with name plannerName”\n\n\nArgument Exception\n“No Rule with name ruleName”\n\n\nInvalid Operation Exception\n“Failed to define hours in Planner”"
  },
  {
    "objectID": "tech_scripts.html#simulation-and-reports",
    "href": "tech_scripts.html#simulation-and-reports",
    "title": "12  Visual Basic Scripts",
    "section": "12.5 Simulation and reports",
    "text": "12.5 Simulation and reports\n\n\n\n\n\n\n\n SavePreSimulationReportAs \nWriting of the pre-simulation report\n\n\n\nDescription\nThis procedure writes the pre-simulation report in a text file, at the specified location with the name: preSimulationReportFullPath.txt.\nSyntax\nSavePreSimulationReportAs (preSimulationReportFullPath)\nParameters\n\n\n\n\n\n\n\npreSimulationReportFullPath\nString. Full path of the text file where to save the pre-simulation report. The file extension has to be *.txt.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Fullpath not defined”\n\n\nArgument Exception\n“Fullpath contains invalid characters”\n\n\nArgument Exception\n“Filename extension not valid”\n\n\nArgument Exception\n“Fullpath not rooted”\n\n\nInvalid Operation Exception\n“Failed to save pre-simulation report”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SavePreSimulationReport \nWriting of the pre-simulation report\n\n\n\nDescription\nThis procedure writes the pre-simulation report in a text file, at the specified location with the specified reference name.\nSyntax\nSavePreSimulationReport (saveFolder, referenceName, showInitialDateInFileName = true)\nParameters\n\n\n\n\n\n\n\nsaveFolder\nString. Folder path where to save the text file.\n\n\nreferenceName\nString. Reference name for the file.\n\n\nshowInitialDateInFileName\nBoolean (optional). Adds the StartDate of the simulation to the filename if True (e.g. yyyyMMddHH_referenceName.txt).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Reference name not defined”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘savefolder’ not valid”\n\n\nInvalid Operation Exception\n“Failed to save pre-simulation report”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n Simulate \nRunning of the model\n\n\n\nDescription\nThis procedure executes the simulation of the model with the loaded parameters and hydrometeorological datasets.\nSyntax\nSimulate()\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Simulation failed, see /log_RSM/errlog.txt”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SavePostSimulationReportAs \nWriting of the post-simulation report\n\n\n\nDescription\nThis procedure writes the post-simulation report in a text file, at the specified location with the name: postSimulationReportFullPath.\nSyntax\nSavePostSimulationReportAs (postSimulationReportFullPath)\nParameters\n\n\n\n\n\n\n\npostSimulationReportFullPath\nString. Full path of the text file where to save the post-simulation report. The file extension has to be *.txt.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Fullpath not defined”\n\n\nArgument Exception\n“Fullpath contains invalid characters”\n\n\nArgument Exception\n“Filename extension not valid”\n\n\nArgument Exception\n“Fullpath not rooted”\n\n\nInvalid Operation Exception\n“Failed to save post-simulation report”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SavePostSimulationReport \nWriting of the post-simulation report\n\n\n\nDescription\nThis procedure writes the post-simulation report in a text file, at the specified location with the specified reference name.\nSyntax\nSavePostSimulationReport (saveFolder, referenceName, showInitialDateInFileName = true)\nParameters\n\n\n\n\n\n\n\nsaveFolder\nString. Folder path where to save the text file.\n\n\nreferenceName\nString. Reference name for the file.\n\n\nshowInitialDateInFileName\nBoolean (optional). Adds the StartDate of the simulation to the filename if True (e.g. yyyyMMddHH_referenceName.txt).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Reference name not defined”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘saveFolder’ not valid”\n\n\nInvalid Operation Exception\n“Failed to save post-simulation report”"
  },
  {
    "objectID": "tech_scripts.html#save-model-and-properties",
    "href": "tech_scripts.html#save-model-and-properties",
    "title": "12  Visual Basic Scripts",
    "section": "12.6 Save model and properties",
    "text": "12.6 Save model and properties\n\n\n\n\n\n\n\n SaveModelAs \nSaving of the model\n\n\n\nDescription\nThis procedure saves the loaded model, at a defined location with a specified name: modelNameFullPath.\nSyntax\nSaveModelAs (modelNameFullPath)\nParameters\n\n\n\n\n\n\n\nmodelNameFullPath\nString. Full path of the model to save. The file extension has to be *.rsm.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Fullpath not defined”\n\n\nArgument Exception\n“Fullpath contains invalid characters”\n\n\nArgument Exception\n“Filename extension not valid”\n\n\nArgument Exception\n“Fullpath not rooted”\n\n\nInvalid Operation Exception\n“Failed to save model”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveModel \nSaving of the model\n\n\n\nDescription\nThis procedure saves the loaded model at its current location.\nSyntax\nSaveModel ()\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Failed to save model”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveInitialConditionsAs \nSaving of the initial conditions\n\n\n\nDescription\nThis procedure saves the initial conditions at starting date of the simulation (in a text or an Excel format), at the specified location with the name: initialConditionsFullPath.\nSyntax\nSaveInitialConditionsAs (initialConditionsFullPath)\nParameters\n\n\n\n\n\n\n\ninitialConditionsFullPath\nString. Full path of the text or Excel file where to save the Initial Conditions. The file extension has to be *.txt. or *.xlsx.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Fullpath not defined”\n\n\nArgument Exception\n“Fullpath contains invalid characters”\n\n\nArgument Exception\n“Fullpath not rooted”\n\n\nInvalid Operation Exception\n“Failed to create and save initial conditions file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveInitialConditions \nSaving of the initial conditions\n\n\n\nDescription\nThis procedure saves the initial conditions at starting date of the simulation as a text file, at the specified location with the specified reference name.\nSyntax\nSaveInitialConditions (saveFolder, referenceName, showInitialDateInFileName = true)\nParameters\n\n\n\n\n\n\n\nsaveFolder\nString. Folder path where to save the file.\n\n\nreferenceName\nString. Reference name for the file.\n\n\nshowInitialDateInFileName\nBoolean (optional). Add the StartDate of the simulation to the filename if True (e.g. yyyyMMddHH_referenceName.txt).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Reference name not defined”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘saveFolder’ not valid”\n\n\nInvalid Operation Exception\n“Failed to save initial conditions file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveFinalConditionsAs \nSaving of the final conditions\n\n\n\nDescription\nThis procedure saves the conditions at the end of the simulation (in a text or an Excel format), at the specified location with the name: finalConditionsFullPath.\nSyntax\nSaveFinalConditionsAs (finalConditionsFullPath)\nParameters\n\n\n\n\n\n\n\nfinalConditionsFileFullPath\nString. Full path of the text or Excel file where to save the Final Conditions. The file extension has to be *.txt. or *.xlsx.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Fullpath not defined”\n\n\nArgument Exception\n“Fullpath contains invalid characters”\n\n\nArgument Exception\n“Fullpath not rooted”\n\n\nInvalid Operation Exception\n“Failed to generate final conditions”\n\n\nInvalid Operation Exception\n“Failed to create and save final conditions file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveFinalConditions \nSaving of the final conditions\n\n\n\nDescription\nThis procedure saves the initial conditions at the end of the simulation as a text file, at the specified location with the specified reference name.\nSyntax\nSaveFinalConditions (saveFolder, referenceName, showInitialDateInFileName = true)\nParameters\n\n\n\n\n\n\n\nsaveFolder\nString. Folder path where to save the file.\n\n\nreferenceName\nString. Reference Name for the file.\n\n\nshowInitialDateInFileName\nBoolean (optional). Add the EndDate of the simulation to the filename if True (e.g. yyyyMMddHH_referenceName.txt).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Reference name not defined”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘saveFolder’ not valid”\n\n\nInvalid Operation Exception\n“Failed to generate final conditions”\n\n\nInvalid Operation Exception\n“Failed to save final conditions file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveParametersAs \nSaving of the parameters\n\n\n\nDescription\nThis procedure saves the parameters of the model (in a text or an Excel format), at the specified location with the name: parametersFullPath.\nSyntax\nSaveParametersAs (parametersFullPath)\nParameters\n\n\n\n\n\n\n\nparametersFullPath\nFull path of the text or Excel file where to save the parameters. The file extension has to be *.txt. or *.xlsx.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Fullpath not defined”\n\n\nArgument Exception\n“Fullpath contains invalid characters”\n\n\nArgument Exception\n“Fullpath not rooted”\n\n\nInvalid Operation Exception\n“Failed to create and save parameters file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveParameters \nSaving of the parameters\n\n\n\nDescription\nThis procedure saves the parameters of the model as a text file, at the specified location with the specified reference name.\nSyntax\nSaveParameters (saveFolder, referenceName)\nParameters\n\n\n\n\n\n\n\nsaveFolder\nString. Folder path where to save the file.\n\n\nreferenceName\nString. Reference Name for the file.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“Reference name not defined”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘saveFolder’ not valid”\n\n\nInvalid Operation Exception\n“Failed to save parameters file”"
  },
  {
    "objectID": "tech_scripts.html#model-results",
    "href": "tech_scripts.html#model-results",
    "title": "12  Visual Basic Scripts",
    "section": "12.7 Model results",
    "text": "12.7 Model results\n\n\n\n\n\n\n\n SaveFullResultsAs \nSaving of all the results\n\n\n\nDescription\nThis procedure saves the full results dataset of the simulation in a binary or a text format, at the specified location with the name: resultsDatasetFullPath.\nSyntax\nSaveFullResultsAs (resultsDatasetFullPath, saveDataInDstFile)\nParameters\n\n\n\n\n\n\n\nresultsDatasetFullPath\nString. Full path of the file where to save the full results dataset. The file extension has to be *.dsx.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Fullpath of full results dataset not defined”\n\n\nArgument Exception\n“Fullpath of full results dataset contains invalid characters”\n\n\nArgument Exception\n“Filename extension of full results dataset not valid”\n\n\nArgument Exception\n“Fullpath of full results dataset not rooted”\n\n\nInvalid Operation Exception\n“Failed to create and save full results dataset”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveFullResults \nSaving of all the results\n\n\n\nDescription\nThis procedure saves the full results dataset of the simulation in a binary or a text format, at the specified location with the specified reference name and with or without the simulation length (in hours) in the name.\nSyntax\nSaveFullResults (saveFolder, referenceName, saveDataInDstFile, showDurationInFileName, showInitialDateInFileName = true)\nParameters\n\n\n\n\n\n\n\nsaveFolder\nString. Folder path where to save the file.\n\n\nreferenceName\nString. Reference Name for the file.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\nshowDurationInFileName\nBoolean. If true it adds the duration in hours of the simulation in the filename (e.g. referencename_nbHoursH.txt).\n\n\nshowInitialDateInFileName\nBoolean (optional). If true it adds the StartDate of the simulation to the filename (e.g. yyyyMMddHH_referencename.txt).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Reference name not defined”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘saveFolder’ not valid”\n\n\nInvalid Operation Exception\n“Failed to save full result”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveSelectionResultsAs \nSaving of selection results\n\n\n\nDescription\nThis procedure saves the results dataset of the selection in a binary or a text format, at the specified location with the name: selectionResultsDatasetFullPath.\nSyntax\nSaveSelectionResultsAs (selectionResultsDatasetFullPath, saveDataInDstFile, selectionName)\nParameters\n\n\n\n\n\n\n\nselectionResultsDatasetFullPath\nString. Full path of the file where to save the selection results dataset. The file extension has to be *.dsx.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\nselectionName\nString. Name of the selection of results.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Fullpath of selection results dataset not defined”\n\n\nArgument Exception\n“Fullpath of selection results dataset contains invalid characters”\n\n\nArgument Exception\n“Filename extension of selection results dataset not valid”\n\n\nArgument Exception\n“Fullpath of selection results dataset not rooted”\n\n\nArgument Exception\n“Selection ‘selectionname’ not valid”\n\n\nInvalid Operation Exception\n“Failed to create and save selection results dataset\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveSelectionResults \nSaving of selection results\n\n\n\nDescription\nThis procedure saves the results dataset of the selection in a binary or a text format, at the specified location with the specified reference name and with or without the simulation length (in hours) in the name.\nSyntax\nSaveSelectionResults (saveFolder, referenceName, saveDataInDstFile, selectionName, showDurationInFileName, showInitialDateInFileName = true)\nParameters\n\n\n\n\n\n\n\nsaveFolder\nString. Folder path where to save the file.\n\n\nreferenceName\nString. Reference Name for the file.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\nselectionName\nString. Name of the selection of results. This selection name will be included in the filename.\n\n\nshowDurationInFileName\nBoolean. If true it adds the duration in hours of the simulation in the filename (e.g. referencename_nbHoursH_selectionname.txt).\n\n\nshowInitialDateInFileName\nBoolean (optional). If true it adds the StartDate of the simulation to the filename (e.g. yyyyMMddHH_referencename_selectionname.txt).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Reference name not defined”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder ‘saveFolder’ not valid”\n\n\nArgument Null Exception\n“Selection not defined”\n\n\nArgument Exception\n“Selection ‘selectionName’ not valid”\n\n\nInvalid Operation Exception\n“Failed to save selection results”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveInitializationDatasetAs \nSaving of series of state variables\n\n\n\nDescription\nThis procedure saves a dataset containing only the necessary state variables to initialize the model (i.e. the initial conditions of all the objects), at the specified location with the specified reference name and with or without the simulation length (in hours) or the initial date in the name.\nSyntax\nSaveInitializationDatasetAs (saveFolder, referenceName, saveDataInDstFile, showDurationInFileName, showInitialDateInFileName = true)\nParameters\n\n\n\n\n\n\n\nsaveFolder\nString. Folder path where to save the file.\n\n\nreferenceName\nString. Reference Name for the file.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\nshowDurationInFileName\nBoolean. If true it adds the duration in hours of the simulation in the filename (e.g. referencename_nbHoursH.dsx).\n\n\nshowInitialDateInFileName\nBoolean (optional). If true it adds the StartDate of the simulation to the filename (e.g. yyyyMMddHH_referencename.dsx).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model has no results”\n\n\nArgument Null Exception\n“Reference name not defined”\n\n\nArgument Null Exception\n“Save folder not defined”\n\n\nArgument Exception\n“Save folder not valid”\n\n\nInvalid Operation Exception\n“Failed to save full results”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveInitializationDataset \nSaving of series of state variables\n\n\n\nDescription\nThis procedure saves a dataset containing only the necessary state variables to initialize the model (i.e. the initial conditions of all the objects).\nSyntax\nSaveInitializationDataset (resultsDatasetFullPath, saveDataInDstFile)\nParameters\n\n\n\n\n\n\n\nresultsDatasetFullPath\nString. Full path of the file where is the full results dataset. The file extension has to be *.dsx.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model has no results”\n\n\nArgument Null Exception\n“Fullpath of full results dataset not defined”\n\n\nArgument Exception\n“Fullpath of full results dataset contains invalid characters”\n\n\nArgument Exception\n“Filename extension of full results dataset not valid”\n\n\nArgument Exception\n“Fullpath of full results dataset not rooted”\n\n\nInvalid Operation Exception\n“Failed to create and save full results dataset”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n ExportResultsTo \nExporting of the selection results\n\n\n\nDescription\nThis procedure exports the selection results to an Excel or CSV file at the specified location with the name: selectionFileFullPath.\nSyntax\nExportResultsTo (selectionFileFullPath, selectionName)\nParameters\n\n\n\n\n\n\n\nselectionResultsFileFullPath\nString. Full path of the selection results file. Accepted file extensions are *.csv and *.xlsx.\n\n\nselectionName\nString. Name of the selection of results.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Fullpath not defined”\n\n\nArgument Exception\n“Fullpath of selection results contains invalid characters”\n\n\nArgument Exception\n“Fullpath of selection results dataset not rooted”\n\n\nArgument Exception\n“Selection ‘selectionName’ not valid”\n\n\nArgument Exception\n“Fullpath extension not valid”\n\n\nInvalid Operation Exception\n“Failed to create and save selection results”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n MergeFullResults \nMerging of full results dataset with the base full dataset\n\n\n\nDescription\nThis procedure merges full results from the current simulation with the specified full results dataset (containing the same structure).\nSyntax\nMergeFullResults (resultsDatasetFullPath, saveDataInDstFile)\nParameters\n\n\n\n\n\n\n\nresultsDatasetFullPath\nString. Full path of full results dataset. The file extension has to be *.dsx.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Fullpath of full results dataset not defined”\n\n\nArgument Exception\n“Fullpath of full results dataset contains invalid characters”\n\n\nArgument Exception\n“Filename extension of full results dataset not valid”\n\n\nArgument Exception\n“Fullpath of full results dataset not rooted”\n\n\nInvalid Operation Exception\n“Failed to create new full results dataset”\n\n\nInvalid Operation Exception\n“Full results dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to retrieve results to update full results dataset”\n\n\nInvalid Operation Exception\n“Failed to merge results with full results dataset”\n\n\nInvalid Operation Exception\n“Failed to save changes in full results dataset”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n MergeSelectionResults \nMerging of selection results dataset with the base selection dataset\n\n\n\nDescription\nThis procedure merges the selection results from the current simulation with the specified selection results dataset (containing the same structure).\nSyntax\nMergeSelectionResults (selectionResultsDatasetFullPath, saveDataInDstFile, selectionName)\nParameters\n\n\n\n\n\n\n\nselectionResultsDatasetFullPath\nString. Full path of the selection results file. The file extension has to be *.dsx.\n\n\nsaveDataInDstFile\nBoolean. If true the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\nselectionName\nString. Name of the selection of results\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nInvalid Operation Exception\n“Model ‘hydrologicalmodel’ has no results”\n\n\nArgument Null Exception\n“Fullpath of selection results dataset not defined”\n\n\nArgument Null Exception\n“Selection not defined”\n\n\nArgument Exception\n“Selection ‘selectionName’ not valid”\n\n\nArgument Exception\n“Fullpath of selection results dataset contains invalid characters”\n\n\nArgument Exception\n“Filename extension of selection results dataset not valid”\n\n\nArgument Exception\n“Fullpath of selection results dataset not rooted”\n\n\nInvalid Operation Exception\n“Failed to create new selection results dataset”\n\n\nInvalid Operation Exception\n“Selection results dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to retrieve results to update selection results dataset”\n\n\nInvalid Operation Exception\n“Failed to merge results with selection results dataset”\n\n\nInvalid Operation Exception\n“Failed to save changes in selection results dataset”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n MergeDatasetsAs \nMerging of a source dataset with another dataset\n\n\n\nDescription\nThis procedure merges a source dataset with a specified dataset (containing the same structure) at a specific location. If two stations have the same name, it can merge the data of both stations; the second dataset is prioritized for the merge of common dates in common stations.\nSyntax\nMergeDatasetsAs (nDataset1, nDataset2, MergedDatasetFullPath, merge=true, saveDataInDstFile=true)\nParameters\n\n\n\n\n\n\n\nnDataset1\nString. Full path of the first dataset to be merged. The file extension has to be *.dsx.\n\n\nnDataset2\nString. Full path of the second dataset to be merged. The file extension has to be *.dsx.\n\n\nMergedDatasetFullPath\nString. Full path of the dataset where the 2 datasets will be merged. The file extension has to be *.dsx.\n\n\nmerge\nBoolean. If true, the resulting dataset merge the data of stations with the same name. If false, it duplicates one of the stations with a “_(0)” suffix.\n\n\nsaveDataInDstFile\nBoolean. If true, the dataset values are saved in text format (*.dst), if false in binary format (*.dsb).\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“First dataset not defined”\n\n\nArgument Null Exception\n“Second dataset not defined”\n\n\nArgument Null Exception\n“Fullpath of merged dataset not defined”\n\n\nArgument Exception\n“Fullpath of full merged dataset contains invalid characters”\n\n\nArgument Exception\n“Filename extension of merged dataset not valid”\n\n\nArgument Exception\n“Fullpath of full merged dataset not rooted”\n\n\nInvalid Operation Exception\n“First dataset not valid”\n\n\nInvalid Operation Exception\n“Second dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to create merged dataset”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n MergeDatasets \nMerging of a source dataset with another dataset\n\n\n\nDescription\nThis procedure merges a source dataset with a specified dataset (containing the same structure) and saves the resulting dataset in the source dataset. If two stations have the same name, it can merge the data of both stations; the second dataset (update dataset) is prioritized for the merge of common dates in common stations.\nSyntax\nMergeDatasets (sourceDatasetFullPath, updateDatasetFullPath, merge=true)\nParameters\n\n\n\n\n\n\n\nsourceDatasetFullPath\nString. Full path of the source dataset where the new dataset is added. The file extension has to be *.dsx.\n\n\nupdateDatasetFullPath\nString. Full path of the update dataset to be added to the source dataset. The file extension has to be *.dsx.\n\n\nmerge\nBoolean. If true, the resulting dataset merge the data of stations with the same name. If false, it duplicates one of the stations with a “_(0)” suffix.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“First dataset not defined”\n\n\nArgument Null Exception\n“Second dataset not defined”\n\n\nInvalid Operation Exception\n“First dataset not valid”\n\n\nInvalid Operation Exception\n“Second dataset not valid”\n\n\nInvalid Operation Exception\n“Failed to merge datasets”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetPropertyValue \nGetting property value from an object\n\n\n\nDescription\nThis function gets the value of a parameter or an initial condition of an object.\nSyntax\nGetPropertyValue (objectType, propertyName, zone = null)\nParameters\n\n\n\n\n\n\n\nobjectType\nString. Object type (e.g. SOCONT, GSM, Reservoir, etc.). See Table 12.2.\n\n\npropertyName\nString. Property name (e.g. HGR3Max). See Table 12.2.\n\n\nzone\nString (optional). Zone where the objects are.\n\n\n\nReturned value\n\n\n\n\n\n\n\nproperty value\nIt returns the property value (parameter or initial condition) of the object.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Object type ‘objectType’ not valid”\n\n\nArgument Null Exception\n“Property name not defined”\n\n\nArgument Exception\n“Zone ‘zone’ not found in hydrological model”\n\n\nInvalid Operation Exception\n“Failed to provide model property”\n\n\nInvalid Operation Exception\n“Model property not found”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetIndicatorValue \nGetting the value of an indicator from a comparator\n\n\n\nDescription\nThis function gets the specified indicator value from a Comparator object.\nSyntax\nGetIndicatorValue (indicatorName, objectName)\nParameters\n\n\n\n\n\n\n\nindicatorName\nString. Indicator name. Indicators: Nash, Nash-ln, Pearson Correlation Coeff, Kling-Gupta Efficiency, Bias Score, RRMSE, Relative Volume Bias, Normalized Peak Error\n\n\nobjectName\nString. User-defined object name.\n\n\n\nReturned value\n\n\n\n\n\n\n\nindicator value\nIt returns the value of the indicator.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Exception\n“Comparator ‘objectName’ not found”\n\n\nArgument Exception\n“Indicator name ‘indicatorName’ not valid”"
  },
  {
    "objectID": "tech_scripts.html#calibration",
    "href": "tech_scripts.html#calibration",
    "title": "12  Visual Basic Scripts",
    "section": "12.8 Calibration",
    "text": "12.8 Calibration\n\n\n\n\n\n\n\n LoadCalibrationsInModel \nLoading of all the calibrations defined in a model\n\n\n\nDescription\nThis procedure loads all the calibration configurations defined in the opened model.\nSyntax\nLoadCalibrationsInModel ()\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n LoadCalibrationsByFile \nLoading of all the calibration configurations defined in a configuration file\n\n\n\nDescription\nThis procedure loads all the calibration configurations defined in a specified configuration file.\nSyntax\nLoadCalibrationsByFile (filePath)\nParameters\n\n\n\n\n\n\n\nfilePath\nString. Full path of the calibration configuration file defined in the Calibrator module of RS MINERVE. The file extension has to be *.cbt.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“File path is not defined”\n\n\nArgument Exception\n“Selected file is not a XML file”\n\n\nInvalid Operation Exception\n“No Calibration configuration is loaded”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SaveAllCalibrationsInModel \nSaving all calibration configurations in the RSM model\n\n\n\nDescription\nThis procedure saves all the calibration configurations in the loaded RSM model. Configurations will then be saved in the .rsm file).\nSyntax\nSaveAllCalibrationsInModel ()\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n RunCalibration \nRunning a specified calibration\n\n\n\nDescription\nThis procedure runs a specified calibration available among the loaded configuration(s).\nSyntax\nRunCalibration (configName, logFilePath, deleteLogAfter=false)\nParameters\n\n\n\n\n\n\n\nconfigName\nString. Name given in the Calibrator module of RS MINERVE to the calibration configuration to be executed.\n\n\nlogFilePath\nString. Full path of the log file where the logs are written.\n\n\ndeleteLogAfter\nBoolean. If true, the log file is deleted after the calibration process is ended.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“The name of the calibration configuration is not defined”\n\n\nArgument Exception\n“No calibration configuration called configName”\n\n\nInvalid Operation Exception\n“The model has fatal errors and cannot continue”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n RunAllCalibrations \nRunning all the calibrations\n\n\n\nDescription\nThis procedure runs all the calibration configurations previously loaded.\nSyntax\nRunAllCalibrations (logFilePath, deleteLogAfter=false)\nParameters\n\n\n\n\n\n\n\nlogFilePath\nString. Full path of the log file where the logs are written.\n\n\ndeleteLogAfter\nBoolean. If true, the log file is deleted after the calibration process is ended.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“The model has fatal errors and cannot continue”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n ExportCalibrationResults \nExporting of the calibration’s results\n\n\n\nDescription\nThis procedure exports the results of a specified calibration, to a .txt file.\nSyntax\nExportCalibrationResults (configName, resultFilePath)\nParameters\n\n\n\n\n\n\n\nconfigName\nString. Name given in the Calibrator module of RS MINERVE to the calibration configuration to be executed.\n\n\nresultFilePath\nString. Full path of the file where to save the calibration results. The file extension has to be *.txt.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“The name of the calibration configuration is not defined”\n\n\nArgument Exception\n“The file path for the results is not defined”\n\n\nArgument Exception\n“No calibration configuration called configName”\n\n\nInvalid Operation Exception\n“There are no results to export in calibration configName”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n ExportAllCalibrationsResults \nExporting of all the calibrations’ results\n\n\n\nDescription\nThis procedure exports the results of all the calibration configurations loaded, to a .txt file.\nSyntax\nExportAllCalibrationsResults (resultFolderPath)\nParameters\n\n\n\n\n\n\n\nresultFolderPath\nString. Folder path to export the results of all the calibration configurations. The exported results file is named as ConfigName.txt, where ConfigName is the name of each calibration configuration executed.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“The folder path for the results is not defined”\n\n\nArgument Exception\n“Selected folder does not exist”\n\n\nInvalid Operation Exception\n“There are no results to export for some calibrations”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n SetCalibrationDates \nSetting of the start and end dates of the calibration period\n\n\n\nDescription\nThis procedure defines the start and end dates of the period used by the Calibrator module to execute the calibration.\nSyntax\nSetCalibrationDates (configName, startDate, endDate)\nParameters\n\n\n\n\n\n\n\nconfigName\nString. Name given in the Calibrator module of RS MINERVE to the calibration configuration for which the start and end dates are to be set.\n\n\nstartDate\nDate. Start date for the calibration period. The format of the date has to be: dd.MM.yyyy HH:mm:ss.\n\n\nendDate\nDate. End date for the calibration period. The format of the date has to be: dd.MM.yyyy HH:mm:ss.\n\n\n\nErrors\n\n\n\n\n\n\n\nInvalid Operation Exception\n“Model not loaded”\n\n\nArgument Null Exception\n“The name of the calibration configuration is not defined”\n\n\nArgument Exception\n“No calibration configuration called configName”"
  },
  {
    "objectID": "tech_scripts.html#application-stop",
    "href": "tech_scripts.html#application-stop",
    "title": "12  Visual Basic Scripts",
    "section": "12.9 Application Stop",
    "text": "12.9 Application Stop\n\n\n\n\n\n\n\n Stop \nStop of the execution\n\n\n\nDescription\nThis procedure stops the execution of the model.\nSyntax\nStop ()"
  },
  {
    "objectID": "tech_scripts.html#other-proceduresfunctions",
    "href": "tech_scripts.html#other-proceduresfunctions",
    "title": "12  Visual Basic Scripts",
    "section": "12.10 Other procedures/functions",
    "text": "12.10 Other procedures/functions\n\n\n\n\n\n\n\n RemoveFile \nRemoving any type of files\n\n\n\nDescription\nThis procedure remove for the computer any file given by its full path.\nSyntax\nRemoveFile (fileFullPath)\nParameters\n\n\n\n\n\n\n\nfileFullPath\nString. Full path of the file to be removed. The file extension of the file must be specified.\n\n\n\nErrors\n\n\n\n\n\n\n\nArgument Null Exception\n“File not defined”\n\n\nArgument Exception\n“File not found”\n\n\nInvalid Operation Exception\n“Failed to remove the file”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetAppVersion \nGetting the installed RS MINERVE software version\n\n\n\nDescription\nThis function gets the version number of the installed RS MINERVE software.\nSyntax\nGetAppVersion ()\nReturned value\n\n\n\n\n\n\n\nSoftware version\nIt returns the version number of the installed RS MINERVE software (e.g., 2.6.2.0).\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n GetReaderVersion \nGetting the installed model reader (xml) version\n\n\n\nDescription\nThis function gets the number of the installed model reader (xml) version.\nSyntax\nGetReaderVersion ()\nReturned value\n\n\n\n\n\n\n\nReader version\nIt returns the number of the installed model reader (xml) version (e.g., 4.001)."
  },
  {
    "objectID": "tech_scripts.html#objects-nomenclature-in-vbscript",
    "href": "tech_scripts.html#objects-nomenclature-in-vbscript",
    "title": "12  Visual Basic Scripts",
    "section": "12.11 Objects nomenclature in VBScript",
    "text": "12.11 Objects nomenclature in VBScript\nWhen using VBScripts to perform tasks within RS MINERVE, it is necessary to indicate the type of the object or the name of a property as arguments for some functions (DefineModelProperties, UpdateModelProperties and GetPropertyValue). Table 12.2 gathers the proper nomenclatures of these arguments to be used in the corresponding VBScripts functions.\n\n\nTable 12.2: Nomenclature of objects, parameters and initial condition to be used in the GetPropertyValue function\n\n\n\n\n\n\n\nObjectType\nParameters\nInitial conditions\n\n\n\n\nStation\nX, Y, Z, Search Radius, No. min. of stations, Gradient P, Gradient T, Gradient ETP, Coeff P, Coeff T, Coeff ETP\n-\n\n\nSnowSD\nS, SInt, SMin, SPh, ThetaCri, bp, Tcp1, Tcp2, Tcf\nSWEIni, ThetaIni\n\n\nSWMM\nA, L, J0, K\nHIni\n\n\nGSM\nA, S, SInt, SMin, SPh, ThetaCri, bp, Tcp1, Tcp2, Tcf, G, GInt, GMin, Tcg, Kgl, Ksn\nSWEIni, ThetaIni, QsnowIni, QglacierIni, HglacierIni\n\n\nSOCONT\nA, S, SInt, SMin, SPh, ThetaCri, bp, Tcp1, Tcp2, Tcf, HGR3Max, KGR3, L, J0, Kr\nSWEIni, ThetaIni, HGR3Ini, HrIni\n\n\nHBV\nA, CFMax, CFR, CWH, TT, TTInt, TTSM, Beta, FC, PWP, SUMax, Kr, Ku, Kl, Kperc\nSWEIni, WHIni, HumIni, SUIni, SLIni\n\n\nGR4J\nA, X1, X2, X3, X4\nSini, RIni\n\n\nSAC\nA, Adimp, Pctim, Riva, UztwMax, UzfwMax, Uzk, Zperc, Rexp, Pfree, LztwMax, LzfpMax, LzfsMax, Rserv, Lzpk, Lzsk, Side\nAdimIni, UztwIni, UzfwIni, LztwIni, LzfpIni, LzfsIni\n\n\nLagTime\nL, B0, m, J0, K, lag\nQini\n\n\nKinematic\nL, B0, m, J0, K, N\nQini\n\n\nMuskingumCunge\nL, B0, m, J0, K, N\nQini\n\n\nStVenant\nL, B0, m, J0, K, N\nQini\n\n\nReservoir\n-\nHini, HvarIni\n\n\nHydropower\nZplant, L, D, K, ν, Default Price\n-\n\n\nConsumer\nDefault QDemand, LossRate, ConsumptionRate\n-\n\n\nStructureEfficiency\nEfficiency\n-"
  },
  {
    "objectID": "tech_file_formats.html",
    "href": "tech_file_formats.html",
    "title": "13  File formats",
    "section": "",
    "text": "RS MINERVE generates model files saved in .rsm format as well as different other formats for results of configuration data."
  },
  {
    "objectID": "tech_file_formats.html#model-files",
    "href": "tech_file_formats.html#model-files",
    "title": "13  File formats",
    "section": "13.1 Model files",
    "text": "13.1 Model files\nBoth Save and Export generate files of the same format (.rsm). With Save, the entire model is saved, whereas with Export, only the objects (submodels included) contained in the active hierarchical level are exported (refer to the Exportation of a submodel section in the User’s Manual)."
  },
  {
    "objectID": "tech_file_formats.html#sec-tech_file_formats_param_ic_files",
    "href": "tech_file_formats.html#sec-tech_file_formats_param_ic_files",
    "title": "13  File formats",
    "section": "13.2 Parameters and initial conditions files",
    "text": "13.2 Parameters and initial conditions files\nParameters (or initial conditions) of the model can be saved as:\n\nExcel files (.xlsx). Each worksheet presents the parameters (or initial conditions) of one hydrological object, as presented in the example of Figure 13.1.\nText files (.txt). Each hydrological object is presented per line with its parameters or initial conditions\n\n\n\n\nFigure 13.1: Example of the parameters of the GSM hydrological models in an Excel file"
  },
  {
    "objectID": "tech_file_formats.html#object-selection-files",
    "href": "tech_file_formats.html#object-selection-files",
    "title": "13  File formats",
    "section": "13.3 Object selection files",
    "text": "13.3 Object selection files\nA selection of the objects data can be saved with the help of the “Selection and plots”. The exported selection is saved as a .chk file. The format of this file is presented in Figure 13.2. It contains:\n\nthe name of the selection (given by the user in the “Selection and plots”) in first line,\nthe number of selected series (second line),\nall selections, with the name of the .rsm model, the name submodel (if it exists), the name of the selected object and its chosen series.\n\n\n\n\nFigure 13.2: Example of selected series saved in a .chk file"
  },
  {
    "objectID": "tech_file_formats.html#exported-results-files",
    "href": "tech_file_formats.html#exported-results-files",
    "title": "13  File formats",
    "section": "13.4 Exported results files",
    "text": "13.4 Exported results files\nThe results in the model selection can be also achieved from the “Selection and plots”. Several file formats are possible:\n\nExcel file (.xlsx).\nCSV file (.csv).\nAquatool input file (.apo), for use’s working with Aquatool DMA from UPV."
  },
  {
    "objectID": "tech_file_formats.html#calibration-configuration-files",
    "href": "tech_file_formats.html#calibration-configuration-files",
    "title": "13  File formats",
    "section": "13.5 Calibration configuration files",
    "text": "13.5 Calibration configuration files\nThe full configuration of the calibration, with information such as the selected objects, parameters to calibrate, or the objective function to take into account, is saved in a .cbt file."
  },
  {
    "objectID": "tech_file_formats.html#database-files",
    "href": "tech_file_formats.html#database-files",
    "title": "13  File formats",
    "section": "13.6 Database files",
    "text": "13.6 Database files\nThe format of the database is explained in detail in Section 14. Databases contains two different files\n\nDatabase files in text format (.dbt and .dbx) or in binary format (.dbb and .dbx).\nDataset files in text format (.dst and .dsx) or in binary format (.dsb and .dsx).\nCSV files in text format (.csv)."
  },
  {
    "objectID": "tech_database_formats.html",
    "href": "tech_database_formats.html",
    "title": "14  Database formats",
    "section": "",
    "text": "The different input data as well as exported results are managed within a database. The Database Viewer, accessible from the RS MINERVE window, is used to create or edit the database linked to the active model."
  },
  {
    "objectID": "tech_database_formats.html#the-database-viewer",
    "href": "tech_database_formats.html#the-database-viewer",
    "title": "14  Database formats",
    "section": "14.1 The Database Viewer",
    "text": "14.1 The Database Viewer\nThe Database Viewer window appears when a database is created (  Add) or opened for edition ( Open).\nThe database structure, presented in Table 14.1, is organized in five hierarchical levels:\n\nDatabase\n\nDescription of the database\nContains one or more groups\n\nGroup\n\nSeparation based on category of data (Measures, Forecasts, Simulations,…)1\n\nContains one or more datasets\nDataset\n\nSet of data of common type (Meteo data, Flow data,…)\nContains one or more stations\n\nStation\n\nInformation about the station (name and coordinates)\nContains one or more sensors\n\nSensor\n\nDescription of the sensor (name, units and data)\nContains one data series\n\n\nThe user can create a complete database or different datasets to add to an existing database.\n\n\nTable 14.1: Structure of the database interface\n\n\n\n\n\n\n\n\nNode\nName\nDescription\nExample\n\n\n\n\nDatabase\n\n\n\n\n\n\nDescription\nName of the database\nDatabase_tutorial\n\n\n\nDate creation\nDate of creation of database\n14.12.2012 13:32\n\n\n\nDate modification\nDate of last modification\n04.01.2013 14:30\n\n\n\nTime zone\nTime scale of the data\nUTC+01:00\n\n\n\nFilename\nFile name and path\n(Full path of file) \n\n\n\nXML file\nXML file size\n21 Ko\n\n\n\nData file\nData file size\n161 Ko\n\n\nGroup\n\n\n\n\n\n\nDescription\nName of the group\nMeasure\n\n\n\nCategory\nType of data (Inputs, Outputs or None)\nInputs\n\n\n\nDate capture\nDate of last dataset capture date in the group\n18/12/2012 10:54 \n\n\nDataset\n\n\n\n\n\n\nDescription\nName of the dataset\nMeteo_data\n\n\n\nDataset creation\nDataset creation date\n14.12.2012 00:00\n\n\n\nDataset reception\nDate of receipt of data\n14.12.2012 03:00\n\n\n\nData modification\nDate of last modification\n14.12.2012 03:00\n\n\n\nData capture\nFirst date of the data (editable)\n14.12.2012 00:00\n\n\n\nTime zone\nTime scale of the data\nUTC+01:00\n\n\n\nFilename\nFile name and path\n(Full path of file) \n\n\n\nXML file\nXML file size\n21 Ko\n\n\n\nData file\nData file size\n161 Ko\n\n\nStation\n\n\n\n\n\n\nName\nName of the station\nStation_meteo_1\n\n\n\nX\nCoordinate X in meter\n650000\n\n\n\nY\nCoordinate Y in meter\n130000\n\n\n\nZ\nAltitude in meter above sea level\n1957\n\n\nSensor\n\n\n\n\n\n\nDescription\nName of the variable\nPrecipitation\n\n\n\nCategory\nVariable type\nPrecipitation\n\n\n\nUnit\nVariable unit\nMillimetersPerHour\n\n\n\nInterpolation 2\nData assimilation method\nLinear\n\n\n\nInitial date\nThe first date of the time series\n01/01/2011 00:00:00\n\n\n\nFinal date\nThe last date of the time series\n31/12/2013 00:00:00\n\n\n\nMin value\nMinimum value of the series\n0 m3/s\n\n\n\nAverage value\nAverage value of the series\n1.1884 m3/s\n\n\n\nMax value\nMaximum value of the series\n3.2485 m3/s"
  },
  {
    "objectID": "tech_database_formats.html#sec-tech_database_formats_dataset_csv",
    "href": "tech_database_formats.html#sec-tech_database_formats_dataset_csv",
    "title": "14  Database formats",
    "section": "14.2 Database, dataset and CSV formats",
    "text": "14.2 Database, dataset and CSV formats\nDatabases and datasets also correspond to different saving formats:\n\nDatabase files ([.dbt and .dbx] in text format or [.dbb and .dbx] in binary format) can be created, opened, imported, exported or saved from the complete database (database level).\nDataset files ([.dst and .dsx] in text format or [.dsb and .dsx] in binary format) can also be created, opened, imported, exported or saved from the Database (dataset level).\nCSV files ([.csv] in text format) can also be created, opened, imported or exported from the Database (dataset level).\n\n\nDatabase files\nThe database file includes two different files:\n\nA XML file (*.dbx) describing the structure of the database (groups, datasets, stations and sensors)\nA file containing the data series. This file can be in text format (*.dbt) or binary format (*.dbb). Binary format allows to reduce the file size.\n\nNote that in the text file (*.dbt), if the database is not empty and contains one or more sensors (then at least a dataset with at least a station)3, each data series should be composed of:\n\nA header containing four fields separated by a backslash character: Group\\Dataset\\Station\\Sensor. Each field name must be identical to the name found in the corresponding <Name> node in the XML file (*.dbx) (Figure 14.1).\nTwo columns (date and data) separated by a tabulation character.\n\n\n\n\nFigure 14.1: Format of the two database files (in text format for the data file)\n\n\nAn example of the XML file and of the text file is showed respectively in Figure 14.2 and Figure 14.3.\n\n\n\nFigure 14.2: Example of the database XML file\n\n\n\n\n\nFigure 14.3: Example of the database data file in text format\n\n\n\n\nDataset files\nThe dataset file includes also two different files (Figure 14.5 and Figure 14.6):\n\nA XML file (*.dsx) describing the structure of the dataset (stations and sensors)\nA file containing the data series. This file can be in text (*.dst) or in binary (*.dsb) format. This last format allows to reduce the file size.\n\nNote that in the text file (*.dst), if the dataset is not empty and contains one or more sensors (then at least a dataset with at least a station)4, each data series should be composed of:\n\nA header containing two fields separated by a backslash character: Station\\Sensor. Each field name must be identical to the name found in the corresponding <Name> node in the XML file (*.dsx) (Figure 14.5).\nThen two columns (date and data) separated by a tabulation character.\n\n\n\n\nFigure 14.4: Format of the two dataset files (in text format for the data file)\n\n\nAn example of the XML and text files is showed respectively in Figure 14.5 and Figure 14.6.\n\n\n\nFigure 14.5: Example of the dataset XML file\n\n\n \n\n\n\nFigure 14.6: Example of the dataset data file in text format\n\n\n\n\nCSV files\nCSV files can be used to import and export Dataset files. It is possible to open a CSV file and RS MINERVE will create a Database required to contain the Dataset. The structure of the CSV files is showed in Figure 14.7.\n\n\n\n\n\n\nImportant\n\n\n\nRS MINERVE will automatically remove ‘NA’, ‘NaN’, ‘N/A’ or ‘NULL’ values contained in the time series before creating the dataset.\n\n\n\n\n\nFigure 14.7: Structure of CSV file in RS MINERVE\n\n\nAnd Figure 14.8 shows an example of CSV file.\n\n\n\nFigure 14.8: Example of CSV file in text format"
  },
  {
    "objectID": "tech_database_formats.html#automatic-creation-of-databases-or-datasets",
    "href": "tech_database_formats.html#automatic-creation-of-databases-or-datasets",
    "title": "14  Database formats",
    "section": "14.3 Automatic creation of databases or datasets",
    "text": "14.3 Automatic creation of databases or datasets\nAn automatic creation of a database or a dataset is possible. Concerning the text file (respectively *.dbt, *.dst or *.csv), it can be easily created based on information provided in Section 14.2. Regarding the .xml file (*.dbx or *.dsx) or plain file (*.csv), additional information for the automatic creation is presented hereafter.\nFigure 14.9 and Figure 14.10 describe all the possible nodes respectively represented in a database (*.dbx) and a dataset XML file (*.dsx). The presented tables takes into account an example with a dataset “Measure” with a station “Aigle” and a sensor of observed precipitation “P”. The information visible in Database is also presented in last three columns.\nTo create an XML file, all the possible nodes are very useful but not all required, since some of them are also necessary for operational hydro-meteorological systems.\n“Key” node generally allows distinguishing different databases (or datasets) with different name and structure. “ID” node is only useful for operational system, since it can be used when datasets with same “Key” (as well as same filename and structure) are overwritten at each new forecast. Then, “ID” node allows to Database knowing if the dataset has been updated or not.\n\n\n\nFigure 14.9: Description of all the possible nodes in a database XML file\n\n\n \n\n\n\nFigure 14.10: Description of all the possible nodes in a dataset XML file"
  },
  {
    "objectID": "tech_gis_formats.html",
    "href": "tech_gis_formats.html",
    "title": "15  GIS formats",
    "section": "",
    "text": "RS MINERVE includes a GIS module accepting different formats."
  },
  {
    "objectID": "tech_gis_formats.html#model-files",
    "href": "tech_gis_formats.html#model-files",
    "title": "15  GIS formats",
    "section": "15.1 Model files",
    "text": "15.1 Model files\nLayers with formats presented in Table 15.1 can be imported in GIS.\n\n\nTable 15.1: Formats and extensions supported by GIS\n\n\n\n\n\n\nFormats\nExtensions\n\n\n\n\nVector\n*.shp\n\n\nRaster\n*.bgd\n\n\nImage\n*.bmp, *.emf, *.exf, *.gif, *.ico, *.jpg, *.png, *.tif, *.wmf\n\n\nDotSpatial.Shapefile\n*.shp\n\n\nDotSpatial - Binary file\n*.bgd\n\n\nDotNet Image - Image\n*.bmp, *.emf, *.exf, *.gif, *.ico, *.jpg, *.png, *.tif, *.wmf\n\n\nDotNet Image - Bitmap\n*.bmp"
  },
  {
    "objectID": "examples.html",
    "href": "examples.html",
    "title": "Examples of application",
    "section": "",
    "text": "The use of RS MINERVE in case studies has demonstrated the capacity of the program to correctly reproduce the real behavior of river basins. In addition, the program facilitates the search of different scenarios of operation while optimizing complex systems in a satisfactorily way.\nThis chapter contains three examples with didactic aims:\n\nExample 1 – Simple basin with only runoff.\nExample 2 – Combined full basin with meteorological stations.\nExample 3 – Equipped basin with a hydropower scheme.\nExample 4 – Automatic calibration of a model"
  },
  {
    "objectID": "examples_ex1.html",
    "href": "examples_ex1.html",
    "title": "16  Example 1 – Simple basin with only runoff",
    "section": "",
    "text": "In the first example the objective is to model the production of a net rain-flow of three impermeable basins, then the propagation of two hydrographs, the implementing of three inflows at a confluence and finally their propagation to the model outlet (Figure 16.1).\nThe three impermeable surfaces are supposed to be located in the same region, thus receiving an identical precipitation. Each surface has its own outlet into different rivers (A and B) which are joined later on in a single final river (C) before flowing into the outlet of the model. The parameters and the state variables of the three surfaces, of the three rivers and the precipitation data are provided in Figure 16.2. The three rivers are modeled with the kinematic wave model."
  },
  {
    "objectID": "examples_ex1.html#objective-of-example-1",
    "href": "examples_ex1.html#objective-of-example-1",
    "title": "16  Example 1 – Simple basin with only runoff",
    "section": "16.1 Objective of Example 1",
    "text": "16.1 Objective of Example 1\nThe requested result is the hydrograph at the model outlet during 24 hours, after the beginning of the precipitation, as well as the peak discharge and the peak time.\nThe simulation parameters are:\n\nSimulation time step = 600 s\nRecording time step = 600 s\n\nA uniform and null ETP is assumed for this example (the user can check the selected ETP method in the RS MINERVE settings).\n\n\n\nFigure 16.2: Characteristics of the objects"
  },
  {
    "objectID": "examples_ex1.html#resolution-of-example-1",
    "href": "examples_ex1.html#resolution-of-example-1",
    "title": "16  Example 1 – Simple basin with only runoff",
    "section": "16.2 Resolution of Example 1",
    "text": "16.2 Resolution of Example 1\nThis first example is a simplified representation of the reality. Despite of that, it allows the familiarization with the concept of RS MINERVE and to know more about its hydrological objects.\nAt first, the object “Time Series”  is introduced. Clicking once on its icon in the Objects frame, a pen appears. You can then click in the graphic interface for creating the object in the position you want. Next, the three run-off surfaces are created by means of the object “SWMM” . The three rivers are introduced by selecting the model “Kinematic Wave” . The model built-up will be finished with the introduction of the two objects “Junction” .\nThe graphical interface at this stage is presented in Figure 16.3.\n\n\n\nFigure 16.3: Graphic interface of RS MINERVE with the new objects\n\n\nAfter creating the new objects, topological links or connections have to be established. To do so, it is sufficient to press once the space bar of the keyboard to pass in “connections” mode. In Editing tools, the Connections button is then automatically pressed (Figure 16.4). Flying over each objet, the curser presented before as an arrow now appears as a cross. Next, click from the object “Time Series” to the object “SWMM1”, thus creating a topological link.\n\n\n\nFigure 16.4: Editing tools frame in Connections mode\n\n\nThe others objects are connected in the same way. Press again the space bar of the keyboard to return to selection mode. The construction of all the model objects and the resulting topologic links is thus achieved as presented in Figure 16.5 and it only remains the introduction of the parameters.\n\n\n\nFigure 16.5: Topologic links between the different objects from the model\n\n\nBy double clicking on the links just created (blue arrows), the information transferred between “Time Series” and the three run-off surfaces as well as that between all other objects from up- to downstream is verified (Figure 16.6).\n\n\n\nFigure 16.6: Examples of different connections of the presented model\n\n\nIn clicking double on the Time Series object, the associated frame is opened on the right of the screen and the values “Time (s) - P (mm/h)” are introduced (Figure 16.7).\n\n\n\nFigure 16.7: Values of the “Time series”\n\n\nNext, for each SWMM object (), the respective parameters (values available in Figure 16.2) are defined by double clicking on every object and introducing them by the help of the both Parameters and Initial conditions frames. The parameters of the Rivers are introduced in the same way (Figure 16.8).\n\n\n\nFigure 16.8: Parameters and initial conditions frames of SWMM 1 (left) and of River A (right)\n\n\nThe date parameters of the simulation are modified in Solver frame on the left of the screen (Figure 16.9) before the calculation. For both dates “Start” and “End” an arbitrary date is proposed, but the “End” date has to finish 24 hours later than “Start” date. The “Simulation time step” and the “Recording time step” have a value of 600 s.\n\n\n\nFigure 16.9: Solver frame\n\n\nConstructed final model can be now saved clicking in the button  and giving a name to the file (e.g. “Example1.rsm”). This way the model could be loaded later to do new simulations (Figure 16.10).\n\n\n\nFigure 16.10: Project frame\n\n\nBefore running calculation, a pre-simulation validation of the model parameterization can be made in clicking in the button  (Solver frame). Its report is summarized on the right of the interface.\nFinally, the simulation is initiated by clicking on the button Start in the Solver frame."
  },
  {
    "objectID": "examples_ex1.html#results-of-example-1",
    "href": "examples_ex1.html#results-of-example-1",
    "title": "16  Example 1 – Simple basin with only runoff",
    "section": "16.3 Results of Example 1",
    "text": "16.3 Results of Example 1\nIn order to access to the calculation results for each object it has to be clicked two times on any of them. For example, clicking double on the object Outlet, its dialog box is opened on the right and the simulated hydrograph, being the objective of the Example 1, is shown (Figure 16.11).\n\n\n\nFigure 16.11: Results of the simulation in the outlet of the model\n\n\nIf we check the values (Figure 16.12), we can found that the maximal discharge (28.442 m3/s) arrives at 09:20 (assuming the simulation starts at 00:00).\n\n\n\nFigure 16.12: Discharge values at outlet"
  },
  {
    "objectID": "examples_ex2.html",
    "href": "examples_ex2.html",
    "title": "17  Example 2 – Combined full basin with meteorological stations",
    "section": "",
    "text": "The hydrological system proposed by the Example 2 includes four hydrological models of production, a GSM and three HBV models as well as the rivers of the basin. The discharge production in the sub-basins area is based on given precipitations and temperatures from a database.\nThis expected model is represented in Figure 17.1.\nThe parameters of the objects are provided in Figure 17.2 to Figure 17.4 and the precipitation and temperature data are in the database “Database manual”."
  },
  {
    "objectID": "examples_ex2.html#objective-of-example-2",
    "href": "examples_ex2.html#objective-of-example-2",
    "title": "17  Example 2 – Combined full basin with meteorological stations",
    "section": "17.1 Objective of Example 2",
    "text": "17.1 Objective of Example 2\nThe objective of this example is to determine the hydrograph in the outlet of the system during the period between the 08.05.2013 00:00 and the 15.05.2013 00:00, the peak discharge and the peak time, as well as the discharge created at the outlet of each sub-basin.\nThe simulation parameters are:\n\nSimulation time step = 600 s\nRecording time step = 600 s\n\nA uniform and null ETP is assumed for this example (the user can check the selected ETP method in the RS MINERVE settings).\n\n\n\nFigure 17.2: Characteristics of the objects (1/3)\n\n\n \n\n\n\nFigure 17.3: Characteristics of the objects (2/3)\n\n\n \n\n\n\nFigure 17.4: Characteristics of the objects (3/3)\n\n\nBesides, two meteorological real stations are included in the data base:\n\n\n\nFigure 17.5: Characteristics of the meteorological real stations"
  },
  {
    "objectID": "examples_ex2.html#resolution-of-example-2",
    "href": "examples_ex2.html#resolution-of-example-2",
    "title": "17  Example 2 – Combined full basin with meteorological stations",
    "section": "17.2 Resolution of Example 2",
    "text": "17.2 Resolution of Example 2\nFirst of all, the subcatchment with HBV  and GSM  models will be set up. Then, the three rivers  (with Kinematic Wave) and the two junctions  are also added as presented in Figure 17.6 (more details are given in Example 1 for model construction, including the link between each object and their parameterization).\n\n\n\nFigure 17.6: Unlinked objects of the model\n\n\nAfter that, the models are linked from upstream to downstream (Figure 17.7) and the relations created can be visualized by double clicking on each blue arrow (Figure 17.8, Figure 17.9).\n\n\n\nFigure 17.7: Relations between the objects\n\n\n \n\n\n\nFigure 17.8: Possible outputs transfers between objects\n\n\n \n\n\n\nFigure 17.9: Connections between objects\n\n\nThe parameters associated to each object are then introduced (values available in previous tables). The result is presented for both HBV 1 and GSM 1 models in Figure 17.10.\n\n\n\nFigure 17.10: Parameters of the HBV 1 model (left) and the GSM 1 model (right)\n\n\nSecondly, virtual weather stations are inserted. For its accomplishment, 4 Virtual Weather Stations  are created and connected according to Figure 17.11. The topology of the relations created in this case is detailed in Figure 17.12. Then the parameters are introduced (Figure 17.13) with the available values presented previously.\n\n\n\nFigure 17.11: Topology of the full model: production, transfer then transport\n\n\n \n\n\n\nFigure 17.12: Topologic links between the different objects\n\n\n \n\n\n\nFigure 17.13: Parameters of the Virtual Weather Station H1 (for HBV 1)\n\n\nConstructed model can be now saved clicking in the button  and giving a name to the .rsm file (e.g. “Example2.rsm”).\nNext, the meteorological data have to be loaded: the dialog box of the database is opened clicking in  (Figure 17.14) for loading the corresponding database file (“Database manual.dbx”).\n\n\n\nFigure 17.14: Database frame\n\n\nThe user can click on the Database tab to visualize or modify the series of the database (Figure 17.15).\n\n\n\nFigure 17.15: Database of the model\n\n\nOnce the database loaded, the user can connect the database to the hydrological model. For achieving this purpose, the user has to choose the correct data source in the corresponding frame (Figure 17.16): the group “Measure” and the dataset “DataSet Example 2and3” for the current example. Since no source, TurbineDB, reservoir or consumer objects exist in the model, it is not necessary to fill up their data sources.\n\n\n\nFigure 17.16: Data source used for connecting the model to the database\n\n\nFinally, and after achieve a simulation, the weight of each meteorological real station can be checked by clicking at one Virtual Weather station of the hydrological model (Figure 17.17).\n\n\n\nFigure 17.17: Weight of each meteorological station for the Virtual Weather Station H1\n\n\nThe pre-simulation validation () allows to valid the model. If the message: “Model ‘Example 2’ is valid” appears, the simulation can be started by clicking in the button Start."
  },
  {
    "objectID": "examples_ex2.html#results-of-example-2",
    "href": "examples_ex2.html#results-of-example-2",
    "title": "17  Example 2 – Combined full basin with meteorological stations",
    "section": "17.3 Results of Example 2",
    "text": "17.3 Results of Example 2\nOnce finished the calculation, the hydrograph in the outlet of the system, among others, can be visualized (Figure 17.18).\n\n\n\nFigure 17.18: Hydrograph in the outlet of the system\n\n\nIf we check the values (Figure 17.19), we can found that the maximal discharge arrives on May the 9th, 2013 at 07:00 and the discharge value is 8.154 m3/s.\n\n\n\nFigure 17.19: Discharge values at outlet\n\n\nAll the simulated variables of the model (including the discharge in each sub-basin outlet) can be visualized (Figure 17.20 and Figure 17.21) clicking on the “Selection and plots” frame and in selecting the series to draw as presented in Section 5.2. Finally you can export the selection results in excel format clicking in “Export results to…” in the series frame.\n\n\n\nFigure 17.20: Selection and Plots with the hydrographs at the outlet for each sub-basin of the system\n\n\n \n\n\n\nFigure 17.21: Hydrographs at the outlet for each sub-basin of the system"
  },
  {
    "objectID": "examples_ex3.html",
    "href": "examples_ex3.html",
    "title": "18  Example 3 – Equipped basin with a hydropower scheme",
    "section": "",
    "text": "This example, allows showing the potential of RS MINERVE for equipped basins. The model starts with the previous model built in Example 2 and adds a hydropower scheme as well as a supplementary basin with an intake. The complete model is presented in Figure 18.1.\nHBV 1, HBV 2 and GSM 1 basins flow through the Reservoir 1. Intake located downstream of a SOCONT model provides supplementary discharge up to 2 m3/s. It is assumed that the propagation in the channel is insignificant and thus it is not necessary to include it in the model (in other case, we could built it with the Reach Kinematic object).\nThe reservoir includes a turbine and a spillway. The turbine generates electricity as long as it is possible for a capacity of 1 m3/s. These two reservoir outflows flow in the River C up the outlet, where they are joined by the production of HBV 3 sub-basin. All the parameters of the different objects are provided in Figure 18.2 and Figure 18.3. The temperature and precipitation data are in the database “Database manual”. A uniform and null ETP is assumed for this example (the user can check the selected ETP method in the RS MINERVE settings)."
  },
  {
    "objectID": "examples_ex3.html#objective-of-example-3",
    "href": "examples_ex3.html#objective-of-example-3",
    "title": "18  Example 3 – Equipped basin with a hydropower scheme",
    "section": "18.1 Objective of Example 3",
    "text": "18.1 Objective of Example 3\nPart A\nThe wanted result for this example is the inflow in the reservoir, the spillway discharge and the hydrograph in the outlet of the model for the period between the 08.05.2013 00:00 and the 15.05.2013 00:00 (as well as the peak discharge and the peak time).\nPart B\nSecond issue aims to know if the reservoir could be managed in order to reduce the peak in the outlet of the system. The objective of this extension is to implement a facility to release water for preventive purposes.\n\n\n\nFigure 18.2: Characteristics of the objects (1/2)\n\n\n \n\n\n\nFigure 18.3: Characteristics of the objects (2/2)\n\n\nAdditionally, initial discharge (\\(Qini\\)) of River C is in this case 1 m3/s."
  },
  {
    "objectID": "examples_ex3.html#resolution-of-example-3-part-a",
    "href": "examples_ex3.html#resolution-of-example-3-part-a",
    "title": "18  Example 3 – Equipped basin with a hydropower scheme",
    "section": "18.2 Resolution of Example 3 – Part A",
    "text": "18.2 Resolution of Example 3 – Part A\nIn the first place, the model of the Example 2 is opened. The connection between the “Confluence” and the River C is erased and objects Virtual Weather Station , SOCONT , Reservoir , Spillway , Turbine  and Junction  are added, as presented in Figure 18.4.\n\n\n\nFigure 18.4: Construction of the Example 3 model on the basis of Example 2\n\n\nNew objects are always linked from upstream to downstream (e.g.: SOCONT 1 to Diversion 1, Diversion 1 to Confluence (\\(Qdiverted\\)) and to Outside of the Basin (\\(Qdown\\)), Reservoir 1 to HQ 1, Reservoir 1 to Turbine 1, Turbine 1 to River C, etc). After creating the links (Figure 18.5), the news relations can be visualized by double clicking on each blue arrow (Figure 18.6 to Figure 18.9).\n\n\n\nFigure 18.5: Topology of the new model\n\n\n \n\n\n\nFigure 18.6: Relations for Virtual Weather Station S1 and SOCONT 1 objects\n\n\n \n\n\n\nFigure 18.7: Relations for the Reservoir object\n\n\n \n\n\n\nFigure 18.8: Relations for the Turbine object\n\n\n \n\n\n\nFigure 18.9: Relations for the Diversion object\n\n\nThe introduced parameters of new objects Diversion 1, Reservoir 1, HQ 1 and Turbine 1 are presented in Figure 18.10 to Figure 18.13.\n\n\n\nFigure 18.10: Relation Qup-Qdiverted introduced in the Diversion 1\n\n\n \n\n\n\nFigure 18.11: Relation H-V of the Reservoir 1\n\n\n \n\n\n\nFigure 18.12: Relation H-Q of the HQ 1\n\n\n \n\n\n\nFigure 18.13: Discharge of the Turbine 1\n\n\nAs shown in Figure 18.13, the thresholds in the level of the reservoir to start (2127 masl) and to stop (2110 masl) the turbine cycle, as well as the first suggested value for the turbine cycle (1 = turbine) have to be introduced.\nOnce the construction finished, it can be saved clicking in the button  and giving a name to the .rsm file (e.g. “Example3.rsm”).\nBefore starting the calculation, the meteorological data have to be loaded: the dialog box of the database is opened clicking in  Open for loading the corresponding database file (“Database manual”). The user can click on the Database tab to visualize or modify the series of the database (Figure 17.15).\nOnce the database loaded, the user can connect the database to the hydrological model. For achieving this purpose, the user has to choose the correct data source in the corresponding frame (Figure 18.14): the group “Measure” and the dataset “DataSet Example 2and3” for the current example. It is not necessary to fill up the data sources of the reservoir as it will take the default value for the simulation.\n\n\n\nFigure 18.14: Data source used for connecting the model to the database\n\n\nFinally, the necessary parameters of the simulation are chosen in the menu Solver frame according to the propose dates in the wording. The other values (time intervals) stay as indicate in the program, being 600 s in both cases.\nIf the pre-simulation validation allows to valid the model (with the message: “Model ‘Example 3’ is valid”), the simulation can be initiated clicking in the button Start."
  },
  {
    "objectID": "examples_ex3.html#results-of-example-3-part-a",
    "href": "examples_ex3.html#results-of-example-3-part-a",
    "title": "18  Example 3 – Equipped basin with a hydropower scheme",
    "section": "18.3 Results of Example 3 – Part A",
    "text": "18.3 Results of Example 3 – Part A\nAll the results can be visualized by double clicking in the corresponding object. Figure 18.15 presents the hydrograph at the system outlet.\n\n\n\nFigure 18.15: Outlet hydrograph\n\n\nThe peak discharge arrives on May the 9th, 2013 at 21:40 and the peak discharge is equal to 8.482 m3/s.\nTo summarize the simulated balance of Reservoir 1, an analysis of inputs/outputs in the Reservoir 1 is realized with the “Selection and plots” module. The inflow into the Reservoir 1 (Confluence), the spillway discharge (HQ 1), the turbine flow (Turbine 1), the total flow at the downstream of the reservoir (River C, \\(Qup\\)) and the reservoir level evolution (Reservoir 1) are presented in Figure 18.16. Despite the turbine, the reservoir level reached its maximal fill rating with an overflow which lasted several days. At the end of the simulation, the reservoir level comes around 90 cm above the initial level.\n\n\n\nFigure 18.16: Flows balance of the reservoir"
  },
  {
    "objectID": "examples_ex3.html#resolution-of-example-3-part-b",
    "href": "examples_ex3.html#resolution-of-example-3-part-b",
    "title": "18  Example 3 – Equipped basin with a hydropower scheme",
    "section": "18.4 Resolution of Example 3 – Part B",
    "text": "18.4 Resolution of Example 3 – Part B\nIn order to create an outlet or a facility for releases, one way is to define a turbine connected to the reservoir (Figure 18.17). We create a new turbine (Turbine 2) and make the connections from the reservoir to the new turbine and from the turbine to River C. Also we create a time series element connected to the new turbine where we will define the releases from the reservoirs.\n\n\n\nFigure 18.17: Topology of the model including the new release\n\n\nNotice that actually the new turbine is representing a sluice of the reservoir.\nOnce the model has been adapted we have to define the preventive releases in the corresponding Turbine 2. Analyzing the results of the example one can think that preventive release should start near 13h00 of first day and finish eleven hours later.\nAs in the time series we have to define time in seconds (0 seconds corresponds to the start time of the simulation), the start is at 46800 s and the end at 86400 s. Moreover, it is considered that the release must take place only when the level in the reservoir exceeds 2128 masl, and stops when it is under 2125 masl.\nThe value of the releases depends on the capacity of the sluice and the decision of the manager. In this case, a discharge of 5 m3/s is defined, as presented in Figure 18.18.\n\n\n\nFigure 18.18: Proposed release from the Turbine 2\n\n\nNew objects are linked as before, from upstream to downstream, obtaining same relations, as presented in Figure 18.19.\n\n\n\nFigure 18.19: Connections between objects"
  },
  {
    "objectID": "examples_ex3.html#results-of-example-3-part-b",
    "href": "examples_ex3.html#results-of-example-3-part-b",
    "title": "18  Example 3 – Equipped basin with a hydropower scheme",
    "section": "18.5 Results of Example 3 – Part B",
    "text": "18.5 Results of Example 3 – Part B\nIn the following Figure 18.20 we can see the new flows of the outlet and other variables. As it can be seen the peak is reduced to less than 8 m3/s due to the preventive releases at the outlet of the model (Figure 18.20). Moreover, with the extra releases, we have created a first artificial peak.\n\n\n\nFigure 18.20: Outlet hydrograph after the addition of the new release. Peak discharge of 7.552 m3/s arrives now on May the 10th, 2013 at 02:10.\n\n\nMaximum water level on the reservoir, 2128.473 m a.s.l., is at this case smaller than without the extra release of Part A (maximum water level of the part A was 2128.467 m a.s.l.).\nTo compared this results with the results of Part A, same results are presented, i.e., an analysis of inputs/outputs in the Reservoir 1. The inflow into the Reservoir 1 (Confluence), the spillway discharge (HQ 1), the turbine flows (Turbine 1 and Turbine 2), the total flow at the downstream of the reservoir (River C, \\(Qup\\)) and the reservoir level evolution (Reservoir 1) are presented in Figure 18.21.\n\n\n\nFigure 18.21: Flows balance of the reservoir and hydrographs at main control points\n\n\nAlthough the objective has achieved, many issues emerge from the management of the reservoir. How much water do we have to release? Are we aggravating the situation downstream? How much energy will we lose if the flood is not as important as expected? And so on."
  },
  {
    "objectID": "examples_ex4.html",
    "href": "examples_ex4.html",
    "title": "19  Example 4 – Automatic calibration of a model",
    "section": "",
    "text": "This example allows an introduction to the use of the tool of hydrologic calibration in Expert module. The model starts with the previous model built in Example 2, with the same parameters. The calibration will be based on the comparison between observed and simulated discharges. Through this example (Figure 19.1), five parameters are calibrated. Two parameters are calibrated for the GSM object and three for the HBV model:\nThe range of values for the calibration can be defined based on the values given as regular range in Section A. The temperatures, the precipitations and the outflow observed are in the database “Database manual”. A uniform and null ETP is assumed for this example (the user can check the selected ETP method in the RS MINERVE Settings)."
  },
  {
    "objectID": "examples_ex4.html#objective-of-example-4",
    "href": "examples_ex4.html#objective-of-example-4",
    "title": "19  Example 4 – Automatic calibration of a model",
    "section": "19.1 Objective of Example 4",
    "text": "19.1 Objective of Example 4\nThe wanted result is the new values for the calibrated parameters of the GSM and HBV models after the automatic calibration. For the calibration, observed and simulated data are compared at the confluence point and at the outlet for a period between the 01.09.2011 00:00 and the 31.08.2012 00:00. In this example, the calibration uses an Objective Function (OF) with a weight of four for the Nash indicator, two for the Pearson Correlation Coeff indicator, four for the Relative Volume Bias indicator and zero for the other indicators. The “Simulation time step” and the “Recording time step” are fixed to 600 s."
  },
  {
    "objectID": "examples_ex4.html#resolution-of-example-4",
    "href": "examples_ex4.html#resolution-of-example-4",
    "title": "19  Example 4 – Automatic calibration of a model",
    "section": "19.2 Resolution of Example 4",
    "text": "19.2 Resolution of Example 4\nFor the calibration, it is necessary to add two source objects  to have a reference flows (observed discharges) at the confluence point and at the outlet. Two comparators objects  are also necessary to compare the results of the simulation with the reference data (observations) coming from the source object.\nThe Confluence and the Source 1 are connected to the comparator 1. The Outlet and the Source 2 are connected to the Comparator 2. The relations created can be visualized by double clicking on each blue arrow (Figure 19.2, Figure 19.3, Figure 19.4).\n\n\n\nFigure 19.2: Topologic links between the different objects\n\n\n \n\n\n\nFigure 19.3: Possible outputs transfers between objects\n\n\n \n\n\n\nFigure 19.4: Connections between objects\n\n\nConstructed model can be now saved clicking in the button  and giving a name to the .rsm file (e.g. “Example4.rsm”).\nNext, the meteorological data have to be loaded: the dialog box of the database is opened clicking in  (Figure 19.5) for loading the corresponding database file (“Database manual.dbx”).\n\n\n\nFigure 19.5: Database frame\n\n\nThe user can visualize or modify the database (Figure 19.6).\n\n\n\nFigure 19.6: Database of the model\n\n\nOnce the database is loaded, the user can connect the database to the hydrological model. For achieving this purpose, the user has to choose the correct data source in the corresponding frame (Figure 19.7): the group “Measure” and the dataset “DataSet Example 4” for the current example.\n\n\n\nFigure 19.7: Data source used for connecting the model to the database\n\n\nThen, the user has to choose the series identifier for each Source object (the series of the database which contains the observed discharges) as shown in Figure 19.8.\n\n\n\nFigure 19.8: Series identifier for the “Source 2” object\n\n\nIn order to clarify the use of the Calibrator tool, the different objects of the model will be aggregated in 2 zones:\n\nZone 1: all the objects upstream the “Confluence” object (including the “Confluence”).\nZone 2: the rest of the objects of the model.\n\nFor that, the user has to double-click on each objects of the Zone 1 and change the Zone form 0 (default) to 1 as shown in Figure 19.9. The user will proceed similarly for the Zone 2.\n\n\n\nFigure 19.9: Change of the Zone of the “Station G1” object\n\n\nFinally, the module of hydrologic calibration can be launched by clicking on Expert \\(\\rightarrow\\) Calibrator in the Modules frame (Figure 19.10).\n\n\n\nFigure 19.10: Interface of the Calibrator tool\n\n\nTwo calibration configurations can be created, one for each zone of the model (Figure 19.11). Give the order 1 to the calibration of Zone 1 (this one will be executed first) and order 2 to the calibration of Zone 2 (this one will be executed next).\n\n\n\nFigure 19.11: Creation of the calibration configurations\n\n\nFor each calibration configuration, in the Selection frame the HBV and GSM objects types are selected with the corresponding zone (Figure 19.12).\n\n\n\nFigure 19.12: Selection of objects and zones to calibrate, for the “Confluence” calibration configuration\n\n\nThe parameters to calibrate are checked in the Parameters frame (Figure 19.13). For each of them, the minimum and maximum values are:\n\nGSM-An: 0.5 – 10\nGSM-Agl: 0.5 – 10\nHBV-FC: 0.05 – 0.65\nHBV-SUMax: 0 – 0.1\nHBV-Kr: 0.05 – 0.5\n\nThe source of the initial values is selected as random for the parameters to calibrate and from model for the others.\n\n\n\nFigure 19.13: Definition of the parameters to calibrate\n\n\nIn the Comparators frame, select alternatively the comparator whose the observed discharges will be used for the calibration of the corresponding zone (Comparator 1 for the first calibration configuration, and Comparator 2 for the second one).\n\n\n\nFigure 19.14: Selection of comparators\n\n\nIn the Objective Function (OF) frame the weight of the Nash and Relative Volume Bias coefficient are settled to 4 and the weight of the Pearson relative coefficient is 2. The other coefficients are all settled to zero (Figure 19.15). The default algorithm parameters are used.\n\n\n\nFigure 19.15: Weight of each indicator to determine the objective function\n\n\nAfter specifying the calibration period in the Solver tab of the Hydrologic parameters optimization frame, the calibration configuration can be saved and then started.\nAt the end of the calibrations the final parameters obtained are collected in the current model. If the model is saved, the parameters are stored; if not, the hydrological model keeps preliminary parameters."
  },
  {
    "objectID": "examples_ex4.html#results-of-example-4",
    "href": "examples_ex4.html#results-of-example-4",
    "title": "19  Example 4 – Automatic calibration of a model",
    "section": "19.3 Results of Example 4",
    "text": "19.3 Results of Example 4\nOnce the calculation is finished (after approximately 1’300 iterations for the confluence calibration and 400 iteration for the outlet calibration), the best values obtained for the parameters can be visualized in the Summary results frame. From a maximum possible value of the Objective Function (OF) of 6, the best score provided by the algorithm is 5.448 and 5.560 for the confluence calibration and the outlet calibration, respectively.\nHereafter (Table 19.1 and Table 19.2) the results of the calibration (since the algorithm contains the random calculations, it is possible to obtain a similar but not exactly the same result).\n\n\nTable 19.1: Calibrated parameters\n\n\n\n\n\n\n\n\n\n\nInitial Parameter\nInitial Parameter\nBest Parameter\nBest Parameter\n\n\n\n\n\nConfluence\nOutlet\nConfluence\nOutlet\n\n\nGSM - An\n6\n-\n0.761\n-\n\n\nGSM – Agl\n7\n-\n0.500\n-\n\n\nHBV – FC\nDifferent values\n0.275\n0.126\n0.534\n\n\nHBV – SUMax\nDifferent values\n0.0055\n0.100\n0.0781\n\n\nHBV – Kr\nDifferent values\n0.3\n0.281\n0.152\n\n\n\n\n \n\n\nTable 19.2: Performance indicators\n\n\n\n\n\n\n\n\n\n\nInitial Performance\nInitial Performance\nFinal Performance\nFinal Performance\n\n\n\n\n\nConfluence\nOutlet\nConfluence\nOutlet\n\n\nNash\n-26.38\n0.87\n0.89\n0.91\n\n\nNash-ln\n-2.67\n0.81\n0.80\n0.84\n\n\nPearson Correlation Coeff.\n0.57\n0.95\n0.95\n0.96\n\n\nKling-Gupta Efficiency\n-2.20\n0.91\n0.94\n0.95\n\n\nBias Score\n-9.03\n0.99\n1\n1\n\n\nRRMSE\n3.95\n0.26\n0.25\n0.22\n\n\nRelative Volume Bias\n3.17\n0.07\n2E-5\n-6E-7\n\n\nNormalized Peak Error\n0.63\n0.001\n-0.02\n-0.005\n\n\nOF\n-117.06\n5.12\n5.45\n5.56\n\n\n\n\nThe simulation fits pretty well the outflow observed (Figure 19.16). Thus, the new parameters after the calibration can be kept by saving the model.\n\n\n\nFigure 19.16: Graphic results of the calibration. Hydrograph of both observed and current simulated discharge"
  },
  {
    "objectID": "acknowledgments.html",
    "href": "acknowledgments.html",
    "title": "Acknowledgments",
    "section": "",
    "text": "We would like to thank sincerely these organizations for their support.\nIn addition, we would like to express our gratitude to the people who have personally contributed to the improvement of the program and its documentation, in particular: Stéphane Micheloud1, Néstor Lerma2, Alex Dionisio-Calado3, Nicolas Rey4, Edgar Belda5, Samuel Alesina6, Matthew Moy-de-Vitry7 and Aurélien Claude8.\n\n\n\n\n\nCentre de recherche sur l’environnement alpin - CREALP↩︎\nUniversitat Politècnica de València - UPV↩︎\nCentre de recherche sur l’environnement alpin - CREALP↩︎\nHydroCosmos SA↩︎\nUniversitat Politècnica de València - UPV↩︎\nCentre de recherche sur l’environnement alpin - CREALP↩︎\nCentre de recherche sur l’environnement alpin - CREALP↩︎\nCentre de recherche sur l’environnement alpin - CREALP↩︎"
  },
  {
    "objectID": "appendix_list_param_ic.html",
    "href": "appendix_list_param_ic.html",
    "title": "Appendix A — Appendix: List of parameters and initial conditions",
    "section": "",
    "text": "The list of parameters and initials conditions of the different objets in RS MINERVE is presented hereafter."
  },
  {
    "objectID": "appendix_list_param_ic.html#hydrology-models",
    "href": "appendix_list_param_ic.html#hydrology-models",
    "title": "Appendix A — Appendix: List of parameters and initial conditions",
    "section": "A.1 Hydrology models",
    "text": "A.1 Hydrology models\n\n\nTable A.1: List of parameters for the virtual station\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nX, Y, Z\n-\nCoordinates of the virtual station\n-\n\n\nSearch Radius\nm\nSearch radius of the virtual stations\n>0\n\n\nNo. min. of stations\n-\nMinimal number of stations used for interpolation (higher priority than “Search Radius”)\n\\(\\geq\\) 1\n\n\nGradient P\n1/m\nPrecipitation gradient\n-1\n\n\nGradient T\n°C/m\nTemperature gradient\n-0.007 to -0.004\n\n\nGradient ETP\n1/m\nEvapotranspiration gradient\n-2\n\n\nCoeff P\n-\nMultiplying correction coefficient\n0.5 to 2\n\n\nCoeff T\n°C\nAdding correction coefficient\n-2 to 2\n\n\nCoeff ETP\n-\nMultiplying correction coefficient\n0.5 to 2\n\n\n\n\n \n\n\nTable A.2: List of parameters and initial conditions for the Snow-SD model\n\n\n\n\n\n\n\n\nName\nUnits\nDecription\nRegular range\n\n\n\n\nS\nmm/°C/d\nReference degree-day snowmelt coefficient\n0.5 to 20\n\n\nSInt\nmm/°C/d\nDegree-day snowmelt interval\n0 to 4\n\n\nSMin\nmm/°C/d\nMinimal degree-day snowmelt coefficient\n\\(\\geq\\) 0\n\n\nSPh\nd\nPhase shift of the sinusoidal function\n1 to 365\n\n\nThetaCri\n-\nCritical relative water content of the snow pack\n0.1\n\n\nbp\nd/mm\nMelt coefficient due to liquid precipitation\n0.0125\n\n\nTcp1\n°C\nMinimum critical temperature for liquid precipitation\n0\n\n\nTcp2\n°C\nMaximum critical temperature for solid precipitation\n4\n\n\nTcf\n°C\nCritical snowmelt temperature\n0\n\n\nCFR\n-\nRefreezing coefficient\n0 to 1\n\n\nSWEIni\nm\nInitial snow water equivalent height\n-\n\n\nThetaIni\n-\nInitial relative water content in the snow pack\n-\n\n\n\n\n \n\n\nTable A.3: List of parameters and initial conditions for the SWMM model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of runoff\n>0\n\n\nL\nm\nLength of the plane\n>0\n\n\nJ0\n-\nRunoff slope\n>0\n\n\nK\nm1/3/s\nStrickler coefficient\n0.1 to 90\n\n\nHIni\nm\nInitial water level downstream of the surface\n-\n\n\n\n\n \n\n\nTable A.4: List of parameters and initial conditions for the GSM model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of infiltration\n>0\n\n\nS\nmm/°C/d\nReference degree-day snowmelt coefficient\n0.5 to 20\n\n\nSInt\nmm/°C/d\nDegree-day snowmelt interval\n0 to 4\n\n\nSMin\nmm/°C/d\nMinimal degree-day snowmelt coefficient\n\\(\\geq\\) 0\n\n\nSph\nd\nPhase shift of the sinusoidal function\n1 to 365\n\n\nThetaCri\n-\nCritical relative water content of the snow pack\n0.1\n\n\nbp\nd/mm\nMelt coefficient due to liquid precipitation\n0.0125\n\n\nTcp1\n°C\nMinimum critical temperature for liquid precipitation\n0\n\n\nTcp2\n°C\nMaximum critical temperature for solid precipitation\n4\n\n\nTcf\n°C\nCritical snowmelt temperature\n0\n\n\nG\nmm/°C/d\nReference degree-day glacier melt coefficient\n0.5 to 20\n\n\nGInt\nmm/°C/d\nDegree-day glacier melt interval\n0 to 4\n\n\nGMin\nmm/°C/d\nMinimal degree-day glacier melt coefficient\n\\(\\geq\\) 0\n\n\nTcg\n°C\nCritical glacier melt temperature\n0\n\n\nKgl\n1/d\nRelease coefficient of glacier melt reservoir\n0.1 to 5\n\n\nKsn\n1/d\nRelease coefficient of snowmelt reservoir\n0.1 to 5\n\n\nCFR\n-\nRefreezing coefficient\n0 to 1\n\n\nSWEIni\nm\nInitial snow water equivalent height\n-\n\n\nThetaIni\n-\nInitial relative water content in the snow pack\n-\n\n\nQsnowIni\nm3/s\nInitial outflow of linear snow reservoir\n-\n\n\nQglacierIni\nm3/s\nInitial outflow of linear glacier reservoir\n-\n\n\n\n\n \n\n\nTable A.5: List of parameters and initial conditions for the SOCONT model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface\n>0\n\n\nS\nmm/°C/d\nReference degree-day snowmelt coefficient\n0.5 to 20\n\n\nSInt\nmm/°C/d\nDegree-day snowmelt interval\n0 to 4\n\n\nSMin\nmm/°C/d\nMinimal degree-day snowmelt coefficient\n\\(\\geq\\) 0\n\n\nSPh\nd\nPhase shift of the sinusoidal function\n1 to 365\n\n\nThetaCri\n-\nCritical relative water content of the snow pack\n0.1\n\n\nbp\nd/mm\nMelt coefficient due to liquid precipitation\n0.0125\n\n\nTcp1\n°C\nMinimum critical temperature for liquid precipitation\n0\n\n\nTcp2\n°C\nMaximum critical temperature for solid precipitation\n4\n\n\nTcf\n°C\nCritical snowmelt temperature\n0\n\n\nHGR3Max\nm\nMaximum height of infiltration reservoir\n0 to 2\n\n\nKGR3\n1/s\nRelease coefficient of infiltration reservoir\n0.00025 to 0.1\n\n\nL\nm\nLength of the plane\n>0\n\n\nJ0\n-\nRunoff slope\n>0\n\n\nKr\nm1/3/s\nStrickler coefficient\n0.1 to 90\n\n\nCFR\n-\nRefreezing coefficient\n0 to 1\n\n\nSWEIni\nm\nInitial snow water equivalent height\n-\n\n\nHGR3Ini\nm\nInitial level in infiltration reservoir\n-\n\n\nHrIni\nm\nInitial runoff water level downstream of the surface\n-\n\n\nThetaIni\n-\nInitial relative water content in the snow pack\n-\n\n\n\n\n \n\n\nTable A.6: List of parameters and initial conditions for the HBV model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of the basin\n>0\n\n\nCFMax\nmm/°C/d\nMelting factor\n0.5 to 20\n\n\nCFR\n-\nRefreezing factor\n0.05\n\n\nCWH\n-\nCritical relative water content of the snow pack\n0.1\n\n\nTT\n°C\nThreshold temperature of rain/snow\n0 to 3\n\n\nTTInt\n°C\nTemperature interval for rain/snow mixing\n0 to 3\n\n\nTTSM\n°C\nThreshold temperature for snow melt\n0\n\n\nBeta\n-\nModel parameter (shape coefficient)\n1 to 5\n\n\nFC\nm\nMaximum soil storage capacity\n0.050 to 0.65\n\n\nPWP\n-\nSoil permanent wilting point threshold\n0.030 to 1\n\n\nSUMax\nm\nUpper reservoir water level threshold\n0 to 0.10\n\n\nKr\n1/d\nNear surface flow storage coefficient\n0.05 to 0.5\n\n\nKu\n1/d\nInterflow storage coefficient\n0.01 to 0.4\n\n\nKl\n1/d\nBaseflow storage coefficient\n0 to 0.15\n\n\nKperc\n1/d\nPercolation storage coefficient\n0 to 0.8\n\n\nSWEIni\nm\nInitial snow water equivalent height\n-\n\n\nWHIni\n-\nInitial relative water content in the snow pack\n-\n\n\nHumIni\nm\nInitial humidity\n-\n\n\nSUIni\nm\nInitial upper reservoir water level\n-\n\n\nSLIni\nm\nInitial lower reservoir water level\n-\n\n\n\n\n \n\n\nTable A.7: List of parameters and initial conditions for the GR4J model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of the basin\n>0\n\n\nX1\nm\nCapacity of production store\n0.01 to 1.2\n\n\nX2\nm\nWater exchange coefficient\n-0.005 to 0.003\n\n\nX3\nm\nCapacity of routing store\n0.01 to 0.5\n\n\nX4\nd\nUH time base\n-0.5 to 1\n\n\nSIni\nm\nInitial water content in the production reservoir\n-\n\n\nRIni\nm\nInitial water level in the routing reservoir\n-\n\n\n\n\n \n\n\nTable A.8: List of parameters and initial conditions for the SAC-SMA model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of the basin\n>0\n\n\nAdimp\n-\nMaximum fraction of an additional impervious area due to saturation\n0 to 0.2\n\n\nPctim\n-\nPermanent impervious area fraction\n0 to 0.05\n\n\nRiva\n-\nRiparian vegetarian area fraction\n0 to 0.2\n\n\nUztwMax\nm\nUpper Zone Tension Water capacity\n0.01 to 0.15\n\n\nUzfwMax\nm\nUpper Zone Free Water capacity\n0.005 to 0.10\n\n\nUzk\n1/d\nInterflow depletion rate from the Upper Zone Free Water storage\n0.10 to 0.75\n\n\nZperc\n-\nRatio of maximum and minimum percolation rates\n10 to 350\n\n\nRexp\n-\nShape parameter of the percolation curve\n1 to 4\n\n\nPfree\n-\nPercolation fraction that goes directly to the Lower Zone Free Water storages\n0 to0.6\n\n\nLztwMax\nm\nThe Lower Zone Tension Water capacity\n0.05 to 0.40\n\n\nLzfpMax\nm\nThe Lower Zone primary Free Water capacity\n0.03 to 0.80\n\n\nLzfsMax\nm\nThe Lower Zone supplementary Free Water capacity\n0.01 to 0.40\n\n\nRserv\n-\nFraction of Lower Zone Free Water not transferable to Lower Zone Tension Water\n0 to 1\n\n\nLzpk\n1/d\nDepletion rate of the Lower Zone primary Free Water storage\n0.001 to 0.03\n\n\nLzsk\n1/d\nDepletion rate of the Lower Zone supplemental Free Water storage\n0.02 to 0.3\n\n\nSide\n-\nRatio of deep percolation from Lower Zone Free Water storages\n0 to 0.5\n\n\nAdimIni\nm\nInitial Tension Water content of the Adimp area\n-\n\n\nUztwIni\nm\nInitial Upper Zone Tension Water content\n-\n\n\nUzfwIni\nm\nInitial Upper Zone Free Water content\n-\n\n\nLztwIni\nm\nInitial Lower Zone Tension Water content\n-\n\n\nLzfpIni\nm\nInitial Lower Zone Free supplementary content\n-\n\n\nLzfsIni\nm\nInitial Lower Zone Free primary content\n-\n\n\n\n\n \n\n\nTable A.9: List of parameters and initial conditions for the SCS model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nA\nm2\nSurface of the basin\n>0\n\n\nCN\n-\nCurve Number\n30 to 100\n\n\nL\nm\nWidth of the plane\n\\(\\geq\\) 0\n\n\nJ0\n-\nRunoff slope\n\n\n\nIa\nmm\nInitial abstraction\n0 to 100000\n\n\nTI\ns\nLag time\n\\(\\geq\\) 0"
  },
  {
    "objectID": "appendix_list_param_ic.html#river-models",
    "href": "appendix_list_param_ic.html#river-models",
    "title": "Appendix A — Appendix: List of parameters and initial conditions",
    "section": "A.2 River models",
    "text": "A.2 River models\n\n\nTable A.10: List of parameters and initial conditions for the channel routing model\n\n\n\n\n\n\n\n\nName\nUnits\nDescription\nRegular Range\n\n\n\n\nL\nm\nLength\n>0\n\n\nB0\nm\nWidth of the channel base\n>0\n\n\nm\n-\nSide bank relation coefficient (1H/mV)\n0.1 to 1\n\n\nJ0\n-\nSlope\n>0\n\n\nK\nm1/3/s\nStrickler coefficient\n10 to 90\n\n\nN\n-\nNumber of sections (not for Lag-Time)\n>0\n\n\nLag\nmin\nLag time (only for Lag-Time)\n\\(\\geq\\) 0\n\n\nQIni\nm3/s\nInitial discharge\n-"
  },
  {
    "objectID": "appendix_list_param_ic.html#standard-models",
    "href": "appendix_list_param_ic.html#standard-models",
    "title": "Appendix A — Appendix: List of parameters and initial conditions",
    "section": "A.3 Standard models",
    "text": "A.3 Standard models\n\n\nTable A.11: Time series required data\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nSeries (paired data)\ns (depending on the series)\nTime - Value series"
  },
  {
    "objectID": "appendix_list_param_ic.html#infrastructure-objects",
    "href": "appendix_list_param_ic.html#infrastructure-objects",
    "title": "Appendix A — Appendix: List of parameters and initial conditions",
    "section": "A.4 Infrastructure objects",
    "text": "A.4 Infrastructure objects\n\n\nTable A.12: Reservoir paired data and initial condition required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nH-V (paired data)\nmasl - m3\nLevel - Volume relation\n\n\nHini\nmasl\nInitial level in the reservoir\n\n\n\n\n \n\n\nTable A.13: HQ paired data required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nH-Q (paired data)\nmasl - m3/s\nLevel - Discharge relation\n\n\n\n\n \n\n\nTable A.14: Time-Q paired data, parameters and initial condition required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nH-Q (paired data)\nmasl - m3/s\nLevel - Discharge relation\n\n\nHon\nmasl\nThreshold in the level of the reservoir to start the turbine cycle (turbine starts when the threshold is exceeded)\n\n\nHoff\nmasl\nThreshold in the level of the reservoir to stop the turbine cycle (turbine stops when level go below the threshold)\n\n\nIsOperatingIni\n0/1\nFirst suggested value for the turbine cycle (0 = not turbine; 1 = turbine). Only taken into account if Hoff > H > Hon\n\n\n\n\n \n\n\nTable A.15: Hydropower paired data and parameters required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nQ- (paired data)\nm^ 3^/s - %\nDischarge-Performance relation\n\n\nZplant\nmasl\nHydropower plant altitude\n\n\nL\nm\nLength of the pipe\n\n\nD\nm\nDiameter of the pipe\n\n\nK\nm\nRoughness\n\n\n\nm2/s\nKinematic viscosity\n\n\nDefault Price\n€/Kwh\nDefault price, only used if no data exists in the database\n\n\n\n\n \n\n\nTable A.16: Diversion paired data required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nQup-Qdiverted (paired data)\nm3/s - m3/s\nUpstream flow - Diverted flow relation\n\n\n\n\n \n\n\nTable A.17: Consumer parameters required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nLossRate\n-\nFraction of the Qsupplied lost at the demand site\n\n\nConsumptionRate\n-\nFraction of the Qdelivered ultimately consumed\n\n\nDefault QDemand\nm3/s\nDefault demand of consummation, only used if no data exists in the database\n\n\n\n\n \n\n\nTable A.18: Structure efficiency parameters required\n\n\n\n\n\n\n\nName\nUnits\nDescription\n\n\n\n\nEfficiency\n-\nEfficiency of the structure"
  },
  {
    "objectID": "appendix_list_notifications.html",
    "href": "appendix_list_notifications.html",
    "title": "Appendix B — List of notifications from pre-simulation and post-simulation reports",
    "section": "",
    "text": "The list of notifications (notes, warnings and fatal) of the pre- and post-simulation reports is presented hereafter."
  },
  {
    "objectID": "appendix_list_notifications.html#isolated-objects",
    "href": "appendix_list_notifications.html#isolated-objects",
    "title": "Appendix B — List of notifications from pre-simulation and post-simulation reports",
    "section": "B.1 Isolated objects",
    "text": "B.1 Isolated objects\nPre-simulation report\n\n\n\n\n\n\n\n\nWarning\nIf an object is isolated and is not taken into account for calculation.\nThe object ‘Object 1’ has no links and is isolated."
  },
  {
    "objectID": "appendix_list_notifications.html#hydrology",
    "href": "appendix_list_notifications.html#hydrology",
    "title": "Appendix B — List of notifications from pre-simulation and post-simulation reports",
    "section": "B.2 Hydrology",
    "text": "B.2 Hydrology\n\nVirtual Station\nPre-Simulation Report\n\n\n\n\n\n\n\n\nFatal\nIf a Virtual Station exists and is not isolated, but no database is connected to the model.\nMissing database to get station data.\n\n\nFatal\nIf this object exists and a database is connected to the hydrological model, but any dataset is selected for meteorological data utilisation.\nNo dataset is selected for station ‘Station 1’ (X m, Y m, Z masl).\n\n\nFatal\nIf this object exists and a database is connected to the hydrological model, but no datagroup is selected in the Data source.\nNo datagroup is selected for station ‘Station 1’ (X m, Y m, Z masl).\n\n\nFatal\nIf this object exists and a database is connected to the hydrological model, but a precipitation input is not available in the database.\nNo precipitation values for station ‘Station 1’ (X m, Y m, Z masl).\n\n\nWarning\nIf this object exists and a database is connected to the hydrological model, but a temperature / ETP input is not available.\nNo temperature/ETP values for station ‘Station 1’ (X m, Y m, Z masl). A null series will be considered.\n\n\n\nPost-Simulation Report\n\n\n\n\n\n\n\n\nWarning\nIf this object does not find data for Precipitation, Temperature or ETP in any station of the database within in the radius of search, search radius is extended until finding one.\nNo precipitation found 1within search radius of virtual station ‘Station 1’. Radius extended to satisfy No. min of stations.\n\n\n\n \n\n\nSnow-SD model description\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object exists and is connected to other objects, but not all Snow-SD model inputs are available.\nThe object ‘Snow-SD 1’ has no Precipitation ‘i’ / Temperature ‘T’ as input.\n\n\n\n \n\n\nRunoff (SWMM) model description\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf the object exists and is not isolated, but has no intensity as input.\nThe object ‘SWMM 1’ has no Precipitation ‘i’ as input.\n\n\n\n \n\n\nGSM model description\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object exists and is not isolated, but not all GSM model inputs are available.\nThe object ‘GSM 1’ has no Precipitation ‘P’ / Temperature ‘T’ as input.\n\n\n\n \n\n\nSOCONT model description\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object exists and is not isolated, but not all SOCONT model inputs are available.\nThe object ‘SOCONT 1’ has no Precipitation ‘P’ / Temperature ‘T’/ETP ‘ETP’ as input.\n\n\n\n \n\n\nHBV model description\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object exists and is not isolated, but not all HBV model inputs are available.\nThe object ‘HBV 1’ has no Precipitation ‘P’/Temperature ‘T’/ETP ‘ETP’ as input.\n\n\n\n \n\n\nGR4J model description\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object exists and is not isolated, but not all HBV model inputs are available.\nThe object ‘GR4J’ has no Precipitation ‘P’/ETP ‘ETP’ as input.\n\n\n\n \n\n\nSAC model description\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object exists and is not isolated, but not all SAC model inputs are available.\nThe object ‘SAC’ has no Precipitation ‘P’/ETP ‘ETP’ as input."
  },
  {
    "objectID": "appendix_list_notifications.html#rivers",
    "href": "appendix_list_notifications.html#rivers",
    "title": "Appendix B — List of notifications from pre-simulation and post-simulation reports",
    "section": "B.3 Rivers",
    "text": "B.3 Rivers\n\nChannel routing description\nNo fatal, warnings or notes messages for this object."
  },
  {
    "objectID": "appendix_list_notifications.html#standard-objects",
    "href": "appendix_list_notifications.html#standard-objects",
    "title": "Appendix B — List of notifications from pre-simulation and post-simulation reports",
    "section": "B.4 Standard objects",
    "text": "B.4 Standard objects\n\nJunction\nNo fatal, warnings or notes messages for this object.\n\n\nTime Series\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object if used and is not isolated, but the H-Q paired data is not provided.\nTimes Series ’Time series 1’is missing paired data values.\n\n\n\n \n\n\nSource\nPre-simulation report\n\n\n\n\n\n\n\n\nWarning\nIf a source object exists and no database is connected to the model.\nMissing database to get source data.\n\n\nWarning\nIf no group is selected in the Data source for sources.\nMissing database group to source data.\n\n\nWarning\nIf this object is used and is not isolated, but the source has no a station from database to provide data series.\nNo station or sensor for source ‘Source 1’.\n\n\n\n\n\nComparator\nNo fatal errors, warnings or note messages for this object\n\n\nSub-model\nNo fatal errors, warnings or note messages for this object\n\n\nGroup Interface\nNo fatal errors, warnings or note messages for this object"
  },
  {
    "objectID": "appendix_list_notifications.html#structures-objects",
    "href": "appendix_list_notifications.html#structures-objects",
    "title": "Appendix B — List of notifications from pre-simulation and post-simulation reports",
    "section": "B.5 Structures objects",
    "text": "B.5 Structures objects\n\nReservoir\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object is used and is not isolated, but the H-V paired data is not provided.\nReservoir ‘Reservoir 1’ is missing H-V paired data.\n\n\nFatal\nIf this object is used and is not isolated, but does not have an inflow.\nThe object ‘Reservoir 1’ has no Flow ‘Qe’ as input.\n\n\nWarning\nIf the initial level of the reservoir is out of the range proposed in the H-V paired data. The simulation is achieved, assuming the level equals to the maximum level of the reservoir.\nHini of reservoir ’Reservoir 1’is out of range.\n\n\nNote\nIf a Reservoir object exists but no database is connected to the model.\nMissing database to get initial height of reservoirs.\n\n\nNote\nIf no group is selected in the Data source for reservoirs.\nMissing database group to get HPP data.\n\n\nNote\nIf the reservoir uses the initial condition proposed by the user (and not data from database as initial condition).\nHini of reservoir ’Reservoir 1’used as initial height.\n\n\nNote\nIf the reservoir uses the initial condition from the database.\nInitial height of reservoir ‘Reservoir 1’ taken from database.\n\n\n\nPost-Simulation Report\n\n\n\n\n\n\n\n\nWarning\nIf the volume becomes negative in a moment of the simulation. Nevertheless, the simulation is computed (with a correct volume variation, V; keeping the reservoir level, H, in zero for negative volumes).\nVolume of reservoir ‘Reservoir 1’ contains negative values.\n\n\nWarning\nIf the volume exceeds the maximum volume proposed in the relation H-V. Nevertheless, the simulation is computed (with a correct volume variation, V, keeping the reservoir level, H, to maximum value of paired data H-V when volume exceeds the maximum volume).\nVolume of reservoir ‘Reservoir 1’ exceeds its capacity.\n\n\n\n \n\n\nHQ\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object is used and is not isolated, but the H-Q paired data is not provided.\nHQ ’HQ 1’is missing H-Q paired data.\n\n\n\nPost-Simulation Report\n\n\n\n\n\n\n\n\nWarning\nThe computed simulation runs even if the level is equal or over the maximum level proposed in the relation H-Q. In that case, the outflow is kept as the maximum discharge existing in the relation H-Q.\nThe maximum level of HQ ‘HQ 1’ has been attained or exceeded.\n\n\n\n \n\n\nTurbine\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object is used and is not isolated, but do not receive the Qwanted data as input.\nThe object ‘Turbine 1’ has no Flow ‘Qwanted’ as input.\n\n\n\n \n\n\nTurbineDB\nPre-simulation report\n\n\n\n\n\n\n\n\nWarning\nIf a TurbineDB object exists and no database is connected to the model.\nMissing database to get TurbineDB data.\n\n\nWarning\nIf this object if used and is not isolated, but no group is selected in the Data source for TurbineDB.\nMissing database group to get TurbineDB data.\n\n\nWarning\nIf this object if used and is not isolated, but the TurbineDB has not a station from database to provide data series.\nNo station or sensor for TurbineDB ‘TurbineDB 1’.\n\n\n\n \n\n\nHydropower\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object if used and is not isolated, but the Q-η paired data is not provided.\nHydropower ’Hydropower 1’is missing paired data values.\n\n\nWarning\nIf a source object exists and no database is connected to the model.\nMissing database to get Hydropower data. Default Price value(s) will be used.\n\n\nWarning\nIf no group is selected in the Data source for sources.\nMissing database group to get Hydropower data. Default Price value(s) will be used.\n\n\nWarning\nIf this object is used and is not isolated, but the consumer has not a station from database to provide data series.\nNo station or sensor for Hydropower ‘Hydropower 1’. Price defined from Default Price.\n\n\n\n \n\n\nDiversion\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal\nIf this object if used and is not isolated, but the QUp-QDiverted paired data is not provided.\nDiversion ’Diversion 1’is missing QUp-QDiverted paired data.\n\n\n\n \n\n\nConsumer\nPre-simulation report\n\n\n\n\n\n\n\n\nWarning\nIf a source object exists and no database is connected to the model.\nMissing database to get Consumer data. Default QDemand values will be used.\n\n\nWarning\nIf no group is selected in the Data source for sources.\nMissing database group to consumer data. Default QDemand values will be used.\n\n\nWarning\nIf this object is used and is not isolated, but the consumer has not a station from database to provide data series.\nNo station or sensor for Consumer ‘Consumer 1’. Consumption defined from Default QDemand."
  },
  {
    "objectID": "appendix_list_notifications.html#planner-object",
    "href": "appendix_list_notifications.html#planner-object",
    "title": "Appendix B — List of notifications from pre-simulation and post-simulation reports",
    "section": "B.6 Planner object",
    "text": "B.6 Planner object\n\nPlanner\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal Error\nA rule in required.\nThe planner ‘Planner 1’ has no rules defined.\n\n\n\n \n\n\nRules\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal Error\nA condition is required.\nThe rule ‘Rule 1’ in planer ‘Planner 1’ has no condition defined.\n\n\n\n \n\n\nConditions\nPre-simulation report\n\n\n\n\n\n\n\n\nFatal Error\nAn input is required.\nThe condition ‘Condition 1’ in ‘Rule 1’ of ’ Planner 10 has no input defined.\n\n\nFatal Error\nAn object is required.\nThe condition ‘Condition 1’ in ‘Rule 1’ of ’ Planner 10 has no object defined.\n\n\nFatal Error\nA result is required.\nThe condition ‘Condition 1’ in ‘Rule 1’ of ’ Planner 10 has no result defined."
  }
]